(function(){var e={32090:function(e,t,i){"use strict";i.d(t,{LN:function(){return n},PA:function(){return l},R4:function(){return u},ZT:function(){return c},gC:function(){return a},kg:function(){return o},vL:function(){return s},vv:function(){return r}});const a=1,s=/(%\[.*?\]%)/gi,n="auth/requires-recent-login",o="auth/too-many-requests",r="auth/invalid-multi-factor-session",l="auth/code-expired",c="Your login session has expired. Please log in again to access your account.",u=40},30920:function(e,t,i){"use strict";i.d(t,{m:function(){return te}});var a=i(61369),s=i(83977),n=i(74864),o=i(98887),r=i(9669),l=i.n(r),c=i(67473),u=i(24449),d=i(36100),h=i(8400),m=i.n(h);class g{constructor(e,t){(0,a.Z)(this,"_localeDocRef",void 0);const i=(0,d.ad)(e);this._localeDocRef=(0,d.JU)(i,`geos/${t}`)}getChatsCollectionRef(){return(0,d.hJ)(this._localeDocRef,"chats")}getPokesCollectionRef(){return(0,d.hJ)(this._localeDocRef,"pokes")}getAnnouncementsTopicsCollectionRef(){return(0,d.hJ)(this._localeDocRef,"announcements_topics")}}var p=i(5412),f=i(60359),b=i(73222),y=i(89177);class v{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),(0,a.Z)(this,"_claimedUnsubscribeFunction",void 0),(0,a.Z)(this,"_unclaimedUnsubscribeFunction",void 0),(0,a.Z)(this,"_queueUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),(0,a.Z)(this,"_chatProperties",["customer","profile","isConversation","isDeleted","createdAt","updatedAt","lastMessage","lastSenderType","claimedBy","claimExpiresAt","domain","origin","trigger","usedAttachments","attachments","lastMessageMessagePool"]),this._user=e,this._project=t,this._locale=i,this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef()}createUnclaimedChatQuery(e){return(0,d.IO)(e,(0,d.Xo)("updatedAt","asc"),(0,d.ar)("claimedBy","==",null),(0,d.ar)("lastSenderType","in",["customer","queueableTrigger"]),(0,d.ar)("lastMessage.isFree","==",!1),(0,d.b9)(150))}createClaimedChatQuery(e){return(0,d.IO)(e,(0,d.Xo)("updatedAt","desc"),(0,d.ar)("claimedBy","==",this._user.uid))}createQueueCountQuery(e,t){return(0,d.IO)(e,(0,d.Xo)("updatedAt","desc"),(0,d.ar)("claimedBy","==",null),(0,d.ar)("lastSenderType","in",["customer","queueableTrigger"]),(0,d.ar)("lastMessage.isFree","==",!1))}async dispatch(e,t){this[e]&&await this[e](t)}async updateMessage(e){const t=(0,d.JU)(this._chatsCollectionRef,e.chatId),i=(0,d.hJ)(t,"messages"),a=(0,d.JU)(i,e.messageId),s=JSON.parse(e.abuseModificationData);s["modified_by"]=this._user.uid,await(0,d.r7)(a,{abuse_modification_data:JSON.stringify(s)});const n=await this.getChatReferenceFromLastMessageId(e.messageId);n&&await(0,d.r7)(n,{"lastMessage.abuse_modification_data":JSON.stringify(s)})}async deleteMessage(e){const t=(0,d.JU)(this._chatsCollectionRef,e.chatId),i=(0,d.hJ)(t,"messages"),a=(0,d.JU)(i,e.chatId);await(0,d.oe)(a)}async deleteMessages(e){const t=m()(e,250);for(const i of t){const e=(0,d.ad)(this._project),t=(0,d.qs)(e);for(const a of i){const e=(0,d.JU)(this._chatsCollectionRef,a.chatId),i=(0,d.hJ)(e,"messages"),s=(0,d.JU)(i,a.messageId);t.delete(s);const n=await this.getChatReferenceFromLastMessageId(a.messageId);n&&t.update(n,{"lastMessage.content":""})}t.commit()}}async getChatReferenceFromLastMessageId(e){const t=(0,d.IO)(this._chatsCollectionRef,(0,d.ar)("lastMessage.id","==",e),(0,d.b9)(1)),i=await(0,d.PL)(t);if(!i.empty)return i.docs[0].ref}waitForClaim({chatId:e}){const t=(0,d.JU)(this._chatsCollectionRef,e),i=(0,d.cf)(t,(e=>{const t=e.data().claimedBy;t&&((0,b.a)().waitingForClaim=!1,t!==this._user.uid&&(0,f.G)().addNotification({message:"The chat was claimed by another operator",type:c.j_.Warning}),i())}))}enableListeners(){this.enableClaimedChatListener(),this.initialized||(this.initialized=!0,p.Z.hasRole(c.G7.Admin)&&this.enableUnclaimedChatListener())}enableClaimedChatListener(){this._claimedUnsubscribeFunction?.(),this._claimedUnsubscribeFunction=(0,d.cf)(this.createClaimedChatQuery(this._chatsCollectionRef),this.constructChangeHandler((0,b.a)().updateClaimedChat))}disableClaimedChatListener(){this._claimedUnsubscribeFunction?.()}async enableUnclaimedChatListener(){(0,b.a)().isLoadingUnclaimedChats=!0,this._unclaimedUnsubscribeFunction?.(),(0,b.a)().unclaimedChats=[],this._unclaimedUnsubscribeFunction=(0,d.cf)(this.createUnclaimedChatQuery(this._chatsCollectionRef),this.constructChangeHandler((0,b.a)().updateUnlaimedChat)),setTimeout((()=>{(0,b.a)().isLoadingUnclaimedChats=!1}),1e3)}async enableQueueCountListener(){(0,y.y)().isLoadingAllChatDocuments=!0,this._queueUnsubscribeFunction?.(),this._queueUnsubscribeFunction=(0,d.cf)(this.createQueueCountQuery(this._chatsCollectionRef,c.kB.NSFW),this.constructChangeHandler((0,y.y)().updateQueueCount)),setTimeout((()=>{(0,y.y)().isLoadingAllChatDocuments=!1}),3e3)}disableAllListeners(){this._unclaimedUnsubscribeFunction?.(),this._queueUnsubscribeFunction?.(),this.initialized=!1}constructChangeHandler(e){return t=>{t.docChanges().forEach((t=>{const i=(0,u.IH)(...this._chatProperties),a={id:t.doc.id,locale:this._locale,...i(t.doc.data())};e(a,t.type)}))}}}i(82801),i(61295),i(57658);var C=i(21056),_=i(85694),k=i(27484),w=i.n(k),P=i(7124),A=i.n(P),M=i(63723),T=i(814),S=i(8201),I=i(19789);w().extend(A());class x{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_pokesCollectionRef",void 0),(0,a.Z)(this,"_pokeUnsubscribeFunction",void 0),(0,a.Z)(this,"_pokeProperties",["agent","company","createdAt","domain","domains","filters","message","profile","scheduled","targets","origin","strategy","locale","type","tenant"]),this._user=e,this._project=t,this._locale=i,this._pokesCollectionRef=new g(this._project,this._locale).getPokesCollectionRef()}createPokeQuery(e,t){return(0,d.IO)(e,(0,d.Xo)("scheduled","desc"),(0,d.ar)("scheduled",">",t.dateRange.start),(0,d.ar)("scheduled","<",t.dateRange.end))}async dispatch(e,t){return await(this[e]?.(t))}enableListeners(e){this.disableAllListeners(),this._pokeUnsubscribeFunction=(0,d.cf)(this.createPokeQuery(this._pokesCollectionRef,e),this.constructChangeHandler())}disableAllListeners(){(0,M.r)().pokes=[],(0,M.r)().clearScheduledProfiles(),this._pokeUnsubscribeFunction&&this._pokeUnsubscribeFunction()}async getPokesByScheduled(e){const t=d.EK.fromDate(e.scheduled.toDate()),i=m()(e.domains,10),a=await Promise.all(i.map((async e=>{const i=await(0,d.PL)((0,d.IO)(this._pokesCollectionRef,(0,d.ar)("domains","array-contains-any",e),(0,d.ar)("scheduled","==",t),(0,d.b9)(1)));if(!i.empty)return{...i.docs[0].data(),id:i.docs[0].id}})));return a.filter(Boolean)}async getFollowUpPokes(e){const t=await(0,d.PL)((0,d.IO)(this._pokesCollectionRef,(0,d.ar)("strategy","==",C.KZ),(0,d.ar)("followUp.parentId","==",e)));if(t.empty)return[];const i=t.docs.map((e=>{const t={...e.data()},i=w()(t.scheduled.toDate()).tz(t.profile?.timezone||"UTC");return{pokeId:t.id,poke:{type:"poke",content:t.message.content,messageLength:t.message.messageLength,attachment:t.message.attachment||null,hasAttachment:!!t.message.attachment,attachmentFilenameForLegacy:t.message.attachmentFilenameForLegacy||null,scheduledDateTime:i},order:t.followUp.index,isOpen:!0,isValid:!0,key:t.followUp.index,minDateTime:w()(),originalDateTime:i,titleDateTime:i.format("HH:mm ddd, MMM D, YYYY")}}));return i.sort(((e,t)=>e.order>t.order?1:-1))}async savePoke(e){const t={...e};t.id&&(delete t.createdAt,t.updatedAt=d.EK.now(),t.updatedBy=t.agent??null,delete t.agent);const i=t.id?(0,d.JU)(this._pokesCollectionRef,t.id):(0,d.JU)(this._pokesCollectionRef);return t.id=i.id,t.message.attachment=(0,_.Pb)(t.message.attachment),await(0,d.pl)(i,t,{merge:!0}),t.id}async addDomainToPoke({poke:e,domainName:t}){const i=(0,d.JU)(this._pokesCollectionRef,e.id),a=await(0,d.QT)(i),s=a.data(),n=Array.from(new Set([...e.domains,t])),o=(0,S.xh)(e.filters),r=(0,I.X)(structuredClone(o));await(0,T.O)().getCustomerCounts({origin:e.origin.type,domains:n,filters:r,profile:e.profile,locale:e.locale});const l=(0,T.O)().targetsPerDomain.find((e=>e.site===t))?.estimate||0,u={estimate:l,reached:0,site:t},h=s.targets.targetsPerDomain.reduce(((e,t)=>e+t.estimate),0)+l,m={estimate:h,targetsPerDomain:[...s.targets.targetsPerDomain,u]};try{await(0,d.pl)(i,{domains:n,targets:m},{merge:!0});const e=await(0,d.QT)(i);(0,M.r)().updateDailyPoke({id:e.id,...e.data()}),(0,f.G)().addNotification({message:`Added domain "${t}" to poke ${e.id}`,type:c.j_.Success})}catch(g){(0,f.G)().addNotification({message:`Can't add domain "${t}". Error: ${g}`,type:c.j_.Error})}}async convertPokeToRecurring({poke:e,frequency:t,scheduledDateTime:i,lastLogin:a}){const s=(0,d.JU)(this._pokesCollectionRef,e.id),n=await(0,d.QT)(s),o=n.data(),r={...o,agent:{id:this._user.uid,name:this._user.displayName},frequency:t,strategy:C.vG,scheduled:d.EK.fromDate(i.toDate()),filters:{...o.filters,lastLogin:a}};delete r.id;try{const t=await this.savePoke(r),a=(0,d.JU)(this._pokesCollectionRef,t),s=await(0,d.QT)(a),n=(0,u.IH)(...this._pokeProperties);i.isToday()&&(0,M.r)().addDailyPoke({id:s.id,...n(s.data())}),(0,f.G)().addNotification({message:`Created recurring poke "${t}" based on the original poke "${e.id}"`,type:c.j_.Success})}catch(l){(0,f.G)().addNotification({message:`Can't create recurring poke. Error: ${l}`,type:c.j_.Error})}}async loadPoke(e){const t=await(0,d.QT)((0,d.JU)(this._pokesCollectionRef,e));if(!t.exists())throw new Error(`Poke document with id ${e} not found`);return{id:t.id,...t.data()}}deletePoke(e){(0,d.oe)((0,d.JU)(this._pokesCollectionRef,e))}async getDailyPokes(e){(0,M.r)().dailyPokes=[];const t=this.createDailyPokeQuery(e),i=await(0,d.PL)(t);for(const a of i.docs)(0,M.r)().dailyPokes.push({id:a.id,...a.data()})}createDailyPokeQuery(e){let t=(0,d.IO)(this._pokesCollectionRef);e.operatorId&&(t=(0,d.IO)(t,(0,d.ar)("agent.id","==",e.operatorId))),e.operatorName&&(t=(0,d.IO)(t,(0,d.ar)("agent.name","==",e.operatorName)));const i=e.date?w()(e.date):w()(),a=i.startOf("day"),s=i.endOf("day");return t=(0,d.IO)(t,(0,d.ar)("scheduled",">=",a.toDate()),(0,d.ar)("scheduled","<=",s.toDate())),t}constructChangeHandler(){return e=>{e.docChanges().forEach((e=>{const t=(0,u.IH)(...this._pokeProperties),i={id:e.doc.id,...t(e.doc.data())};switch(e.type){case"added":(0,M.r)().addPoke(i);break;case"modified":(0,M.r)().updatePoke(i);break;case"removed":(0,M.r)().removePoke(i);break;default:break}}))}}async hasSentPokesByProfileId({domains:e,profileUuid:t,days:i}){const a=w()().subtract(i,"day").startOf("date").toDate(),s=m()(e,10);await Promise.all(s.map((async e=>{const i=await(0,d.PL)((0,d.IO)(this._pokesCollectionRef,(0,d.ar)("domains","array-contains-any",e),(0,d.ar)("profile.uuid","==",t),(0,d.ar)("scheduled",">=",a),(0,d.ar)("scheduled","<=",d.EK.now()),(0,d.b9)(1)));if(i.empty)return;const s={...i.docs[0].data(),id:i.docs[0].id};(0,M.r)().addPastScheduledPoke(s)})))}async hasScheduledPokeByProfileId({domains:e,profileUuid:t}){const i=m()(e,10);await Promise.all(i.map((async e=>{const i=await(0,d.PL)((0,d.IO)(this._pokesCollectionRef,(0,d.ar)("domains","array-contains-any",e),(0,d.ar)("profile.uuid","==",t),(0,d.ar)("scheduled",">",d.EK.now()),(0,d.b9)(1)));if(i.empty)return;const a={...i.docs[0].data(),id:i.docs[0].id};(0,M.r)().addFutureScheduledPoke(a)})))}}function E(e,t){const i={...t,id:e},a=t.abuse_modification_data&&JSON.parse(t.abuse_modification_data),s=null!=a?.modified_content||null!=a?.modified_attachment,n=s?a.modified_content:t.maskedContent??t.content,o=s?a.modified_attachment:t.attachment;return{...i,content:n,attachment:o}}const L=15;class R{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),this._user=e,this._project=t,this._locale=i,this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef()}async dispatch(e,t){if(this[e])return this[e](t)}createMessageRef(e){const t=(0,d.JU)(this._chatsCollectionRef,e);return(0,d.IO)((0,d.hJ)(t,"messages"),(0,d.Xo)("createdAt","desc"))}async getMessages({chatId:e}){const t=(0,d.IO)(this.createMessageRef(e),(0,d.b9)(L)),i=await(0,d.PL)(t);i.docs.forEach((e=>{const t=E(e.id,e.data());(0,y.y)().pushChatMessage(t)}))}async getNextMessages({chatId:e,lastMessage:t}){const i=(0,d.IO)(this.createMessageRef(e),(0,d.TQ)(t.createdAt),(0,d.b9)(L)),a=await(0,d.PL)(i);a.docs.forEach((e=>{const t=E(e.id,e.data());(0,y.y)().pushChatMessage(t)})),(0,b.a)().hasBeginningMessage=a.docs.length<L}async getSingleChat(e){const t=await(0,d.QT)((0,d.JU)(this._chatsCollectionRef,e));t.exists()&&((0,y.y)().activeChat={...t.data(),id:e})}async getLatestNormalChats(e){try{let t=(0,d.IO)(this._chatsCollectionRef,(0,d.Xo)("lastMessage.createdAt","desc"),(0,d.ar)("lastMessage.type","==","normal"));e.selectedDomains.length>0&&(t=(0,d.IO)(t,(0,d.ar)("domain","in",e.selectedDomains))),t=(0,d.IO)(t,(0,d.b9)(e.maxAmountOfChats));const i=await(0,d.PL)(t);return i.empty?[]:i.docs.map((e=>{const t={id:e.id,...e.data()};return t.lastMessage=E(t.lastMessage.id,t.lastMessage),t}))}catch(t){return(0,f.G)().addNotification({message:t.toString(),type:c.j_.Error}),[]}}}var F=i(25282);class O{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),(0,a.Z)(this,"_abuseMessagesCollectionGroup",void 0),(0,a.Z)(this,"_abuseMessagesUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),this._user=e,this._project=t,this._locale=i;const s=(0,d.ad)(this._project);this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef(),this._abuseMessagesCollectionGroup=(0,d.IO)((0,d.B$)(s,"flagged_messages"),(0,d.ar)("locale","==",this._locale))}createAbuseMessagesQuery(e){return(0,d.IO)(e,(0,d.ar)("abuse.status","in",[C.Xy,C.C$]))}enableListeners(){this.initialized||(this.initialized=!0,this._abuseMessagesUnsubscribeFunction=(0,d.cf)(this.createAbuseMessagesQuery(this._abuseMessagesCollectionGroup),this.constructChangeHandler()))}async dispatch(e,t){this[e]?.(t)}async markAsAbuse({abuseMessage:e,operatorId:t}){await(0,d.r7)(this.getAbuseMessageRef(e.chat.id,e.message.id),{"abuse.status":C.Cu,"abuse.checkedAt":new Date,"abuse.checkedBy":t,"abuse.claimedBy":null})}async markAsSafe({abuseMessage:e,operatorId:t}){await(0,d.r7)(this.getAbuseMessageRef(e.chat.id,e.message.id),{"abuse.status":C.pB,"abuse.checkedAt":new Date,"abuse.checkedBy":t,"abuse.claimedBy":null})}async claim({abuseMessage:e,operatorId:t}){await(0,d.r7)(this.getAbuseMessageRef(e.chat.id,e.message.id),{"abuse.status":C.Xy,"abuse.claimedBy":t,"abuse.claimedAt":new Date})}async unclaim({abuseMessage:e}){await(0,d.r7)(this.getAbuseMessageRef(e.chat.id,e.message.id),{"abuse.status":C.Xy,"abuse.claimedBy":null,"abuse.claimedAt":null})}disableAllListeners(){this._abuseMessagesUnsubscribeFunction&&this._abuseMessagesUnsubscribeFunction()}constructChangeHandler(){return e=>{e.docChanges().forEach((async e=>{const t={id:e.doc.id,...e.doc.data()},i=await this.getChatDocument(e.doc.ref.parent.parent.id);if(!i)return;i.id=e.doc.ref.parent.parent.id;const a={message:t,chat:i};switch(e.type){case"removed":(0,F.C)().removeAbuseMessage(a);break;case"added":(0,F.C)().addAbuseMessage(a);break;case"modified":(0,F.C)().updateAbuseMessage(a);break}}))}}async getChatDocument(e){const t=await(0,d.QT)((0,d.JU)(this._chatsCollectionRef,e));return t.data()}getAbuseMessageRef(e,t){const i=(0,d.JU)(this._chatsCollectionRef,e),a=(0,d.hJ)(i,"flagged_messages");return(0,d.JU)(a,t)}}class D{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_pokesCollectionRef",void 0),(0,a.Z)(this,"_abusePokesCollection",void 0),(0,a.Z)(this,"_abuseMessagesUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),this._user=e,this._project=t,this._locale=i;const s=(0,d.ad)(this._project);this._pokesCollectionRef=new g(this._project,this._locale).getPokesCollectionRef();const n=(0,d.hJ)(s,"geos"),o=(0,d.JU)(n,i);this._abusePokesCollection=(0,d.hJ)(o,"pokes")}createAbusePokesQuery(e){return(0,d.IO)(e,(0,d.ar)("abuse.status","in",[C.Xy,C.C$]))}enableListeners(){this.initialized||(this.initialized=!0,this._abuseMessagesUnsubscribeFunction=(0,d.cf)(this.createAbusePokesQuery(this._abusePokesCollection),this.constructChangeHandler()))}async dispatch(e,t){this[e]?.(t)}async markAsAbuse({abusePoke:e,operatorId:t}){const i=(0,d.JU)(this._pokesCollectionRef,e.id);await(0,d.r7)(i,{"abuse.status":C.Cu,"abuse.checkedAt":new Date,"abuse.checkedBy":t,"abuse.claimedBy":null})}async markAsSafe({abusePoke:e,operatorId:t}){const i=(0,d.JU)(this._pokesCollectionRef,e.id);await(0,d.r7)(i,{"abuse.status":C.pB,"abuse.checkedAt":new Date,"abuse.checkedBy":t,"abuse.claimedBy":null})}async claim({abusePoke:e,operatorId:t}){const i=(0,d.JU)(this._pokesCollectionRef,e.id);await(0,d.r7)(i,{"abuse.status":C.Xy,"abuse.claimedBy":t,"abuse.claimedAt":new Date})}async unclaim({abusePoke:e}){const t=(0,d.JU)(this._pokesCollectionRef,e.id);await(0,d.r7)(t,{"abuse.status":C.Xy,"abuse.claimedBy":null,"abuse.claimedAt":null})}disableAllListeners(){this._abuseMessagesUnsubscribeFunction&&this._abuseMessagesUnsubscribeFunction()}constructChangeHandler(){return e=>{e.docChanges().forEach((async e=>{const t={id:e.doc.id,...e.doc.data()};switch(e.type){case"removed":(0,F.C)().removeAbusePoke(t);break;case"added":(0,F.C)().addAbusePoke(t);break;case"modified":(0,F.C)().updateAbusePoke(t);break}}))}}}var N=i(27361),Z=i.n(N);class U{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),(0,a.Z)(this,"_abuseHistoryCollectionGroup",void 0),(0,a.Z)(this,"_abuseHistoryUnsubscribeFunction",void 0),this._user=e,this._project=t,this._locale=i;const s=(0,d.ad)(this._project);this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef(),this._abuseHistoryCollectionGroup=(0,d.IO)((0,d.B$)(s,"flagged_messages"),(0,d.ar)("locale","==",this._locale),(0,d.ar)("abuse.status","in",[C.pB,C.Cu]))}setVisibleDocuments(e){const t=e.docs[0],i=e.docs[e.docs.length-1];(0,F.C)().firstAbuseHistoryMessage=t.data(),(0,F.C)().lastAbuseHistoryMessage=i.data()}flaggedMessagesByChatQuery(e){const t=(0,d.JU)(this._chatsCollectionRef,e);return(0,d.IO)((0,d.hJ)(t,"flagged_messages"),(0,d.ar)("locale","==",this._locale),(0,d.ar)("abuse.status","in",[C.pB,C.Cu]))}createAbuseHistoryMessagesQuery(e){let t=this._abuseHistoryCollectionGroup;e.chatId&&(t=this.flaggedMessagesByChatQuery(e.chatId)),e.operatorId&&(t=(0,d.IO)(t,(0,d.ar)("senderId","==",e.operatorId))),e.operatorName&&(t=(0,d.IO)(t,(0,d.ar)("senderName","==",e.operatorName)));const i=e.sortBy||"abuse.checkedAt",a=e.sortDesc?"desc":"asc";t=(0,d.IO)(t,(0,d.Xo)(i,a));const s=10;return e.direction||(t=(0,d.IO)(t,(0,d.b9)(s))),"next"===e.direction&&(t=(0,d.IO)(t,(0,d.TQ)(Z()((0,F.C)().lastAbuseHistoryMessage,i))),t=(0,d.IO)(t,(0,d.b9)(s))),"previous"===e.direction&&(t=(0,d.IO)(t,(0,d.Lx)(Z()((0,F.C)().firstAbuseHistoryMessage,i))),t=(0,d.IO)(t,(0,d.vh)(s))),t}async dispatch(e,t){this[e](t)}disableAllListeners(){this._abuseHistoryUnsubscribeFunction&&this._abuseHistoryUnsubscribeFunction()}async getAbuseMessages(e){try{const t=await(0,d.PL)(this.createAbuseHistoryMessagesQuery(e));if(t.empty)return void((0,F.C)().abuseHistoryMessages=[]);this.setVisibleDocuments(t);const i=await Promise.all(t.docs.map((async e=>{const t={id:e.id,...e.data()},i=await this.getChatDocument(e.ref.parent.parent.id);if(!i)return{message:t};i.id=e.ref.parent.parent.id;const a={message:t,chat:i};return a})));(0,F.C)().abuseHistoryMessages=i}catch(t){(0,f.G)().addNotification({message:t,type:c.j_.Error})}}async getChatDocument(e){const t=(0,d.JU)(this._chatsCollectionRef,e),i=await(0,d.QT)(t);return i.data()}}class G{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),this._user=e,this._project=t,this._locale=i,this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef()}async dispatch(e,t){await(this[e]?.(t))}async getLogs(e){const t=await(0,d.PL)(this.logsRef(e));if(t.empty)return void(0,b.a)().resetCurrentLogs();const i=await Promise.all(t.docs.map((e=>{const t={...e.data(),id:e.id};return t})));(0,b.a)().resetCurrentLogs(),i.forEach((e=>{(0,b.a)().setLog(e)}))}async saveLog({chatId:e,log:t}){const i={...t,locale:this._locale,content:{group:t.content.group||"other",groupValue:t.content.groupValue||null,value:t.content.value||null}};if(t.id)await(0,d.pl)((0,d.JU)(this.logsRef(e),t.id),{...i,updatedAt:d.EK.now(),updatedBy:this._user.uid},{merge:!0}),await(0,d.QT)((0,d.JU)(this.logsRef(e),t.id)),this.getLogs(e);else{delete i.id;const t=await(0,d.ET)(this.logsRef(e),{...i,createdBy:this._user.uid,createdByName:this._user.displayName,createdAt:d.EK.now()}),a=await(0,d.QT)(t),s={id:a.id,...a.data()};(0,b.a)().setLog(s)}}async removeLog({chatId:e,id:t}){const i=(0,d.JU)(this.logsRef(e),t);await(0,d.oe)(i),this.getLogs(e)}logsRef(e){return(0,d.hJ)((0,d.JU)(this._chatsCollectionRef,e),"logs")}}const B=10;class j{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_chatsCollectionRef",void 0),(0,a.Z)(this,"_messageUnsubscribeFunction",void 0),(0,a.Z)(this,"_suggestionsUnsubscribeFunction",void 0),(0,a.Z)(this,"_messageProperties",["id","previousMessage","content","type","senderType","senderId","createdAt","deletedAt","attachment","imported"]),(0,a.Z)(this,"_suggestionProperties",["messageId","suggestion","wantedImage","createdAt","imageTags"]),(0,a.Z)(this,"takeMessageProperties",(0,u.IH)(...this._messageProperties)),this._user=e,this._project=t,this._locale=i,this._chatsCollectionRef=new g(this._project,this._locale).getChatsCollectionRef()}async dispatch(e,t){await(this[e]?.(t))}enableListeners({chatId:e}){this._messageUnsubscribeFunction?.(),(0,b.a)().currentMessages=[],this._messageUnsubscribeFunction=(0,d.cf)((0,d.IO)(this.createMessageRef(e),(0,d.b9)(1)),this.constructMessageChangeHandler())}enableSuggestionsListener({chatId:e}){this.disableSuggestionsListener(),(0,b.a)().suggestions=[],this._suggestionsUnsubscribeFunction=(0,d.cf)(this.createSuggestionQuery(e),this.constructSuggestionChangeHandler())}disableSuggestionsListener(){this._suggestionsUnsubscribeFunction?.(),(0,b.a)().suggestions=[]}async getNewMessages({chatId:e,lastMessage:t}){if(!t.createdAt)return;const i=(0,d.IO)(this.createMessageRef(e),(0,d.TQ)(t.createdAt),(0,d.b9)(B)),a=await(0,d.PL)(i);a.docs.forEach((e=>{const t=e.data(),i=E(e.id,t),a={...this.takeMessageProperties(i)};(0,b.a)().modifyMessage(a)})),(0,b.a)().hasBeginningMessage=a.docs.length<B}disableAllListeners(){this.disableSuggestionsListener(),this._messageUnsubscribeFunction?.(),(0,b.a)().currentMessages=[]}onlyDisableAllListeners(){this._messageUnsubscribeFunction?.()}createMessageRef(e){const t=(0,d.JU)(this._chatsCollectionRef,e);return(0,d.IO)((0,d.hJ)(t,"messages"),(0,d.Xo)("createdAt","desc"))}createSuggestionQuery(e){return(0,d.hJ)((0,d.JU)(this._chatsCollectionRef,e),"suggestions")}constructMessageChangeHandler(){return e=>{e.docChanges().forEach((e=>{const t=e.doc.data(),i=E(e.doc.id,t),a={...this.takeMessageProperties(i)};switch(e.type){case"added":(0,b.a)().addMessage(a);break;case"modified":(0,b.a)().modifyMessage(a);break;case"removed":!e.doc.exists()&&(0,b.a)().removeMessage(a);break;default:break}}))}}constructSuggestionChangeHandler(){return e=>{e.docChanges().forEach((e=>{const t=(0,u.IH)(...this._suggestionProperties),i={id:e.doc.id,locale:this._locale,...t(e.doc.data())};switch(i.suggestion=(0,u.Yw)(i.suggestion),e.type){case"added":(0,b.a)().addSuggestion(i);break;case"modified":(0,b.a)().updateSuggestion(i);break;case"removed":(0,b.a)().removeSuggestion(i);break;default:break}}))}}async delete({chatId:e,id:t,user:i,reason:a}){const s=(0,d.JU)(this._chatsCollectionRef,e),n=await(0,d.QT)(s),o="This message has been deleted",r=d.EK.now(),l={by:i.uid,reason:a};n.exists()&&n.data().lastMessage.id===t&&await(0,d.r7)(s,{"lastMessage.content":o,"lastMessage.deletedAt":r,"lastMessage.deleted":l});const c=(0,d.hJ)((0,d.JU)(this._chatsCollectionRef,e),"messages");await(0,d.r7)((0,d.JU)(c,t),{content:"This message has been deleted",deletedAt:d.EK.now(),deleted:l})}}var q=i(94677),$=i(78397);class H{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_announcementsTopicsCollection",void 0),(0,a.Z)(this,"_announcementsCollectionGroup",void 0),(0,a.Z)(this,"_announcementsUnsubscribeFunction",void 0),(0,a.Z)(this,"_announcementsTopicsUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),this._user=e,this._project=t,this._locale=i;const s=(0,d.ad)(this._project);this._announcementsTopicsCollection=new g(this._project,this._locale).getAnnouncementsTopicsCollectionRef(),this._announcementsCollectionGroup=(0,d.IO)((0,d.B$)(s,"announcements"),(0,d.ar)("locale","==",this._locale),(0,d.Xo)("updatedAt","asc"))}enableListeners(){this.initialized||(this.initialized=!0,(0,$.a)().announcementsPerLocale={},(0,$.a)().announcementsTopics={},this._announcementsUnsubscribeFunction=(0,d.cf)(this._announcementsCollectionGroup,this.constructChangeHandler("announcement",(0,$.a)().setAnnouncement,(0,$.a)().removeAnnouncement)),this._announcementsTopicsUnsubscribeFunction=(0,d.cf)(this._announcementsTopicsCollection,this.constructChangeHandler("topic",(0,$.a)().setAnnouncementTopic,(0,$.a)().removeAnnouncementTopic)))}async dispatch(e,t){await(this[e]?.(t))}async updateAnnouncementsTopic(e){const t=(0,d.JU)(this._announcementsTopicsCollection,e.id);await(0,d.pl)(t,{title:e.title,emoji:e.emoji},{merge:!0})}async updateAnnouncement({topicId:e,id:t,message:i}){const a=(0,d.JU)(this._announcementsTopicsCollection,`${e}/announcements/${t}`);await(0,d.pl)(a,{message:i,updatedAt:d.EK.now(),updatedBy:(0,q.m)().user.uid},{merge:!0})}async removeAnnouncementsTopic(e){const t=(0,d.JU)(this._announcementsTopicsCollection,e),i=(0,d.hJ)(t,"announcements"),a=await(0,d.PL)(i);a.forEach((async t=>{await this.removeAnnouncement({topicId:e,id:t.id})}));const s=(0,d.JU)(this._announcementsTopicsCollection,e);return await(0,d.oe)(s)}async removeAnnouncement({topicId:e,id:t}){const i=(0,d.JU)(this._announcementsTopicsCollection,`${e}/announcements/${t}`);return await(0,d.oe)(i)}async newAnnouncementsTopic({title:e,emoji:t}){await(0,d.ET)(this._announcementsTopicsCollection,{title:e,emoji:t,locale:this._locale})}async newAnnouncement({topicId:e,message:t}){const i=(0,d.JU)(this._announcementsTopicsCollection,e),a=(0,d.hJ)(i,"announcements");await(0,d.ET)(a,{locale:this._locale,message:t,createdBy:this._user.uid,createdAt:d.EK.now(),updatedBy:this._user.uid,updatedAt:d.EK.now()})}disableAllListeners(){this._announcementsUnsubscribeFunction?.(),this._announcementsTopicsUnsubscribeFunction?.(),this.initialized=!1}constructChangeHandler(e,t,i){return a=>{a.docChanges().forEach((a=>{const s={locale:this._locale,..."announcement"===e?{topicId:a.doc.ref.path.split("/")[3]}:{},id:a.doc.id,...a.doc.data()};"removed"===a.type?i(s):t(s)}))}}async getAnnouncements(){const e=await(0,d.PL)(this._announcementsTopicsCollection),t=await(0,d.PL)(this._announcementsCollectionGroup);if(0===e.size)return(0,$.a)().cleanAnnouncementsByLocale(this._locale),void(0,$.a)().cleanAnnouncementsTopicsByLocale(this._locale);e.forEach((e=>{(0,$.a)().setAnnouncementTopic({locale:this._locale,id:e.id,...e.data()})})),t.forEach((e=>{(0,$.a)().setAnnouncement({locale:this._locale,topicId:e.ref.path.split("/")[3],id:e.id,...e.data()})}))}}var z=i(48541);class W{constructor(e,t,i){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_locale",void 0),(0,a.Z)(this,"_reportedMessagesCollectionRef",void 0),(0,a.Z)(this,"_reportedMessagesUnsubscribeFunction",void 0),this._user=e,this._project=t,this._locale=i;const s=(0,d.ad)(this._project),n=(0,d.hJ)(s,"geos"),o=(0,d.JU)(n,i);this._reportedMessagesCollectionRef=(0,d.hJ)(o,"reported_messages")}setVisibleDocuments(e){const t=e.docs[0],i=e.docs[e.docs.length-1];(0,z.p)().firstReportedMessageId=t.id,(0,z.p)().lastReportedMessageId=i.id}async createReportedMessagesQuery(e){let t=this._reportedMessagesCollectionRef;const i=e.sortBy||"report.reportedAt",a=e.sortDesc?"desc":"asc";t=(0,d.IO)(t,(0,d.Xo)(i,a));const s=10;if(e.direction||(t=(0,d.IO)(t,(0,d.b9)(s))),"next"===e.direction){const e=(0,d.JU)(this._reportedMessagesCollectionRef,(0,z.p)().lastReportedMessageId),i=await(0,d.QT)(e);t=(0,d.IO)(t,(0,d.TQ)(i)),t=(0,d.IO)(t,(0,d.b9)(s))}if("previous"===e.direction){const e=await(0,d.QT)((0,d.JU)(this._reportedMessagesCollectionRef,(0,z.p)().firstReportedMessageId));t=(0,d.IO)(t,(0,d.Lx)(e)),t=(0,d.IO)(t,(0,d.vh)(s))}return e.category&&(t=(0,d.IO)(t,(0,d.ar)("report.category","==",e.category))),t}async dispatch(e,t){this[e](t)}disableAllListeners(){this._reportedMessagesUnsubscribeFunction?.()}async getReportedMessage(e){const t=(0,d.JU)(this._reportedMessagesCollectionRef,e),i=await(0,d.QT)(t);if(!i.exists())return void((0,z.p)().currentReportedMessage=null);const a={id:i.id,...i.data()};(0,z.p)().currentReportedMessage=a}async getReportedMessages(e){try{const t=await(0,d.PL)(await this.createReportedMessagesQuery(e));if(t.empty)return void((0,z.p)().reportedMessages=[]);this.setVisibleDocuments(t);const i=await Promise.all(t.docs.map((async e=>{const t={id:e.id,...e.data()};return t})));(0,z.p)().reportedMessages=i}catch(t){(0,f.G)().addNotification({message:t,type:c.j_.Error})}}async setProcessedStatus({id:e,isProcessed:t}){const i=(0,d.JU)(this._reportedMessagesCollectionRef,e);await(0,d.r7)(i,{"report.processed":t});const a=await(0,d.QT)((0,d.JU)(this._reportedMessagesCollectionRef,e));(0,z.p)().updateReportedMessage({id:a.id,...a.data()})}async createReportedMessage(e){await(0,d.ET)(this._reportedMessagesCollectionRef,{...e,locale:this._locale,report:{...e.report,processed:!1,reportedAt:d.EK.now(),reportedBy:(0,q.m)().user.uid}})}}var V=i(7710);class J{constructor({user:e,claims:t},i){(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_abuseWordsRef",void 0),(0,a.Z)(this,"_abuseWordsUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),(0,a.Z)(this,"locales",void 0),this._project=i,this._user=e,this.locales=t.geos,(new Date).getMilliseconds();const s=(0,d.ad)(this._project);this._abuseWordsRef=(0,d.hJ)(s,"abuse_words")}createAbuseWordsQuery(e){return null==e?this._abuseWordsRef:(0,d.IO)(this._abuseWordsRef,(0,d.ar)("locale","==",e))}enableListeners({locale:e}){this.initialized||(this.initialized=!0,(0,F.C)().words=[],this._abuseWordsUnsubscribeFunction=(0,d.cf)(this.createAbuseWordsQuery(e),this.constructChangeHandler()))}async dispatch(e,t){await(this[e]?.(t))}async removeAbuseWord({id:e}){const t=(0,d.ad)(this._project),i=(0,d.JU)(t,`abuse_words/${e}`);return await(0,d.oe)(i)}async getExistingDoc(e){const t=(0,d.IO)(this._abuseWordsRef,(0,d.ar)("value","==",e.value),(0,d.ar)("locale","in",["",...e.locale?[e.locale]:[]])),i=await(0,d.PL)(t);return i.docs[0]}async newAbuseWord(e){const t=await this.getExistingDoc(e);if(t?.exists()){const{locale:i}=t.data();throw new Error(`Word "${e.value}" already exists in "${i||V.I2}" abuse list.`)}return await(0,d.ET)(this._abuseWordsRef,e)}disableAllListeners(){this._abuseWordsUnsubscribeFunction?.(),this.initialized=!1}constructChangeHandler(){return e=>{e.docChanges().forEach((e=>{const t={id:e.doc.id,...e.doc.data()};switch(e.type){case"added":(0,F.C)().addAbuseWord(t);break;case"modified":(0,F.C)().updateAbuseWord(t);break;case"removed":(0,F.C)().removeAbuseWord(t);break;default:break}}))}}}class Q{constructor(e,t){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_usersRef",void 0),(0,a.Z)(this,"_userUnsubscribeFunction",void 0),(0,a.Z)(this,"initialized",!1),this._user=e,this._project=t;const i=(0,d.ad)(this._project);this._usersRef=(0,d.hJ)(i,"users")}createUserQuery(e){return(0,d.JU)(e,this._user.uid)}enableListeners(){this.initialized||(this.initialized=!0,this._userUnsubscribeFunction=(0,d.cf)(this.createUserQuery(this._usersRef),(e=>{if(!e.data())return;const{disabled:t}=e.data();t&&(0,q.m)().signOut()})))}async dispatch(e){return this[e]?.()}disableAllListeners(){this._userUnsubscribeFunction?.()}}var Y=i(95115),K=i(27722),X=i(54057);class ee{constructor(){(0,a.Z)(this,"_repositories",{chat:{},poke:{},abuseMessages:{},abusePokes:{},abuseHistory:{},announcements:{},log:{},message:{},reportedMessages:{},quality:{}}),(0,a.Z)(this,"regions",void 0),(0,a.Z)(this,"central",void 0),(0,a.Z)(this,"localeMapping",void 0),(0,a.Z)(this,"_rootRepositories",{abuseWords:{},systemNotification:{},user:{}})}teardown(){this.disableListeners("chat"),this.disableListeners("message"),this.disableListeners("log"),this.disableListeners("poke"),this.disableListeners("quality"),this.disableListeners("abuseMessages"),this.disableListeners("abusePokes"),this.disableListeners("abuseHistory"),this.disableListeners("announcements"),this.disableListeners("reportedMessages"),this._rootRepositories["user"].disableAllListeners?.(),this._rootRepositories["abuseWords"].disableAllListeners?.();const{regional:e}=(0,K.F)().variables;Object.keys(e||{}).map((async t=>{const i=e[t],a=(0,s.Mq)(i.projectId);(0,s.P2)(a)})),setTimeout((()=>{Object.keys(this._repositories).forEach((e=>this._repositories[e]={}))}),0)}async buildUp(e){await this.signInAllRegions(e);const{claims:t}=await e.getIdTokenResult(),i=t.geos;await this.fetchMapping(i),i.forEach((t=>{const i=(0,s.Mq)(this.localeMapping[t]),a=new v(e,i,t),n=new x(e,i,t),o=new R(e,i,t),r=new j(e,i,t),l=new G(e,i,t),c=new O(e,i,t),u=new D(e,i,t),d=new U(e,i,t),h=new H(e,i,t),m=new W(e,i,t);this._repositories["chat"][t]=a,this._repositories["poke"][t]=n,this._repositories["quality"][t]=o,this._repositories["abuseMessages"][t]=c,this._repositories["abusePokes"][t]=u,this._repositories["abuseHistory"][t]=d,this._repositories["announcements"][t]=h,this._repositories["message"][t]=r,this._repositories["log"][t]=l,this._repositories["reportedMessages"][t]=m})),this._rootRepositories["abuseWords"]=new J({user:e,claims:t},this.CentralFirebase),this._rootRepositories["systemNotification"]=new Y.m(e,this.CentralFirebase),this._rootRepositories["user"]=new Q(e,this.CentralFirebase),(0,K.F)().setConfigInitialized()}async signInAllRegions(e){const t=Object.values(this.regions).map((async t=>{const i=await this.createCustomToken(e,t.name);return this.signInAtFirebaseProject(i,t)}));await Promise.all(t)}async fetchMapping(e){const t="https://api.chathomebase.com",{data:i}=await X.Z.get(`${t}/firebase/projects/locales`,{params:{locales:e}});this.localeMapping=i}fetchRegions(){const{regional:e,central:t}=(0,K.F)().variables,i=(0,s.C6)().map((e=>e.name));this.regions=Object.entries(e).reduce(((e,[t,a])=>a.projectId?(i.includes(a.projectId)||(e[t]=(0,s.ZF)(a,a.projectId)),e):e),{}),this.central=i.includes("[DEFAULT]")?(0,s.Mq)("[DEFAULT]"):(0,s.ZF)(t,"[DEFAULT]")}async createCustomToken(e,t){const{token:i}=await e.getIdTokenResult(),a=`https://api.chathomebase.com/firebase/token/${t}`,s=await l().get(a,{headers:{Authorization:`Bearer ${i}`}});if(s?.data?.token)return s.data.token}async signInAtFirebaseProject(e,t){const i=(0,n.v0)(t);return(0,n._p)(i,e)}get CentralFirebase(){return this.central}get Auth(){return(0,n.v0)(this.central)}get Analytics(){return(0,o.IH)(this.central)}get AbuseWords(){return this._rootRepositories["abuseWords"]}get SystemNotification(){return this._rootRepositories["systemNotification"]}async init(){this.fetchRegions(),await new Promise(((e,t)=>{const i=(0,n.Aj)(this.Auth,(async t=>{if(i(),!t)return;const{claims:a}=await t.getIdTokenResult(),{companyName:s}=a;(0,o.Gb)()&&((0,o.Iv)(this.Analytics,t.uid),(0,o.xP)(this.Analytics,{company_name:s})),await this.buildUp(t),this._rootRepositories["user"].enableListeners(),e()}),t)}))}async dispatch(e,t,i,a){if("all"!==t&&"*"!==t){if(t&&this._repositories[e][t])return await this._repositories[e][t].dispatch(i,a)}else Object.entries(this._repositories[e]).forEach((([e,t])=>{t.dispatch(i,a)}))}enableListeners(e,t){this.enableListenersForRepos(Object.values(this._repositories[e]),t)}enableRootListener(e,t){this.enableListenersForRepos([this._rootRepositories[e]],t)}enableListenersForRepos(e,t){e.forEach((e=>{e.enableListeners(t)}))}disableListeners(e){this.disableListenersForRepos(Object.values(this._repositories[e]))}disableRootListener(e){this.disableListenersForRepos([this._rootRepositories[e]])}disableListenersForRepos(e){e.forEach((e=>{e.disableAllListeners?.()}))}}const te=new ee},95115:function(e,t,i){"use strict";i.d(t,{m:function(){return o}});var a=i(61369),s=i(36100),n=i(89393);class o{constructor(e,t){(0,a.Z)(this,"_user",void 0),(0,a.Z)(this,"_project",void 0),(0,a.Z)(this,"_systemNotificationsCollection",void 0),(0,a.Z)(this,"_systemNotificationsSortedQuery",void 0),this._user=e,this._project=t;const i=(0,s.ad)(this._project);this._systemNotificationsCollection=(0,s.hJ)(i,"system_notifications"),this._systemNotificationsSortedQuery=(0,s.IO)(this._systemNotificationsCollection,(0,s.Xo)("createdAt","desc"))}async dispatch(e,t){await(this[e]?.(t))}async getHistorySystemNotifications(){const e=20,t=(0,s.IO)(this._systemNotificationsSortedQuery,(0,s.b9)(e)),i=await(0,s.PL)(t);(0,n.m)().resetSystemNotifications(),i.empty||i.docs.forEach((e=>{const t={...e.data(),id:e.id};(0,n.m)().addSystemNotification(t)}))}async getCurrentSystemNotification(){const e=await(0,s.PL)(this.currentSystemNotificationQuery());if(e.empty)return void(0,n.m)().setCurrentSystemNotification(null);const t={...e.docs[0].data(),id:e.docs[0].id},i=e.docs[0].data().showUntilAt,a=!i||i?.toDate()>new Date;(0,n.m)().setCurrentSystemNotification(a?t:null)}async createSystemNotification(e){if(!this._user)return;const t=await(0,s.ET)(this._systemNotificationsCollection,{...e,createdBy:this._user.uid,createdAt:s.EK.now()}),i=await(0,s.QT)(t);return i}async disableCurrentNotification(){const e=await(0,s.PL)(this.currentSystemNotificationQuery());if(e.empty)return;const t=e.docs[0].data().showUntilAt,i=!t||t?.toDate()>new Date;i&&await(0,s.pl)((0,s.JU)(this._systemNotificationsCollection,e.docs[0].id),{showUntilAt:s.EK.now()},{merge:!0})}currentSystemNotificationQuery(){return(0,s.IO)(this._systemNotificationsSortedQuery,(0,s.b9)(1))}}},85694:function(e,t,i){"use strict";i.d(t,{aw:function(){return C},mx:function(){return p},Jx:function(){return k},a1:function(){return v},Pb:function(){return _},ez:function(){return w},Rt:function(){return y}});var a=i(9669),s=i.n(a),n=i(83977),o=i(74864),r=i(11499),l=i(21056);const c="https://api.chathomebase.com",u=s().create({baseURL:c});u.interceptors.request.use((async e=>{const t=(0,n.Mq)(),i=await((0,o.v0)(t).currentUser?.getIdToken());return e.headers.Authorization=`Bearer ${i}`,(0,r.n)(e),e}),(e=>Promise.reject(e)));class d{async getSignedAttachment(e){const t=await u.post("/url/sign",{url:e});if(!t.data)throw new Error("Can't get the attachment url for hash: "+e);return t.data.data}async getSignedAttachments(e){const t=await u.post("/url/sign-bulk",{urls:e,with_keys:!0});if(!t.data)throw new Error("Can't get attachments urls for hashes: "+e);return t.data.data}}var h=i(27722);const m=new d;function g(e){return e&&"object"===typeof e&&"displayUrl"in e}function p(e){return RegExp(l.x5).test(e)}function f(e,t){const{cdnBaseLiveUrl:i,tenantAlias:a,domain:s}=t;if(!i)throw new Error(`Oops! It seems like there's a problem with the configuration for the domain "${s}". Please make sure to set the CDN_BASE_LIVE_URL for this domain in your configuration.`);if(!a)throw new Error(`Missing tenantAlias for domain "${s}". Please set tenantAlias in the domain configuration.`);return`${i}/${a}/${e}.webp`}async function b(e){return await m.getSignedAttachment(e)}async function y(e,t){if(!e||!t)return"";if(!p(e))return e;const i=(0,h.F)().domainConfig(t),a=f(e,i);return await b(a)}function v(e){const t=e.match(l.wp)[0];return t}function C(e,t){if(!e||!t)return!1;const i=!!e.url&&e.url===t.url,a=!!e.cdnHash&&e.cdnHash===t.cdnHash;return i||a}function _(e){return e?"string"===typeof e?e:e.url||e.cdnHash||null:null}async function k(e,t){return e?g(e)?e:p(e)?{cdnHash:e,displayUrl:await y(e,t)}:{url:e,displayUrl:e}:null}async function w(e){const t=(0,n.Mq)(),i=await((0,o.v0)(t).currentUser?.getIdToken()),a={responseType:"blob",headers:{}};i&&(a.headers.Authorization=`Bearer ${i}`),(0,r.n)(a);const l=await s().get(e,a);return l.data}},15579:function(e,t,i){"use strict";function a(e){return"auth/wrong-password"===e?"The password is invalid or the user does not have a password.":"auth/claims-too-large"===e?"The claims payload provided to setCustomUserClaims() exceeds the maximum allowed size of 1000 bytes.":"auth/email-already-exists"===e?"The provided email is already in use by an existing user. Each user must have a unique email.":"auth/id-token-expired"===e?"The provided Firebase ID token is expired.":"auth/id-token-revoked"===e?"The Firebase ID token has been revoked.":"auth/insufficient-permission"===e?"The credential used to initialize the Admin SDK has insufficient permission to access the requested Authentication resource.":"auth/invalid-argument"===e?"An invalid argument was provided to an Authentication method.":"auth/invalid-claims"===e?"The custom claim attributes provided to setCustomUserClaims() are invalid.":"auth/invalid-creation-time"===e?"The creation time must be a valid UTC date string.":"auth/invalid-disabled-field"===e?"The provided value for the disabled user property is invalid. It must be a boolean.":"auth/invalid-display-name"===e?"The provided value for the displayName user property is invalid. It must be a non-empty string.":"auth/invalid-email-verified"===e?"The provided value for the emailVerified user property is invalid. It must be a boolean.":"auth/invalid-hash-algorithm"===e?"The hash algorithm must match one of the strings in the list of supported algorithms.":"auth/invalid-hash-block-size"===e?"The hash block size must be a valid number.":"auth/invalid-hash-derived-key-length"===e?"The hash derived key length must be a valid number.":"auth/invalid-hash-key"===e?"The hash key must a valid byte buffer.":"auth/invalid-hash-memory-cost"===e?"The hash memory cost must be a valid number.":"auth/invalid-hash-parallelization"===e?"The hash parallelization must be a valid number.":"auth/invalid-hash-rounds"===e?"The hash rounds must be a valid number.":"auth/invalid-hash-salt-separator"===e?"The hashing algorithm salt separator field must be a valid byte buffer.":"auth/invalid-id-token"===e?"The provided ID token is not a valid Firebase ID token.":"auth/invalid-last-sign-in-time"===e?"The last sign-in time must be a valid UTC date string.":"auth/invalid-page-token"===e?"The provided next page token in listUsers() is invalid. It must be a valid non-empty string.":"auth/invalid-password"===e?"The provided value for the password user property is invalid.":"auth/invalid-password-salt"===e?"The password salt must be a valid byte buffer":"auth/invalid-photo-url"===e?"The provided value for the photoURL user property is invalid. It must be a string URL.":"auth/invalid-provider-data"===e?"The providerData must be a valid array of UserInfo objects.":"auth/invalid-oauth-responsetype"===e?"Only exactly one OAuth responseType should be set to true.":"auth/invalid-session-cookie-duration"===e?"The session cookie duration must be a valid number in milliseconds between 5 minutes and 2 weeks.":"auth/invalid-uid"===e?"The provided uid must be a non-empty string with at most 128 characters.":"auth/invalid-user-import"===e?"The user record to import is invalid.":"auth/maximum-user-count-exceeded"===e?"The maximum allowed number of users to import has been exceeded.":"auth/missing-hash-algorithm"===e?"Importing users with password hashes requires that the hashing algorithm and its parameters be provided.":"auth/missing-uid"===e?"A uid identifier is required for the current operation.":"auth/missing-oauth-client-secret"===e?"The OAuth configuration client secret is required to enable OIDC code flow.":"auth/phone-number-already-exists"===e?"The provided phoneNumber is already in use by an existing user":"auth/project-not-found"===e?"No Firebase project was found for the credential used to initialize the Admin SDKs.":"auth/reserved-claims"===e?"One or more custom user claims provided to setCustomUserClaims() are reserved.":"auth/session-cookie-expired"===e?"The provided Firebase session cookie is expired.":"auth/session-cookie-revoked"===e?"The Firebase session cookie has been revoked.":"auth/uid-already-exists"===e?"The provided uid is already in use by an existing user. Each user must have a unique uid.":"auth/admin-restricted-operation"===e?"This operation is restricted to administrators only.":"auth/app-not-authorized"===e?"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key.":"auth/app-not-installed"===e?"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.":"auth/captcha-check-failed"===e?"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.":"auth/code-expired"===e?"The SMS code has expired. Please re-send the verification code to try again.":"auth/cordova-not-ready"===e?"Cordova framework is not ready.":"auth/cors-unsupported"===e?"This browser is not supported.":"auth/credential-already-in-use"===e?"This credential is already associated with a different user account.":"auth/custom-token-mismatch"===e?"The custom token corresponds to a different audience.":"auth/requires-recent-login"===e?"This operation is sensitive and requires recent authentication. Log in again before retrying this request.":"auth/dependent-sdk-initialized-before-auth"===e?"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized.":"auth/dynamic-link-not-activated"===e?"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.":"auth/email-change-needs-verification"===e?"Multi-factor users must always have a verified email.":"auth/email-already-in-use"===e?"The email address is already in use by another account.":"auth/emulator-config-failed"===e?"Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator.":"auth/expired-action-code"===e?"The action code has expired.":"auth/cancelled-popup-request"===e?"This operation has been cancelled due to another conflicting popup being opened.":"auth/internal-error"===e?"An internal AuthError has occurred.":"auth/invalid-app-credential"===e?"The phone verification request contains an invalid application verifier.":"auth/invalid-app-id"===e?"The mobile app identifier is not registered for the current project.":"auth/invalid-user-token"===e?"This user's credential isn't valid for this project.":"auth/invalid-auth-event"===e?"An internal AuthError has occurred.":"auth/invalid-verification-code"===e?"The verification code is incorrect. Please check and try again.":"auth/invalid-continue-uri"===e?"The continue URL provided in the request is invalid.":"auth/invalid-cordova-configuration"===e?"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.":"auth/invalid-custom-token"===e?"The custom token format is incorrect. Please check the documentation.":"auth/invalid-dynamic-link-domain"===e?"The provided dynamic link domain is not configured or authorized for the current project.":"auth/invalid-email"===e?"The email address is badly formatted.":"auth/invalid-emulator-scheme"===e?"Emulator URL must start with a valid scheme (http:// or https://).":"auth/invalid-api-key"===e?"Your API key is invalid, please check you have copied it correctly.":"auth/invalid-cert-hash"===e?"The SHA-1 certificate hash provided is invalid.":"auth/invalid-credential"===e?"The supplied auth credential is malformed or has expired.":"auth/invalid-message-payload"===e?"The email template corresponding to this action contains invalid characters in its message.":"auth/invalid-multi-factor-session"===e?"The request does not contain a valid proof of first factor successful sign-in.":"auth/invalid-oauth-provider"===e?"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.":"auth/invalid-oauth-client-id"===e?"The OAuth client ID provided is either invalid or does not match the specified API key.":"auth/unauthorized-domain"===e?"This domain is not authorized for OAuth operations for your Firebase project.":"auth/invalid-action-code"===e?"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.":"auth/invalid-persistence-type"===e?"The specified persistence type is invalid. It can only be local, session or none.":"auth/invalid-phone-number"===e?"The format of the phone number provided is incorrect.":"auth/invalid-provider-id"===e?"The specified provider ID is invalid.":"auth/invalid-recipient-email"===e?"The email corresponding to this action failed to send as the provided recipient email address is invalid.":"auth/invalid-sender"===e?"The email template corresponding to this action contains an invalid sender email or name.":"auth/invalid-verification-id"===e?"The verification ID used to create the phone auth credential is invalid.":"auth/invalid-tenant-id"===e?"The Auth instance's tenant ID is invalid.":"auth/missing-android-pkg-name"===e?"An Android Package Name must be provided if the Android App is required to be installed.":"auth/auth-domain-config-required"===e?"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.":"auth/missing-app-credential"===e?"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.":"auth/missing-verification-code"===e?"The phone auth credential was created with an empty SMS verification code.":"auth/missing-continue-uri"===e?"A continue URL must be provided in the request.":"auth/missing-iframe-start"===e?"An internal AuthError has occurred.":"auth/missing-ios-bundle-id"===e?"An iOS Bundle ID must be provided if an App Store ID is provided.":"auth/missing-or-invalid-nonce"===e?"The request does not contain a valid nonce.":"auth/missing-multi-factor-info"===e?"No second factor identifier is provided.":"auth/missing-multi-factor-session"===e?"The request is missing proof of first factor successful sign-in.":"auth/missing-phone-number"===e?"To send verification codes, provide a phone number for the recipient.":"auth/missing-verification-id"===e?"The phone auth credential was created with an empty verification ID.":"auth/app-deleted"===e?"This instance of FirebaseApp has been deleted.":"auth/multi-factor-info-not-found"===e?"The user does not have a second factor matching the identifier provided.":"auth/multi-factor-auth-required"===e?"Proof of ownership of a second factor is required to complete sign-in.":"auth/account-exists-with-different-credential"===e?"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.":"auth/network-request-failed"===e?"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.":"auth/no-auth-event"===e?"An internal AuthError has occurred.":"auth/no-such-provider"===e?"User was not linked to an account with the given provider.":"auth/null-user"===e?"A null user object was provided as the argument for an operation which requires a non-null user object.":"auth/operation-not-allowed"===e?"Please contact the admin to enable MFA feature in your application":"auth/operation-not-supported-in-this-environment"===e?"This operation is not supported in the environment this application is running on.":"auth/popup-blocked"===e?"Unable to establish a connection with the popup. It may have been blocked by the browser.":"auth/popup-closed-by-user"===e?"The popup has been closed by the user before finalizing the operation.":"auth/provider-already-linked"===e?"User can only be linked to one identity for the given provider.":"auth/quota-exceeded"===e?"Too many attempts. Please wait at least a minute, or ask administrator to reset your 2FA (TOTP/SMS).":"auth/redirect-cancelled-by-user"===e?"The redirect operation has been cancelled by the user before finalizing.":"auth/redirect-operation-pending"===e?"A redirect sign-in operation is already pending.":"auth/rejected-credential"===e?"The request contains malformed or mismatching credentials.":"auth/second-factor-already-in-use"===e?"The second factor is already enrolled on this account.":"auth/maximum-second-factor-count-exceeded"===e?"The maximum allowed number of second factors on a user has been exceeded.":"auth/tenant-id-mismatch"===e?"The provided tenant ID does not match the Auth instance's tenant ID":"auth/timeout"===e?"The operation has timed out.":"auth/user-token-expired"===e?"The user's credential is no longer valid. The user must sign in again.":"auth/too-many-requests"===e?"We have blocked all requests from this device due to unusual activity. Try again later.":"auth/unauthorized-continue-uri"===e?"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.":"auth/unsupported-first-factor"===e?"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.":"auth/unsupported-persistence-type"===e?"The current environment does not support the specified persistence type.":"auth/unsupported-tenant-operation"===e?"This operation is not supported in a multi-tenant context.":"auth/unverified-email"===e?"Please verify email first. Check your email inbox.":"auth/user-cancelled"===e?"The user did not grant application the permissions it requested.":"auth/user-not-found"===e?"There is no user record corresponding to this identifier. The user may have been deleted.":"auth/user-disabled"===e?"The user account has been disabled by an administrator.":"auth/user-mismatch"===e?"The supplied credentials do not correspond to the previously signed in user.":"auth/weak-password"===e?"The password must be 6 characters long or more.":"auth/web-storage-unsupported"===e?"This browser is not supported or 3rd party cookies and data may be disabled.":"auth/already-initialized"===e?"initializeAuth() has already been called with different options":e}i.d(t,{h:function(){return a}})},40308:function(e,t,i){"use strict";i.d(t,{F1:function(){return r},W2:function(){return n},b6:function(){return o},fU:function(){return l}});var a=i(715),s=i(21056);function n(e){return e===s.I5?"blue darken-2":"amber accent-4"}function o(e){return e===s.I5?"blue--text text--darken-2":"amber--text text--accent-4"}function r(e){return`border-left: 2px solid ${e===s.I5?a.Z.blue.darken2:a.Z.amber.darken4}`}function l(e){return{[s.pB]:"green",[s.Xy]:"blue",[s.Cu]:"red",[s.C$]:"grey"}[e.abuse?.status||s.pB]}},48799:function(e,t,i){"use strict";i.d(t,{KZ:function(){return v},LF:function(){return y},LZ:function(){return h},QB:function(){return C},Ut:function(){return g},c6:function(){return m},g:function(){return d},pW:function(){return p},pu:function(){return b}});i(57658);var a=i(27484),s=i.n(a),n=i(70178),o=i.n(n),r=i(29387),l=i.n(r),c=i(84110),u=i.n(c);function d(e){return e.trim().replace(/\s(?=\S*$)/,"&nbsp;").replace(/\s(?=\S*$)/,"&nbsp;")}function h(e){if(!e)return"";const t=s()().startOf("day"),i=s()(e),a=[`<strong>${i.format("HH:mm")}</strong>`];if(i<t){const e="&#8209;";a.push(" "+i.format(`DD${e}MMM${e}YYYY`))}return a.push(" — "+i.fromNow().replace(/ /g,"&nbsp;")),a.join("")}function m({dateTime:e,customerTimezone:t,profileTimezone:i,isShort:a}){if(!e)return"";const n=s()(1e3*e.seconds),o=s()(1e3*e.seconds).tz(t||"UTC"),r=s()(1e3*e.seconds).tz(i||"UTC"),l=o.format("HH:mm"),c=r.format("HH:mm"),u=t===i,d=a?"MMM D":"ddd, MMM D, YYYY",h=o.day()===r.day(),m=h?"":o.format(d),g=r.format(d),p=[];return p.push('<strong class="blue--text text--darken-2">'),p.push(l),p.push("</strong>"),u||(p.push(` ${m}`),p.push(" | "),p.push('<strong class="purple--text text--accent-4">'),p.push(c),p.push("</strong>")),p.push(` ${g}`),p.push((a?" (":" — ")+n.fromNow().replace(/ /g,"&nbsp;")+(a?")":"")),p.join("")}function g({dateTime:e,profileTimezone:t}){if(!e)return"";const i=s()(1e3*e.seconds).tz(t||"UTC"),a=i.format("ddd, MMM D, YYYY"),n=i.format("HH:mm");return` ${a}, at ${n}`}function p(e){const t=new Date,i=315576e5;return Math.floor((t-new Date(e).getTime())/i)}function f(e){return{days:Math.floor(e/86400),hours:Math.floor(e%86400/3600),minutes:Math.floor(e%3600/60),seconds:Math.floor(e%60)}}function b(e){const t={unit:"seconds",valueNumber:0},i=f(e);for(const o in i)0===i[o]&&delete i[o];const a=Object.keys(i),s=Object.values(i),n=a[0];if(0===a.length)return t;if(t.unit=n,1===a.length)return t.valueNumber=i[n],t;if("days"===n){const e=n,s=a[1],o=i[e][0],r=i[s][1],l="days"===e&&"hours"===s?12:30;t.valueNumber=r<=l?o:o+1}else t.valueNumber=s[1]<=30?s[0]:s[0]+1;return t}function y(e){const t=parseInt(e.slice(0,e.indexOf(" "))),i=e.slice(e.indexOf(" ")+1),a=86400,s=3600,n=60;let o=0;return o={DAY:t*a,HOUR:t*s,MINUTE:t*n,SECOND:t}[i],o}function v(e,t){return s()(e).format(t)}function C(e,t){return s()().diff(e,t)}s().extend(o()),s().extend(l()),s().extend(u())},62769:function(e,t,i){"use strict";i.d(t,{C:function(){return l},HB:function(){return n},OW:function(){return o},WJ:function(){return r},up:function(){return c}});var a=i(24449);function s(){return!Intl.DisplayNames}function n(e){if(!e)return"Global";if(s())return e;const t=new Intl.DisplayNames(["en"],{type:"region"});return t.of(e)}function o(e){const t=(0,a.Z5)(e)[1];return n(t)}function r(e){if(s())return e;const t=new Intl.DisplayNames(["en"],{type:"language"});return t.of(e)}function l(e){return"GB"===e?"GB-UKM":e}function c(e){const t=(0,a.Z5)(e)[1];return l(t)}},38381:function(e,t){"use strict";t.Z=e=>{if(!e)return"";const t={AF:{name:"Afghanistan"},AX:{name:"Aland Islands"},AL:{name:"Albania"},DZ:{name:"Algeria"},AS:{name:"American Samoa"},AD:{name:"Andorra"},AO:{name:"Angola"},AI:{name:"Anguilla"},AQ:{name:"Antarctica"},AG:{name:"Antigua And Barbuda"},AR:{name:"Argentina"},AM:{name:"Armenia"},AW:{name:"Aruba"},AU:{name:"Australia"},AT:{name:"Austria"},AZ:{name:"Azerbaijan"},BS:{name:"Bahamas"},BH:{name:"Bahrain"},BD:{name:"Bangladesh"},BB:{name:"Barbados"},BY:{name:"Belarus"},BE:{name:"Belgium"},BZ:{name:"Belize"},BJ:{name:"Benin"},BM:{name:"Bermuda"},BT:{name:"Bhutan"},BO:{name:"Bolivia"},BA:{name:"Bosnia And Herzegovina"},BW:{name:"Botswana"},BV:{name:"Bouvet Island"},BR:{name:"Brazil"},IO:{name:"British Indian Ocean Territory"},BN:{name:"Brunei Darussalam"},BG:{name:"Bulgaria"},BF:{name:"Burkina Faso"},BI:{name:"Burundi"},KH:{name:"Cambodia"},CM:{name:"Cameroon"},CA:{name:"Canada"},CV:{name:"Cape Verde"},KY:{name:"Cayman Islands"},CF:{name:"Central African Republic"},TD:{name:"Chad"},CL:{name:"Chile"},CN:{name:"China"},CX:{name:"Christmas Island"},CC:{name:"Cocos (Keeling) Islands"},CO:{name:"Colombia"},KM:{name:"Comoros"},CG:{name:"Congo"},CD:{name:"Congo, Democratic Republic"},CK:{name:"Cook Islands"},CR:{name:"Costa Rica"},CI:{name:"Cote D'Ivoire"},HR:{name:"Croatia"},CU:{name:"Cuba"},CY:{name:"Cyprus"},CZ:{name:"Czech Republic"},DK:{name:"Denmark"},DJ:{name:"Djibouti"},DM:{name:"Dominica"},DO:{name:"Dominican Republic"},EC:{name:"Ecuador"},EG:{name:"Egypt"},SV:{name:"El Salvador"},GQ:{name:"Equatorial Guinea"},ER:{name:"Eritrea"},EE:{name:"Estonia"},ET:{name:"Ethiopia"},FK:{name:"Falkland Islands (Malvinas)"},FO:{name:"Faroe Islands"},FJ:{name:"Fiji"},FI:{name:"Finland"},FR:{name:"France"},GF:{name:"French Guiana"},PF:{name:"French Polynesia"},TF:{name:"French Southern Territories"},GA:{name:"Gabon"},GM:{name:"Gambia"},GE:{name:"Georgia"},DE:{name:"Germany"},GH:{name:"Ghana"},GI:{name:"Gibraltar"},GR:{name:"Greece"},GL:{name:"Greenland"},GD:{name:"Grenada"},GP:{name:"Guadeloupe"},GU:{name:"Guam"},GT:{name:"Guatemala"},GG:{name:"Guernsey"},GN:{name:"Guinea"},GW:{name:"Guinea-Bissau"},GY:{name:"Guyana"},HT:{name:"Haiti"},HM:{name:"Heard Island & Mcdonald Islands"},VA:{name:"Holy See (Vatican City State)"},HN:{name:"Honduras"},HK:{name:"Hong Kong"},HU:{name:"Hungary"},IS:{name:"Iceland"},IN:{name:"India"},ID:{name:"Indonesia"},IR:{name:"Iran, Islamic Republic Of"},IQ:{name:"Iraq"},IE:{name:"Ireland"},IM:{name:"Isle Of Man"},IL:{name:"Israel"},IT:{name:"Italy"},JM:{name:"Jamaica"},JP:{name:"Japan"},JE:{name:"Jersey"},JO:{name:"Jordan"},KZ:{name:"Kazakhstan"},KE:{name:"Kenya"},KI:{name:"Kiribati"},KR:{name:"Korea"},KW:{name:"Kuwait"},KG:{name:"Kyrgyzstan"},LA:{name:"Lao People's Democratic Republic"},LV:{name:"Latvia"},LB:{name:"Lebanon"},LS:{name:"Lesotho"},LR:{name:"Liberia"},LY:{name:"Libyan Arab Jamahiriya"},LI:{name:"Liechtenstein"},LT:{name:"Lithuania"},LU:{name:"Luxembourg"},MO:{name:"Macao"},MK:{name:"Macedonia"},MG:{name:"Madagascar"},MW:{name:"Malawi"},MY:{name:"Malaysia"},MV:{name:"Maldives"},ML:{name:"Mali"},MT:{name:"Malta"},MH:{name:"Marshall Islands"},MQ:{name:"Martinique"},MR:{name:"Mauritania"},MU:{name:"Mauritius"},YT:{name:"Mayotte"},MX:{name:"Mexico"},FM:{name:"Micronesia, Federated States Of"},MD:{name:"Moldova"},MC:{name:"Monaco"},MN:{name:"Mongolia"},ME:{name:"Montenegro"},MS:{name:"Montserrat"},MA:{name:"Morocco"},MZ:{name:"Mozambique"},MM:{name:"Myanmar"},NA:{name:"Namibia"},NR:{name:"Nauru"},NP:{name:"Nepal"},NL:{name:"Netherlands"},AN:{name:"Netherlands Antilles"},NC:{name:"New Caledonia"},NZ:{name:"New Zealand"},NI:{name:"Nicaragua"},NE:{name:"Niger"},NG:{name:"Nigeria"},NU:{name:"Niue"},NF:{name:"Norfolk Island"},MP:{name:"Northern Mariana Islands"},NO:{name:"Norway"},OM:{name:"Oman"},PK:{name:"Pakistan"},PW:{name:"Palau"},PS:{name:"Palestinian Territory, Occupied"},PA:{name:"Panama"},PG:{name:"Papua New Guinea"},PY:{name:"Paraguay"},PE:{name:"Peru"},PH:{name:"Philippines"},PN:{name:"Pitcairn"},PL:{name:"Poland"},PT:{name:"Portugal"},PR:{name:"Puerto Rico"},QA:{name:"Qatar"},RE:{name:"Reunion"},RO:{name:"Romania"},RU:{name:"Russian Federation"},RW:{name:"Rwanda"},BL:{name:"Saint Barthelemy"},SH:{name:"Saint Helena"},KN:{name:"Saint Kitts And Nevis"},LC:{name:"Saint Lucia"},MF:{name:"Saint Martin"},PM:{name:"Saint Pierre And Miquelon"},VC:{name:"Saint Vincent And Grenadines"},WS:{name:"Samoa"},SM:{name:"San Marino"},ST:{name:"Sao Tome And Principe"},SA:{name:"Saudi Arabia"},SN:{name:"Senegal"},RS:{name:"Serbia"},SC:{name:"Seychelles"},SL:{name:"Sierra Leone"},SG:{name:"Singapore"},SK:{name:"Slovakia"},SI:{name:"Slovenia"},SB:{name:"Solomon Islands"},SO:{name:"Somalia"},ZA:{name:"South Africa"},GS:{name:"South Georgia And Sandwich Isl."},ES:{name:"Spain"},LK:{name:"Sri Lanka"},SD:{name:"Sudan"},SR:{name:"Suriname"},SJ:{name:"Svalbard And Jan Mayen"},SZ:{name:"Swaziland"},SE:{name:"Sweden"},CH:{name:"Switzerland"},SY:{name:"Syrian Arab Republic"},TW:{name:"Taiwan"},TJ:{name:"Tajikistan"},TZ:{name:"Tanzania"},TH:{name:"Thailand"},TL:{name:"Timor-Leste"},TG:{name:"Togo"},TK:{name:"Tokelau"},TO:{name:"Tonga"},TT:{name:"Trinidad And Tobago"},TN:{name:"Tunisia"},TR:{name:"Turkey"},TM:{name:"Turkmenistan"},TC:{name:"Turks And Caicos Islands"},TV:{name:"Tuvalu"},UG:{name:"Uganda"},UA:{name:"Ukraine"},AE:{name:"United Arab Emirates"},GB:{name:"United Kingdom"},US:{name:"United States"},UM:{name:"United States Outlying Islands"},UY:{name:"Uruguay"},UZ:{name:"Uzbekistan"},VU:{name:"Vanuatu"},VE:{name:"Venezuela"},VN:{name:"Viet Nam"},VG:{name:"Virgin Islands, British"},VI:{name:"Virgin Islands, U.S."},WF:{name:"Wallis And Futuna"},EH:{name:"Western Sahara"},YE:{name:"Yemen"},ZM:{name:"Zambia"},ZW:{name:"Zimbabwe"}};return t[e].name}},73802:function(e,t,i){"use strict";function a(e){if(!e)return"";const t=e.split("-"),i=t[0],a=t[1];return`${s(i)} - ${s(a)} - ${e} cm`}function s(e){const t="string"===typeof e?parseInt(e):e;if(!t)return"";const i=.393700787*t/12,a=Math.floor(i),s=Math.round(12*(i-a));return`${a}ft ${s?s+"in":""}`}i.d(t,{m:function(){return a}})},87699:function(e,t,i){"use strict";i.d(t,{Y:function(){return a}});i(57658);function a(e,t){if(!e)return[];const i=/%(\s|\.)*\[/,a=/\](\s|\.)*%/,s=/((%|\[).*?\]\s*%)/gi,n=/(%\s*\[.*?(\]|%))/gi,o=e=>e.replace(/\s*/gm,""),r=[],l=()=>0===r.length||"var"!==r.at(-1).type&&r.at(-1).original.trim().endsWith("."),c=()=>{const t=e;t?.length>0&&r.push({type:"text",original:e,hasSentenceBegin:l()}),e=""};let u=!1,d=!1,h=!0;while(e.length>0){if(u)if(a.test(e)){u=!1;const s=d?1:e.match(i)[0].length,n=e.match(a),l=n.index,c=n[0].length,m=e.substring(0,l+c),g=e.substring(s,l),p=o(g),f=t.includes(`%[${p}]%`),b=d||g!==p||s>2||c>2;r.push({type:"var",original:m,fixedVarName:p,isValid:f,isBroken:b,hasSentenceBegin:h}),e=e.substring(l+c)}else if(n.test(e)){u=!1;const a=e.match(i)[0].length,s=e.substring(a),n=s.match(/\]|%/),l=n.index+a,c=1,d=e.substring(0,l+c),m=e.substring(a,l),g=o(m),p=t.includes(`%[${g}]%`),f=!0;r.push({type:"var",original:d,fixedVarName:g,isValid:p,isBroken:f,hasSentenceBegin:h}),e=e.substring(l+c)}else c();else if(i.test(e)){u=!0,d=!1;const t=e.match(i),a=t.index,s=e.substring(0,a);s?.length>0&&(r.push({type:"text",original:s,hasSentenceBegin:h}),e=e.substring(a))}else if(s.test(e)){u=!0,d=!0;const t=e.match(/%|\[/),i=t.index,a=e.substring(0,i);a?.length>0&&(r.push({type:"text",original:a,hasSentenceBegin:h}),e=e.substring(i))}else if(a.test(e)&&"var"===r[r.length-1]?.type){const t=e.match(a),i=t.index,s=t[0].length,n=e.substring(0,i+s),l=e.substring(0,i),c=o(l),u=r[r.length-1];u.original=`${u.original}${n}`,u.fixedVarName=`${u.fixedVarName}${c}`,u.isValid=!1,u.isBroken=!1,e=e.substring(i+s)}else c();h=l()}return r}},8201:function(e,t,i){"use strict";i.d(t,{AV:function(){return c},Rl:function(){return b},U8:function(){return p},WC:function(){return l},Xm:function(){return m},_F:function(){return o},fo:function(){return f},gB:function(){return g},lG:function(){return h},lk:function(){return r},nv:function(){return d},vH:function(){return u},xh:function(){return v},z4:function(){return n}});var a=i(67473),s=i(21056);const n={message:{title:"Message",icon:"mdi-message-text-outline",color:"primary",cssTextColor:"primary--text"},flirt:{title:"Flirt",icon:"mdi-sticker-emoji",color:"purple",cssTextColor:"purple--text"},favorite:{title:"Favorite",icon:"mdi-star-outline",color:"orange",cssTextColor:"orange--text"},event_like:{title:"Like",icon:"mdi-thumb-up-outline",color:"blue",cssTextColor:"blue--text"},proposal:{title:"Sex proposal",icon:"mdi-heart-outline",color:"pink",cssTextColor:"pink--text"}},o=["%[hairColor]%","%[eyeColor]%","%[build]%","%[city]%","%[province]%","%[name]%","%[age]%"],r=["%[distance]%","%[timeOfDay]%"];function l(e){return[...e.filters.age_18_till_25?[a.Ar.Age18_25]:[],...e.filters.age_26_till_35?[a.Ar.Age26_35]:[],...e.filters.age_36_till_45?[a.Ar.Age36_45]:[],...e.filters.age_46_till_54?[a.Ar.Age46_54]:[],...e.filters.age_55_till_99?[a.Ar.Age55_99]:[],...e.filters.age_unknown?[a.Ar.Unknown]:[]]}function c(e){return[...e.filters.gender_couple?[a.Zm.Couple]:[],...e.filters.gender_female?[a.Zm.Female]:[],...e.filters.gender_male?[a.Zm.Male]:[],...e.filters.gender_transgender?[a.Zm.Transgender]:[],...e.filters.gender_unknown?[a.Zm.Unknown]:[]]}function u(e){return[...e.filters.past_paid_older_than_1_month?[a.MY.MoreOneMonth]:[],...e.filters.past_paid_within_1_month?[a.MY.WithinOneMonth]:[],...e.filters.past_paid_within_2_weeks?[a.MY.WithinTwoWeeks]:[],...e.filters.past_paid_within_1_week?[a.MY.WithinOneWeek]:[]]}function d(e){return[...e.filters.has_credits?[a.TO.HasCredits]:[],...e.filters.had_credits?[a.TO.HadCredits]:[],...e.filters.never_had_credits?[a.TO.NeverHadCredits]:[]]}function h(e){return[...e.filters.with_photo?[a.H3.WithPhoto]:[],...e.filters.without_photo?[a.H3.WithoutPhoto]:[]]}function m(e){return[...e.filters.with_text?[a.bF.WithText]:[],...e.filters.without_text?[a.bF.WithoutText]:[]]}function g(e){return[...e.filters.in_conversation?[a.ZW.InConversation]:[],...e.filters.not_in_conversation?[a.ZW.NotInConversation]:[]]}function p(e){return"0"==e.filters.lastLogin?"today":"1"==e.filters.lastLogin?"yesterday":`${e.filters.lastLogin} days ago`}function f(e){return[...e.filters.geoRegion1?[e.filters.geoRegion1.region1]:["not selected"],...e.filters.geoRegion1?.locality?[e.filters.geoRegion1.locality]:[]]}const b={[s.OE]:{title:"Default",icon:"mdi-message-outline",color:"primary",cssTextColor:"primary--text"},[s.vG]:{title:"Recurring",icon:"mdi-rotate-right",color:"lime darken-4",cssTextColor:"lime--text text--darken-4"},[s.KZ]:{title:"Follow up",icon:"mdi-transfer",color:"light-blue darken-4",cssTextColor:"light-blue--text text--darken-4"}},y={photo:["with_photo","without_photo"],text:["with_text","without_text"],age:["age_18_till_25","age_26_till_35","age_36_till_45","age_46_till_54","age_55_till_99","age_unknown"],credits:["has_credits","had_credits","never_had_credits"],lastPaid:["past_paid_within_1_week","past_paid_within_2_weeks","past_paid_within_1_month","past_paid_older_then_1_month"],gender:["gender_male","gender_female","gender_couple","gender_transgender","gender_unknown"]};function v(e){const t={...e};return Object.keys(y).forEach((i=>{const a=y[i].every((t=>!e[t]));a&&y[i].forEach((e=>{t[e]=!0}))})),t}},19789:function(e,t,i){"use strict";i.d(t,{X:function(){return a}});const a=e=>Array.isArray(e)?(e.forEach(((t,i)=>e.splice(i,1,a(t)))),e):"object"!==typeof e?e:Object.fromEntries(Object.entries(e).filter((([,e])=>Array.isArray(e)?0!==e.length:![null,void 0,""].includes(e))).map((([e,t])=>[e,t===Object(t)?a(t):t])))},11499:function(e,t,i){"use strict";i.d(t,{n:function(){return s}});var a=i(27722);function s(e){const t=(0,a.F)(),i=t.currentTenantAlias;i&&e.headers&&(e.headers["X-Holding-Tenant"]=i)}},24449:function(e,t,i){"use strict";i.d(t,{$G:function(){return d},Bh:function(){return f},CH:function(){return C},Ee:function(){return k},F3:function(){return m},Fw:function(){return p},Gl:function(){return g},HK:function(){return _},IH:function(){return u},OI:function(){return h},Of:function(){return b},PX:function(){return P},Yw:function(){return y},Z5:function(){return A},mR:function(){return w},wl:function(){return v}});i(57658);var a=i(32859),s=i(59673),n=i(32090),o=i(27484),r=i.n(o);const l=new s.EmojiIndex(a),c=["",void 0],u=(...e)=>t=>e.reduce(((e,i)=>(e[i]=c.includes(t[i])?null:t[i],e)),{}),d=e=>{let t=0;for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);let i="#";for(let a=0;a<3;a++){const e=t>>8*a&255;i+=("00"+e.toString(16)).substr(-2)}return i},h=e=>"string"===typeof e&&e?e.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,(e=>e.toUpperCase())):e,m=(e,t)=>{const i=[],a=Math.ceil(e.length/t);for(let s=0;s<t;s++)i.push(e.slice(s*a,s*a+a));return i},g={eye_colour:"mdi-eye",hair_colour:"mdi-face-profile",is_smoker:"mdi-smoking",has_tattoo:"mdi-sticker",has_piercings:"mdi-paperclip",age:"mdi-counter",date_of_birth:"mdi-calendar",civil_status:"mdi-card-account-details",housing_situation:"mdi-home",sexual_orientation:"mdi-gender-transgender",transportation:"mdi-car",location:"mdi-earth",location_origin:"mdi-map-marker",passion:"mdi-fire",profession:"mdi-briefcase",name:"mdi-tag",real_name:"mdi-tag-heart",hobbies:"mdi-racquetball",about_me:"mdi-text-subject",about_you:"mdi-text",adult_level:"mdi-badge-account-alert",appearance:"mdi-mirror",build:"mdi-dumbbell",length:"mdi-ruler",status:"mdi-checkbox-marked"};function p(e){const t=r()(),i=r()(e);return t.diff(i,"year")}const f=e=>e.map((e=>({id:e.id,url:e.path,displayUrl:e.path}))),b=e=>{const t={},i={},a=/^filters\[(?<prop>[^\]]+)](?:\[(?<index>\d+)])?$/;for(const[s,n]of Object.entries(e)){const e=a.exec(s);if(e?.groups?.prop){const a=e.groups.prop;if(void 0!==e.groups.index){const t=parseInt(e.groups.index,10);i[a]||(i[a]={}),i[a][t]=n}else t[a]=n}else t[s]=n}for(const s of Object.keys(i)){const e=Object.entries(i[s]);e.sort(((e,t)=>Number(e[0])-Number(t[0]))),t[s]=e.map((([e,t])=>t))}return t};function y(e){const t=new RegExp("([^:]+)?(:[a-zA-Z0-9-_+]+:(:skin-tone-[2-6]:)?)","g");return e.split(t).reduce(((e,i)=>{if(!i)return e;if(i.startsWith(":skin"))return e;const a=i.match(t);if(a&&a[0]){const t=l.findEmoji(a[0]);if(t)return e+t.native}return e+i}),"")}function v(e){if(e)return y(e)}function C(e){const t=e.lastMessage?.abuse_modification_data&&JSON.parse(e.lastMessage.abuse_modification_data),i=t?.modified_content??e.lastMessage?.maskedContent??e.lastMessage?.content??e.message?.maskedContent??e.message?.modified_content??e.message?.content;return v(i)}function _({profile:e,message:t,domainConfiguration:i}){return i?.geoWizardEnabled?t.replace(n.vL,((t,a)=>({"%[playerProvince]%":e?.geo[0]?.[i.geoStrategyRegionField||"region1"],"%[playerCity]%":e?.geo[0]?.[i.geoStrategyCityField||"locality"]}[a]??""))):t}const k=()=>window&&window.matchMedia("(display-mode: standalone)").matches,w=/(%\[.*?\]%)/gi;function P(e,t){return Number((e/t*100||0).toFixed(3))}function A(e){return e.split("_")}},8394:function(e,t,i){"use strict";var a=i(20144),s=i(34848),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(s.Z,[t("NotificationSnackbar"),t(e.$route.meta.layout||"div",{tag:"component"},[t("router-view")],1)],1)},o=[],r=i(9929),l=i(32875),c=i(35589),u=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",[t(c.Z,{attrs:{timeout:i.notification.timeout,color:i.notification.type,"multi-line":"",top:"",right:"",vertical:""},on:{input:function(e){return i.setSeen(i.notification.index)}},scopedSlots:e._u([{key:"action",fn:function({attrs:a}){return[t(r.Z,{attrs:{value:i.queueLength>1,content:i.queueLength,color:"info"}},[t(l.Z,e._b({attrs:{dark:"",text:""},on:{click:function(e){return i.remove(i.notification.index)}}},"v-btn",a,!1),[e._v("Close")])],1)]}}]),model:{value:i.notification.show,callback:function(t){e.$set(i.notification,"show",t)},expression:"notification.show"}},[e._v(" "+e._s(i.notification.message)+" ")])],1)},d=[],h=i(60359),m=(0,a.defineComponent)({__name:"NotificationSnackbar",setup(e){const t=(0,a.ref)(null),i=(0,a.computed)((()=>{const e=(0,h.G)().notifications.map(((e,t)=>({index:t,...e})));return e.filter((e=>e.show))})),s=(0,a.computed)((()=>i.value.length)),n=(0,a.computed)((()=>s.value>0));function o(e){c(),(0,h.G)().setNotificationSeen(e)}function r(e){o(e),(0,h.G)().removeNotification(e)}function l(){t.value={message:"",show:!1,index:-1,timeout:void 0}}async function c(){if(t.value?.show||!n.value)return void l();const e=i.value.shift();await(0,a.nextTick)(),t.value={...e}}return(0,a.watch)(i,c,{deep:!0}),(0,a.onMounted)((()=>{c()})),l(),{__sfc:!0,notification:t,notificationQueue:i,queueLength:s,hasPendingNotification:n,setSeen:o,remove:r,reset:l,showNext:c}}}),g=m,p=i(1001),f=(0,p.Z)(g,u,d,!1,null,"3cc1f56a",null),b=f.exports,y=i(98887),v=i(24449),C=i(27722),_=(0,a.defineComponent)({name:"App",metaInfo(){const e=(0,C.F)().appTitle;return{title:"App",titleTemplate:t=>`${t} | ${e}`,changed(e){if((0,y.Gb)()){const t=(0,y.IH)();(0,y.lT)?.(t,e.title),(0,y.Kz)(t,"screen_view",{app_name:(0,v.Ee)()?"pwa":"web",screen_name:e.title})}}}},components:{NotificationSnackbar:b},mounted(){(0,C.F)().getTenantInfo()}}),k=_,w=(0,p.Z)(k,n,o,!1,null,"021e3249",null),P=w.exports,A=i(78345),M=i(97398),T=i(69876),S=i(67721),I=i(94677),x=i(16182),E=i(59875),L=i(3138),R=i.n(L),F=i(21056),O=i(62591),D=i.n(O),N=i(31526),Z=i(23450),U=i.n(Z);function G(e,t){return U()(e,t,!0)}var B={install(e){e.prototype.$makePlural=G}},j=i(5412);function q(e){return e.includes("|")?j.Z.hasAnyRole(e.split("|")):j.Z.hasRole(e)}a["default"].directive("role",{bind:(e,t)=>{const i=t.value;q(i)||e.style.setProperty("display","none","important")}});var $=i(56459),H=i.n($),z=i(95470),W=i(65284),V=i.n(W);i(34155);const J=!1,Q=!1,Y=!1;a["default"].config.productionTip=!1,a["default"].config.devtools=Q,a["default"].use(z.Z),a["default"].use(D(),{name:"Flag"}),a["default"].use(R(),{id:F.B0,isProduction:Y,snippetVersion:6}),a["default"].component("v-gravatar",H()),a["default"].use(B),a["default"].use(V()),a["default"].use(T.og);const K=(0,I.m)(S.Z);async function X(){(0,x.T)().bindEvents(),await(0,N.r)(),await K.authenticate(),new a["default"]({router:M.Z,vuetify:E.ZP,pinia:S.Z,render:e=>e(P)}).$mount("#app")}a["default"].use(A.ZP),J&&(window.__pinia__=S.Z),X()},5412:function(e,t){"use strict";function i(){return JSON.parse(localStorage.getItem("roles"))||[]}t.Z={setRoles:e=>{localStorage.setItem("roles",JSON.stringify(e))},hasRole:e=>{const t=i();return t.includes(e)},hasAnyRole:e=>{const t=i();return t.some((t=>e.includes(t)))}}},31526:function(e,t,i){"use strict";i.d(t,{k:function(){return g},r:function(){return m}});var a=i(83977),s=i(36100),n=i(98887),o=i(9669),r=i.n(o),l=i(28662),c=i(20144),u=i(74864);const d=(e=0)=>{const t=1e3*Math.pow(2,e),i=1e3*Math.random();return t+i};(0,l.ZP)(r(),{retries:2,retryDelay:d});const h="https://api.chathomebase.com";async function m(){const e=`${h}/firebase/default`,t=await r().get(e),i=`${h}/firebase/tenant/${window.location.host}`,o=await r().get(i),l=(0,a.ZF)(t.data);(0,u.v0)(l).tenantId=o.data?.tenantId||null,(0,n.Gb)()&&(c["default"].prototype.$analytics=(0,n.IH)());const d={experimentalForceLongPolling:!0};return(0,s.LV)(l,d),l}function g(e){return null!==e&&"object"===typeof e&&"string"===typeof e.code}},59875:function(e,t,i){"use strict";i.d(t,{lr:function(){return n}});var a=i(20144),s=i(56572);a["default"].use(s.Z);const n="#28379E",o="#9760FF";t.ZP=new s.Z({theme:{themes:{light:{primary:n,ai:o}}}})},88920:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var a=i(61369),s=i(24449);const n=e=>({profileCmsId:e.profileCmsId,uuid:e.uuid??null,real_name:e.real_name??"",is_smoker:"Yes"===e.smoke,hobbies:e.hobbies??"",has_piercing:"Yes"===e.piercing,has_tattoo:"Yes"===e.tattoo,hair_colour:e.hairColor??"",civil_status:e.civilStatus??"",eye_colour:e.eyeColor??"",about_me:e.aboutMe??"",about_you:e.aboutYou??"",adult_level:e.adultLevel??"",age:+e.age??null,build:e.build??"",status:e.status??"",length:e.lengthChoice??"",profession:e.profession??"",transportation:e.transportation??"",housing_situation:e.habitat??"",metadata:{length:+e.lengthChoice??null,profession:e.profession??"",transportation:e.transportation??"",housing_situation:e.habitat??"",passion:null,sexual_orientation:null},is_angel:1===e.fake,avatar:e.photo??"",domain:e.site??"",geo_iso:e.geoIso??"",geo_latitude:e.geoLatitude??"",geo_longitude:e.geoLongitude??"",geo_free:e.geoFree,geo_language:e.geoLanguage??"",geo_locality:e.geoLocality??"",id:e.id??"",foreignProfileId:e.foreignProfileId,uid:e.id?.toString()??"",name:e.name??"",date_of_birth:"string"===typeof e.birthdate?e.birthdate:e.birthdate?.date||"",base_profile_id:+e.profileCmsId??null,gender:"m"===e.gender?"male":"female",created_at:e.created??"",updated_at:e.modified??"",geo:[{iso:e.geoIso??"",language:e.geoLanguage??"",timezone:e.geoTimezone??"",region1:e.geoRegion1??"",region2:e.geoRegion2??"",region3:e.geoRegion3??"",region4:e.geoRegion4??"",locality:e.geoLocality??"",postcode:e.geoPostcode??""}],creditsBalance:+e.creditsBalance??null,last_activity:e.lastActivity??null,profile_type:e.profileType??null});var o=i(9669),r=i.n(o),l=i(83977),c=i(74864),u=i(80129),d=i.n(u);function h(e){return Object.keys(e).map((t=>t+"="+e[t])).join("&")}var m=i(27722);class g{constructor(e){(0,a.Z)(this,"repository",void 0),(0,a.Z)(this,"domain",void 0),this.domain=e,this.initializeConnector(e)}initializeConnector(e){const t=t=>t.baseURL+t.url+e,i=e=>{const i=t(e);g.abortControllers[i]?.abort()},a=(0,m.F)().domainConfig(e);this.repository=r().create({baseURL:a.messageCentralUrl}),this.repository.interceptors.request.use((async e=>{i(e);const a=t(e);g.abortControllers[a]=new AbortController,e.signal=g.abortControllers[a].signal;const s=(0,l.Mq)(),n=await((0,c.v0)(s).currentUser?.getIdToken());return e.headers.Authorization=`Bearer ${n}`,e}),(e=>Promise.reject(e))),this.repository.interceptors.response.use((e=>(i(e.config),e)),(e=>r().isCancel(e)?new Promise((()=>{})):Promise.reject(e)))}async getEntertainmentProfiles({query:e,filters:t,page:i,limit:a}){const s=await this.repository.get(`/pokes/filterPlayer?site=${this.domain}&query=${e}&limit=${a}&page=${i}`,{params:{site:this.domain,query:e,filters:t,page:i,limit:a},paramsSerializer:e=>d().stringify(e.filters,{arrayFormat:"brackets"})});return s.data.data.map((e=>n(e.profile)))}async getEntertainmentProfilesCount(e){return this.repository.get("/user/profiles/count-profiles",e)}async getEntertainmentProfile(e,t){const i=t?`/profiles/${t}/${this.domain}`:`/profiles/${e}?isComplete=true`,a=await this.repository.get(i);return n(a.data.data)}async getGeoFreeEntertainmentProfileLocation(e,t,i,a,s,n){const o={countryCode:a,customerLat:s,customerLng:n},r=h(o),l=await this.repository.get(`/profiles/${e}/geowizard?${r}`);return l.data.data}async getPokeEntertainmentProfile(e,t,i){const a=e||i,{data:{data:s}}=await this.repository.get(`/pokes/profiles/${a}?siteName=${t}`);return n(s)}async getCustomerProfile({customerProfileId:e,customerUuid:t}){const i=t||e,{data:{data:a}}=await this.repository.get(`/profiles/${i}?isComplete=true`);return n(a)}async getCustomerProfilesCount({domainNames:e,filters:t,profileId:i}){const a=await this.repository.get("/pokes/countTargets",{params:{sites:e,filters:t,profileCmsId:i},paramsSerializer:e=>(e.sites=e.sites.map((e=>e.split(".").join("_"))),d().stringify(e,{arrayFormat:"brackets"}))});return a.data.data}async getAttachments(e){const t=await this.repository.get(`/profiles/${e.id}/attachments`);return(0,s.Bh)(t.data.data)}async getCreditsBalance(e){return+e.creditsBalance}supportMultiDomainCount(){return!0}async searchCustomerProfilesByName(e){const t=e=>(e.sites=e.sites.map((e=>e.split(".").join("_"))),d().stringify(e,{arrayFormat:"brackets"})),i=await this.repository.get("/pokes/getTargets",{params:e,paramsSerializer:t});return i.data.data.map((e=>({uuid:e.uuid,name:e.name})))}}(0,a.Z)(g,"abortControllers",{})},1027:function(e,t,i){"use strict";i.d(t,{Z:function(){return b}});var a=i(61369),s=i(9669),n=i.n(s),o=i(80129),r=i.n(o),l=i(83977),c=i(74864),u=i(24449);function d(e,t){const i=e.attributes.find((e=>e.name===t));return i?i.value:""}function h(e,t){const i=e.tag_categories.find((e=>e.name===t));return i?.tags[0]?.name}class m{attribute(e,t){return d(e,t)}tagCategory(e,t){return h(e,t)}map(e){return{id:e.profile_id||"",uid:e.profile_id||"",profileCmsId:e.profile_id||"",uuid:e.profile_id||"",foreignProfileId:e.profile_id||"",real_name:this.attribute(e,"name"),is_smoker:"smoker"===this.tagCategory(e,"characteristics"),hobbies:this.attribute(e,"hobbies"),has_piercing:"piercings"===this.tagCategory(e,"characteristics"),has_tattoo:"tattoos"===this.tagCategory(e,"characteristics"),hair_colour:this.tagCategory(e,"hair_color")||"",civil_status:this.tagCategory(e,"civil_status")||"",eye_colour:this.tagCategory(e,"eye_color")||"",about_me:this.attribute(e,"about_me"),about_you:this.attribute(e,"about_you"),adult_level:this.tagCategory(e,"adult_level")||"",age:this.attribute(e,"date_of_birth")?(0,u.Fw)(this.attribute(e,"date_of_birth")):0,appearance:this.tagCategory(e,"appearance")||"",build:this.tagCategory(e,"build")||"",status:this.tagCategory(e,"profile_type")||"",gender:"m"===this.tagCategory(e,"gender")?"male":"female",metadata:{length:+this.tagCategory(e,"length")||0,profession:this.tagCategory(e,"profession")||"",transportation:this.tagCategory(e,"transportation")||"",housing_situation:this.tagCategory(e,"housing_situation")||"",passion:this.tagCategory(e,"passion")||"",sexual_orientation:this.tagCategory(e,"sexual_orientation")||""},sexual_orientation:this.tagCategory(e,"sexual_orientation")||"",transportation:this.tagCategory(e,"transportation")||"",passion:this.tagCategory(e,"passion")||"",profession:this.attribute(e,"profession")||"",length:this.tagCategory(e,"length")||"0",is_angel:!!this.tagCategory(e,"is_angel"),avatar:e?.avatar?.url||"",media:e.media||[],domain:this.tagCategory(e,"site")||"",geo_iso:this.attribute(e,"geo_iso"),geo_latitude:this.attribute(e,"geo_latitude"),geo_longitude:this.attribute(e,"geo_longitude"),geo_free:this.attribute(e,"geo_region_1")?0:1,geo_language:this.attribute(e,"geo_language"),geo_type:"",geo_locality:this.attribute(e,"geo_locality"),name:this.attribute(e,"profile_name"),date_of_birth:this.attribute(e,"date_of_birth"),base_profile_id:null,created_at:this.tagCategory(e,"created_at")||"",updated_at:this.tagCategory(e,"modified")||"",geo:[{iso:this.attribute(e,"geo_iso"),language:this.attribute(e,"geo_language"),timezone:this.attribute(e,"geo_timezone"),region1:this.attribute(e,"geo_region_1"),region2:this.attribute(e,"geo_region_2"),region3:this.attribute(e,"geo_region_3"),region4:this.attribute(e,"geo_region_4"),locality:this.attribute(e,"geo_locality"),postcode:this.attribute(e,"postcode")}],creditsBalance:null,last_activity:e.last_activity_at||"",profile_type:e.profile_type||""}}}var g=i(85694),p=i(11499);const f="https://api.chathomebase.com";class b{constructor(){(0,a.Z)(this,"repository",void 0),(0,a.Z)(this,"profileMapper",void 0),this.profileMapper=new m,this.initializeConnector()}initializeConnector(){this.repository=n().create({baseURL:f}),this.repository.interceptors.request.use((async e=>{const t=(0,l.Mq)(),i=await((0,c.v0)(t).currentUser?.getIdToken());return e.headers.Authorization=`Bearer ${i}`,(0,p.n)(e),e}),(e=>Promise.reject(e)))}async getEntertainmentProfiles({query:e,filters:t,page:i,limit:a,locales:s,profileTypes:n}){const o=(0,u.Of)(t);"string"===typeof o?.profileType&&(n=[o.profileType]);const r=await this.repository.post("/profile/poke/entertainment-profiles",{filters:o,locales:s,profileTypes:n,page:i,limit:a,query:e}),l=r?.data?.profiles;if(!l)throw new Error("No profile found with the provided filters.");return l.map((e=>this.profileMapper.map(e)))}async getEntertainmentProfilesCount(e){return 0}async getEntertainmentProfile(e,t){const i=await this.repository.get(`/profile/${t}`),a=i?.data?.data;if(!a)throw new Error("No entertainment profile found with the provided id!");return this.profileMapper.map(a)}async getGeoFreeEntertainmentProfileLocation(e,t,i,a,s,n){const o={entertainmentProfileUUID:t,customerProfileUUID:i,countryCode:a,customerLat:s,customerLng:n},r=await this.repository.get("/profile/geo-free-location",{params:o}),l=r?.data?.data;if(!l)throw new Error("No geo-free location found with the provided inputs!");const c=l.profile_cities,u=c[t]?.city||"",d=c[t]?.state||"";return{profile:t,location:{name:u,region:d}}}async getPokeEntertainmentProfile(e,t,i){const a=await this.repository.get(`/profile/${i}`),s=a?.data?.data;if(!s)throw new Error("No entertainment profile found with the provided id!");return this.profileMapper.map(s)}async getCustomerProfile({customerUuid:e}){const t=await this.repository.get(`/profile/user/${e}`),i=t?.data?.data;if(!i)throw new Error("No customer profile found with the provided id!");return this.profileMapper.map(i)}async getCustomerProfilesCount({domainNames:e,filters:t,profileId:i,profileUuid:a}){const s=await this.repository.get("/profile/poke/customers/count",{params:{sites:e,filters:t,entertainment_profile_uuid:a},paramsSerializer:e=>r().stringify(e,{arrayFormat:"brackets"})});return s.data}async getAttachments(e){return(e.media||[])?.map((e=>({cdnHash:(0,g.a1)(e.url),displayUrl:e.url})))}async getCreditsBalance(e,t){const i=await this.repository.get(`/profile/${e.uuid}/credits/balance`,{headers:{"x-domain":t}});return+i.data.data}supportMultiDomainCount(){return!1}async searchCustomerProfilesByName(e){return[]}}},5262:function(e,t,i){"use strict";i.d(t,{Z:function(){return u}});var a=i(61369),s=i(88920),n=i(1027),o=i(27722);const r={messageCentral:s.Z,profileApi:n.Z};function l(e){const t=(0,o.F)().domainConfig(e);return t?.profileApiEnabled?"profileApi":"messageCentral"}const c={get(e){const t=l(e);if(!r[t])throw new Error(`Connector ${t} was not found`);return new r[t](e)}};class u{constructor(e){(0,a.Z)(this,"connector",void 0),this.connector=c.get(e)}async getEntertainmentProfiles({query:e,filters:t,page:i,limit:a,locales:s}){return this.connector.getEntertainmentProfiles({query:e,filters:t,page:i,limit:a,locales:s})}async getEntertainmentProfilesCount(e){return this.connector.getEntertainmentProfilesCount(e)}async getEntertainmentProfile(e,t){return this.connector.getEntertainmentProfile(e,t)}async getGeoFreeEntertainmentProfileLocation(e,t,i,a,s,n){return this.connector.getGeoFreeEntertainmentProfileLocation(e,t,i,a,s,n)}async getPokeEntertainmentProfile(e,t,i){return await this.connector.getPokeEntertainmentProfile(e,t,i)}async getCustomerProfile({customerProfileId:e,customerUuid:t}){return this.connector.getCustomerProfile({customerProfileId:e,customerUuid:t})}async getCustomerProfilesCount(e){return this.connector.getCustomerProfilesCount(e)}async getAttachments(e){return await this.connector.getAttachments(e)}async getCreditsBalance(e,t){return await this.connector.getCreditsBalance(e,t)}supportMultiDomainCount(){return this.connector.supportMultiDomainCount()}searchCustomerProfilesByName(e){return this.connector.searchCustomerProfilesByName(e)}}},97398:function(e,t,i){"use strict";i.d(t,{Z:function(){return B}});var a=i(20144),s=i(78345),n=i(34848),o=i(25497),r=i(15474),l=i(32139),c=i(62003),u=i(18946),d=i(3202),h=i(10033),m=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(n.Z,[t(d.Z,{staticClass:"login-background"},[t(c.Z,{staticClass:"fill-height",attrs:{id:"signinup-form"}},[t(h.Z,{attrs:{align:"center",justify:"center","no-gutters":""}},[t(l.Z,{attrs:{cols:i.layout.cols,sm:i.layout.sm,md:i.layout.md,lg:i.layout.lg}},[t(o.Z,{staticClass:"text-center pb-4",attrs:{elevation:"12"}},[t(r.EB,{staticClass:"justify-center pb-2 pt-6"},[t(u.Z,{attrs:{"max-height":"80","max-width":"80",src:i.imgSrc}})],1),e._t("default")],2)],1)],1)],1)],1)],1)},g=[],p=i(27722),f=i(84085),b=(0,a.defineComponent)({__name:"LoginLayout",setup(e){const t=(0,a.computed)((()=>(0,p.F)().getLogoImageFilename())),i=(0,f.yj)(),s=(0,a.computed)((()=>{switch(i.path){case"/login":return{cols:12,sm:8,md:8,lg:6};case"/totp-register":return{cols:12,sm:8,md:12,lg:8};case"/totp-settle-down":return{cols:12,sm:12,md:10,lg:8};case"/totp":return{cols:12,sm:8,md:8,lg:6};default:return{cols:12,sm:8,md:8,lg:6}}}));return{__sfc:!0,imgSrc:t,route:i,layout:s}}}),y=b,v=i(1001),C=(0,v.Z)(y,m,g,!1,null,"a61482ba",null),_=C.exports,k=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(n.Z,[t("AppHeader"),t(d.Z,[e._t("default")],2),e.isAnnouncementDialogShown?t("AnnouncementsDialog"):e._e()],1)},w=[],P=i(14024),A=i(46104),M=i(69876),T=i(78397),S=(0,a.defineComponent)({name:"MainLayout",components:{AppHeader:P.Z,AnnouncementsDialog:A.Z},computed:{...(0,M.rn)(T.a,["isAnnouncementDialogShown"])}}),I=S,x=(0,v.Z)(I,k,w,!1,null,null,null),E=x.exports,L=i(5412),R=i(67356),F=i(67473),O=i(67721),D=i(94677);i(34155);a["default"].use(s.ZP),a["default"].use(R.Z);const N=[{path:"/",name:"Home",beforeEnter:(e,t,i)=>{U(i)}},{path:"/login",name:"Login",meta:{layout:_},component:()=>i.e(2473).then(i.bind(i,72473))},{path:"/mfa",name:"Multi-Factor Authentication",meta:{layout:E,requiresAuth:!0},component:()=>i.e(926).then(i.bind(i,60926))},{path:"/totp",name:"TOTP Authentication",meta:{layout:_},component:()=>i.e(3277).then(i.bind(i,3277))},{path:"/totp-register",name:"Register TOTP",meta:{layout:_,requiresAuth:!0},component:()=>i.e(8852).then(i.bind(i,18852))},{path:"/totp-settle-down",name:"Totp Settle Down",meta:{layout:_,requiresAuth:!0},component:()=>i.e(5810).then(i.bind(i,65810))},{path:"/calendar",name:"Calendar",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>i.e(6031).then(i.bind(i,6031))},{path:"/chat",name:"Chat",meta:{layout:E,requiresAuth:!0},component:()=>i.e(8192).then(i.bind(i,88192)),redirect:L.Z.hasRole(F.G7.Admin)?"/chat/list":"/chat/lobby",children:[{path:"lobby",name:"Chat Lobby",meta:{layout:E,requiresAuth:!0},component:()=>i.e(259).then(i.bind(i,90259))},{path:"list",name:"Unclaimed Chats List",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(8508),i.e(9621)]).then(i.bind(i,3326))},{path:"claimed",name:"Claimed Chat",meta:{layout:E,requiresAuth:!0},component:()=>Promise.all([i.e(6502),i.e(5697),i.e(6963),i.e(5716)]).then(i.bind(i,17143))}]},{path:"/pokes",name:"pokes",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>Promise.all([i.e(9195),i.e(2213)]).then(i.bind(i,42715)),redirect:L.Z.hasRole(F.G7.Admin)?"/pokes/schedule":"/pokes/new",children:[{path:"schedule",name:"schedule",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6081),i.e(875),i.e(4682)]).then(i.bind(i,40312))},{path:"new",name:"new-poke",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>Promise.all([i.e(6502),i.e(6081),i.e(9195),i.e(5697),i.e(875),i.e(9051),i.e(2414)]).then(i.bind(i,63835))},{path:"queue",name:"queue-poke",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(4223)]).then(i.bind(i,62018))},{path:":geo/:pokeId",name:"show-poke",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6081),i.e(875),i.e(4682)]).then(i.bind(i,40312))},{path:":geo/:pokeId/edit",name:"edit-poke",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Poker]},component:()=>Promise.all([i.e(6502),i.e(6081),i.e(9195),i.e(5697),i.e(875),i.e(9051),i.e(2414)]).then(i.bind(i,63835))}]},{path:"/announcements",name:"Announcements edit list",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>i.e(6518).then(i.bind(i,96518))},{path:"/statistics",name:"statistics",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager,F.G7.Poker,F.G7.AbuseChecker]},component:()=>Promise.all([i.e(9195),i.e(9500)]).then(i.bind(i,51373)),redirect:L.Z.hasRole(F.G7.Manager)?"/statistics/chat":L.Z.hasRole(F.G7.Poker)?"/statistics/pokers":L.Z.hasRole(F.G7.AbuseChecker)?"/statistics/live-conversations":"/statistics/operators",children:[{path:"operators",name:"statistics-operators",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>i.e(5060).then(i.bind(i,55060))},{path:"queues",name:"statistics-queues",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(2637),i.e(5548)]).then(i.bind(i,17685))},{path:"scores",name:"statistics-scores",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6493)]).then(i.bind(i,2922))},{path:"messages",name:"statistics-messages",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6680)]).then(i.bind(i,83159))},{path:"chat",name:"statistics-chat-quality",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6081),i.e(7359)]).then(i.bind(i,89978)),children:[{path:":geo/:id",name:"statistics-chat-quality-details",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(6502),i.e(5697),i.e(6963),i.e(3698)]).then(i.bind(i,53698))}]},{path:"live-conversations",name:"statistics-live-conversation",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager,F.G7.AbuseChecker]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(7889)]).then(i.bind(i,95303)),children:[{path:":geo/:id",name:"statistics-live-conversations-details",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager,F.G7.AbuseChecker]},component:()=>Promise.all([i.e(6502),i.e(5697),i.e(6963),i.e(3698)]).then(i.bind(i,53698))}]},{path:"pokes",name:"statistics-poke-quality",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6081),i.e(3868)]).then(i.bind(i,50431))},{path:"pokers",name:"statistics-poker-quality",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager,F.G7.Poker]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6081),i.e(1272)]).then(i.bind(i,13804))}]},{path:"/personal-stats",name:"personalStatistics",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Operator]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(8674)]).then(i.bind(i,26442))},{path:"/personal-settings",name:"personalSettings",meta:{layout:E,requiresAuth:!0},component:()=>i.e(2678).then(i.bind(i,62678))},{path:"/abuse",redirect:L.Z.hasRole(F.G7.AbuseChecker)?"/abuse/check":L.Z.hasRole(F.G7.Manager)?"/abuse/reported-messages":"/abuse/list",name:"Abuse",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.AbuseChecker,F.G7.Manager]},component:()=>Promise.all([i.e(9195),i.e(1458)]).then(i.bind(i,84995)),children:[{path:"check",name:"abuse-message-check",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.AbuseChecker,F.G7.Developer]},component:()=>i.e(7269).then(i.bind(i,17269))},{path:"list",name:"abuse-list",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(4607)]).then(i.bind(i,18058))},{path:"words",name:"abuse-words-list",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6502),i.e(4866)]).then(i.bind(i,36472))},{path:"history",name:"abuse-messages-history",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(9662)]).then(i.bind(i,84557))},{path:"remediation",name:"abuse-remediation",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(1931)]).then(i.bind(i,59855))},{path:"reported-messages",name:"reported-messages",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(6380)]).then(i.bind(i,39157)),children:[{path:":geo/:id",name:"abuse-reported-messages-details",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager]},component:()=>Promise.all([i.e(6502),i.e(5697),i.e(6963),i.e(3698)]).then(i.bind(i,53698))}]}]},{path:"/trigger",name:"Triggers",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin]},component:()=>i.e(1966).then(i.bind(i,61966))},{path:"/connectedOperators",name:"ConnectedOperators",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Admin,F.G7.Manager,F.G7.Developer]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(1857)]).then(i.bind(i,44949))},{path:"/debug",name:"Debug",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Developer]},component:()=>Promise.all([i.e(2637),i.e(2297),i.e(9195),i.e(9051),i.e(9341)]).then(i.bind(i,77229))},{path:"/uikit",name:"UIKit",meta:{layout:E,requiresAuth:!0,requiresRole:[F.G7.Developer]},component:()=>i.e(766).then(i.bind(i,40766)),children:[{path:"menu",name:"Main Menu UI kit",component:()=>i.e(1217).then(i.bind(i,11217))},{path:"poke",name:"Poke UI kit",component:()=>i.e(9200).then(i.bind(i,99200))},{path:"avatars",name:"Default profile avatars",component:()=>i.e(110).then(i.bind(i,30110))},{path:"icons",name:"All icons",component:()=>i.e(5749).then(i.bind(i,25749))},{path:"announcements",name:"Announcements for operators",component:()=>i.e(878).then(i.bind(i,40878)),meta:{layout:E}},{path:"unclaimed",name:"Unclaimed chats list",component:()=>Promise.all([i.e(8508),i.e(2593)]).then(i.bind(i,59724)),meta:{layout:E}},{path:"chat",name:"Chat page",component:()=>Promise.all([i.e(6502),i.e(5697),i.e(6963),i.e(7989)]).then(i.bind(i,37989)),meta:{layout:E}},{path:"error",name:"Error reporting",component:()=>i.e(4485).then(i.bind(i,44485)),meta:{layout:E}}]},{path:"*",name:"NotFound",meta:{layout:E},component:()=>i.e(53).then(i.bind(i,70053))}],Z=new s.ZP({mode:"history",base:"/",routes:N});function U(e){const t=(0,D.m)(O.Z);t.isUserSessionAuthorized?L.Z.hasRole(F.G7.Admin)?e("/chat"):L.Z.hasRole(F.G7.Poker)?e("/pokes"):L.Z.hasRole(F.G7.Manager)?e("/statistics"):L.Z.hasRole(F.G7.Operator)?e("/chat/lobby"):L.Z.hasRole(F.G7.AbuseChecker)?e("/abuse/check"):e():e("/login")}const G=(e="/favicons/favicon.ico")=>{const t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.setAttribute("href",e)};Z.beforeEach((async(e,t,i)=>{G(e.meta.favicon);const a=e.matched.some((e=>e.meta.requiresAuth)),s=e.meta.requiresRole,n=(0,D.m)(O.Z),o=await n.getCurrentUser(),r=n.forceMfa,l=n.hasMfaEnabled;if("/"===e.path)return void U(i);if(!a)return void i();if(!o){const t=["/totp","/totp-register"],a=t.includes(e.path)?{}:{redirect:e.fullPath};return void i({path:"/login",query:a})}const c="totp"===n.user.claims?.firebase.sign_in_second_factor,u=!0===n.user.claims?.forcedTotp;if(!c&&u)return"/totp-register"===e.path?i():i("/totp-register");if("/login"!==e.path)l||!r||u||"/mfa"===e.path?!s||L.Z.hasAnyRole(s)?i():i("/"):i("/mfa");else{const{redirect:t}=e.query,a=t||"/";i(a)}}));var B=Z},7442:function(e,t,i){"use strict";var a=i(9669),s=i.n(a),n=i(83977),o=i(74864);const r=s().create({baseURL:"https://claim-service-dot-phoenix-central-prod.ew.r.appspot.com"});r.interceptors.request.use((async e=>{const t=(0,n.Mq)(),i=await((0,o.v0)(t).currentUser?.getIdToken());return e.headers.Authorization=`Bearer ${i}`,e}),(e=>Promise.reject(e))),t.Z={operators:{async getAll(e={}){const t=await r.get("/operators",e);return t.data},async connected(e={}){const t=await r.get("/operators/connected",e);return t.data}},redis:{async getKeys(e,t={}){const i=await r.get(`/redis/keys/${e}`,t);return i.data},async getValuesForKey(e,t={}){const i=await r.get(`/redis/values/${e}`,t);return i.data},async deleteKey(e,t={}){const i=await r.delete(`/redis/keys/${e}`,t);return i.data},async clearCache(e={}){const t=await r.delete("/redis/cache",e);return t.data},async pools(e,t,i={}){const a=await r.get(`/redis/pools/geo/${e}/tenant/${t}`,i);return a.data},async deleteUserKey(e={}){const t=await r.delete("/redis/key",e);return t.data}}}},54057:function(e,t,i){"use strict";var a=i(83977),s=i(74864),n=i(9669),o=i.n(n),r=i(11499);const l=o().create({baseURL:"https://api.chathomebase.com"});l.interceptors.request.use((async e=>{const t=["/login","/firebase/projects/central",/^\/tenant\/.*\/info$/],i=t.some((t=>e.url.match(t)));if(!i){const t=(0,a.Mq)();e.headers.Authorization=`Bearer ${await(0,s.v0)(t).currentUser.getIdToken()}`,(0,r.n)(e)}return e})),t.Z=l},45519:function(e,t,i){"use strict";var a=i(38381),s=i(5262),n=i(67473),o=i(32090),r=i(60359);const l="https://cdn.prod.phnx.review";t.Z={async getPokeEntertainmentProfile(e,t,i){try{const a=new s.Z(t);return await a.getPokeEntertainmentProfile(e,t,i)}catch(a){(0,r.G)().addNotification({message:`Failed to retrieve entertainment profile with id ${e}. ${a}`,type:n.j_.Error})}},getAvatarUrl(e,t){return"legacy"===t?e.avatar:`${l}/${e.avatar}`},fullLocation(e){const t=e.geo_type,i=e.geo_iso,s=e.geo&&e.geo.length?e.geo[0]:null;if("anonymous"==t)return i?(0,a.Z)(i):"not set";if(!s)return"not set";const n=s.label&&"null"!=s.label.toLowerCase()?s.label:s.locality,o=s.region1;return n&&o?`${n}, ${o}`:n??o},isGeoFreeProfile(e){return e.geo_free===o.gC}}},25282:function(e,t,i){"use strict";i.d(t,{C:function(){return g}});i(57658);var a=i(69876),s=i(67473),n=i(7710),o=i(21056),r=i(30920),l=i(27484),c=i.n(l),u=i(94677),d=i(60359);function h(e,t,i){return t===e&&c()(new Date).isBefore(c()(1e3*i.seconds).add(n.yY,"minute"))}function m(e){return"chat"in e}const g=(0,a.Q_)("abuse",{state:()=>({initialized:!1,words:[],recipients:{},abuseMessages:[],abusePokes:[],claimedAbuseMessage:null,claimedAbusePoke:null,abuseHistoryMessages:[],firstAbuseHistoryMessage:null,lastAbuseHistoryMessage:null}),getters:{alreadyClaimedFlaggedMessage:e=>e.abuseMessages.find((e=>h((0,u.m)().user.uid,e.message.abuse.claimedBy,e.message.abuse.claimedAt))),alreadyClaimedFlaggedPoke:e=>e.abusePokes.find((e=>h((0,u.m)().user.uid,e.abuse.claimedBy,e.abuse.claimedAt))),claimedAt:e=>e.claimedAbuseMessage?e.claimedAbuseMessage.message.abuse?.claimedAt:e.claimedAbusePoke?e.claimedAbusePoke.abuse?.claimedAt:void 0,uniqueLocalesInAbuseWords:e=>[...new Set(e.words.map((e=>e.locale)).filter(Boolean))],abuseMessageListItems:e=>e.abuseMessages.map((e=>({type:o.OR,customer:{id:e.chat.customer.uid,name:e.chat.customer.name},profile:e.chat.profile,agent:{id:e.message.senderId,name:e.message.senderName},id:e.chat.id,abuse:e.message.abuse,message:{content:e.message.content,attachment:e.message.attachment},createdAt:e.message.createdAt,abuseMessage:e}))),abusePokeListItems:e=>e.abusePokes.map((e=>({type:o.ur,customer:{id:"-",name:"-"},profile:e.profile,agent:e.agent,id:e.id,abuse:e.abuse,message:e.message,createdAt:e.createdAt,abusePoke:e}))),sortedAbuseQueue:e=>t=>[...e.sortedFlaggedMessages(t),...e.sortedFlaggedPokes(t)],nextFlaggedAbuseToCheck(){return this.sortedAbuseQueue()[0]},abuseList(){return[...this.abuseMessageListItems,...this.abusePokeListItems]},sortedFlaggedPokes:e=>t=>{const i=e.abusePokes.filter((e=>!e.abuse?.claimedBy)),a=e.abusePokes.filter((e=>e.abuse?.claimedBy&&c()(t||new Date).isAfter(c()(1e3*e.abuse.claimedAt.seconds).add(n.yY,"minute"))));return[...i,...a].sort(((e,t)=>e.createdAt<t.createdAt?-1:1))},sortedFlaggedMessages:e=>t=>{const i=e.abuseMessages.filter((e=>!e.message?.abuse?.claimedBy)),a=e.abuseMessages.filter((e=>e.message?.abuse?.claimedBy&&c()(t||new Date).isAfter(c()(1e3*e.message.abuse.claimedAt.seconds).add(n.yY,"minute"))));return[...i,...a].sort(((e,t)=>e.message.createdAt<t.message.createdAt?-1:1))},hasClaimedAbuse(){return Boolean(this.alreadyClaimedFlaggedMessage)||Boolean(this.alreadyClaimedFlaggedPoke)}},actions:{init(){this.initialized=!0},updateAbuseWord(e){const t=this.words.find((t=>t.id===e.id));t?Object.assign(t,e):this.words.push(e)},removeAbuseWord(e){const t=this.words.map((e=>e.id)).indexOf(e.id);t>-1&&this.words.splice(t,1)},addAbuseMessage(e){this.abuseMessages?.some((t=>t.message.id===e.message.id))||this.abuseMessages.push(e)},addAbuseWord(e){this.words.push(e)},updateAbuseMessage(e){const t=this.abuseMessages.findIndex((t=>t.message.id===e.message.id));t>-1?this.abuseMessages[t]=e:this.abuseMessages.push(e),this.claimedAbuseMessage&&this.claimedAbuseMessage.message.id===e.message.id&&(this.claimedAbuseMessage=e)},removeAbuseMessage(e){const t=this.abuseMessages.map((e=>e.message.id)).indexOf(e.message.id);t>-1&&this.abuseMessages.splice(t,1)},async claimNextFlaggedMessage(){if(this.claimedAbuseMessage){const e=this.abuseMessages.map((e=>e.message.id)).indexOf(this.claimedAbuseMessage.message.id);e>-1&&this.abuseMessages.splice(e,1)}if(this.claimedAbusePoke){const e=this.abusePokes.map((e=>e.id)).indexOf(this.claimedAbusePoke.id);e>-1&&this.abusePokes.splice(e,1)}if(this.claimedAbuseMessage=null,this.claimedAbusePoke=null,this.alreadyClaimedFlaggedMessage)return void(this.claimedAbuseMessage=this.alreadyClaimedFlaggedMessage);if(this.alreadyClaimedFlaggedPoke)return void(this.claimedAbusePoke=this.alreadyClaimedFlaggedPoke);const e=this.nextFlaggedAbuseToCheck;if(e)try{if(m(e))return await r.m.dispatch("abuseMessages",e.chat.locale,"claim",{abuseMessage:e,operatorId:(0,u.m)().user.uid}),void(this.claimedAbuseMessage=e);await r.m.dispatch("abusePokes",e.locale,"claim",{abusePoke:e,operatorId:(0,u.m)().user.uid}),this.claimedAbusePoke=e}catch(t){(0,d.G)().addNotification({message:t.toString(),type:s.j_.Error})}},async unclaimAbuseMessage(){try{if(this.claimedAbuseMessage)return await r.m.dispatch("abuseMessages",this.claimedAbuseMessage.chat.locale,"unclaim",{abuseMessage:this.claimedAbuseMessage}),void(this.claimedAbuseMessage=null);this.claimedAbusePoke&&(await r.m.dispatch("abusePokes",this.claimedAbusePoke.locale,"unclaim",{abusePoke:this.claimedAbusePoke}),this.claimedAbusePoke=null)}catch(e){(0,d.G)().addNotification({message:e.toString(),type:s.j_.Error})}},async markAsAbuse(){this.claimedAbuseMessage&&await r.m.dispatch("abuseMessages",this.claimedAbuseMessage.chat.locale,"markAsAbuse",{abuseMessage:{...this.claimedAbuseMessage},operatorId:(0,u.m)().user.uid}),this.claimedAbusePoke&&await r.m.dispatch("abusePokes",this.claimedAbusePoke.locale,"markAsAbuse",{abusePoke:{...this.claimedAbusePoke},operatorId:(0,u.m)().user.uid}),this.claimNextFlaggedMessage()},async markAsSafe(){this.claimedAbuseMessage&&await r.m.dispatch("abuseMessages",this.claimedAbuseMessage.chat.locale,"markAsSafe",{abuseMessage:{...this.claimedAbuseMessage},operatorId:(0,u.m)().user.uid}),this.claimedAbusePoke&&await r.m.dispatch("abusePokes",this.claimedAbusePoke.locale,"markAsSafe",{abusePoke:{...this.claimedAbusePoke},operatorId:(0,u.m)().user.uid}),this.claimNextFlaggedMessage()},addAbusePoke(e){this.abusePokes?.some((t=>t.id===e.id))||this.abusePokes.push(e)},updateAbusePoke(e){const t=this.abusePokes.findIndex((t=>t.id===e.id));-1!==t?this.abusePokes[t]=e:this.abusePokes.push(e),this.claimedAbusePoke&&this.claimedAbusePoke.id===e.id&&(this.claimedAbusePoke=e)},removeAbusePoke(e){const t=this.abusePokes.map((e=>e.id)).indexOf(e.id);t>-1&&this.abusePokes.splice(t,1)}}})},78397:function(e,t,i){"use strict";i.d(t,{a:function(){return d}});var a=i(67473),s=i(30920),n=i(36968),o=i.n(n),r=i(94677),l=i(60359),c=i(69876);function u(e){return Object.fromEntries(new Map(Object.entries(e).sort(((e,t)=>e[1].updatedAt.seconds-t[1].updatedAt.seconds))))}const d=(0,c.Q_)("announcements",{state:()=>({isAnnouncementsLoadingDone:!1,announcementsPerLocale:{},announcementsTopics:{},isAnnouncementDialogShown:!1}),getters:{announcementsCount(e){let t=0;const i=Object.values(e.announcementsPerLocale);for(const a of i){const e=Object.values(a);for(const i of e)t+=Object.keys(i).length}return t}},actions:{async getAnnouncementsForOperator(){try{await Promise.all((0,r.m)().user.geos.map((async e=>{await s.m.dispatch("announcements",e,"getAnnouncements",null)}))),this.isAnnouncementsLoadingDone=!0}catch(e){(0,l.G)().addNotification({message:e.toString(),type:a.j_.Error})}},setAnnouncementsLocales(e){e?.forEach((e=>{this.announcementsPerLocale[e]||={},this.announcementsTopics[e]||={}}))},setAnnouncement(e){o()(this.announcementsPerLocale,[e.locale??"",e.topicId??"",e.id],e),Object.keys(this.announcementsPerLocale).forEach((e=>{Object.keys(this.announcementsPerLocale[e]).forEach((t=>{this.announcementsPerLocale[e][t]=u(this.announcementsPerLocale[e][t])}))})),this.announcementsPerLocale={...this.announcementsPerLocale}},setAnnouncementTopic(e){o()(this.announcementsTopics,[e.locale,e.id],e),this.announcementsTopics={...this.announcementsTopics}},removeAnnouncement(e){delete this.announcementsPerLocale[e.locale??""]?.[e.topicId??""]?.[e.id],this.announcementsPerLocale={...this.announcementsPerLocale}},removeAnnouncementTopic(e){delete this.announcementsTopics[e.locale][e.id],this.announcementsTopics={...this.announcementsTopics}},cleanAnnouncementsByLocale(e){this.announcementsPerLocale={...this.announcementsPerLocale,[e]:{}}},cleanAnnouncementsTopicsByLocale(e){delete this.announcementsTopics[e]}}})},30532:function(e,t,i){"use strict";i.d(t,{K:function(){return c}});var a=i(69876),s=i(67473),n=i(5262),o=i(60359),r=i(67586),l=i(85694);const c=(0,a.Q_)("attachments",{state:()=>({attachments:[]}),getters:{},actions:{async loadAttachments(e,t){try{const i=new n.Z(e.domain);this.attachments=await i.getAttachments(t)}catch(i){(0,o.G)().addNotification({message:`Failed to retrieve attachments for profile with id: ${t?.id}.`,type:s.j_.Error})}this.attachments.some((e=>(0,l.aw)(e,(0,r.U)().mainPokeMessage.attachment)))||(0,r.U)().resetMainAttachment()},clearAttachments(){this.attachments=[]}}})},94677:function(e,t,i){"use strict";i.d(t,{m:function(){return k}});i(57658);var a=i(69876),s=i(67721),n=i(83977),o=i(74864),r=i(67473),l=i(97398),c=i(5412),u=i(30920),d=i(15579),h=i(32090),m=i(60359),g=i(27722),p=i(16182),f=i(78397);const b=15,y=6e4,v="google-recaptcha-container";let C=null;function _(e){const t=[r.G7.Admin,r.G7.Manager,r.G7.Operator,r.G7.Poker,r.G7.AbuseChecker];return e.some((e=>t.includes(e)))}const k=(0,a.Q_)("authenticator",{state:()=>({isUserInitialized:!1,token:"",forceMfa:!1,hasMfaEnabled:!1,user:{},password:{hasReset:!1,requestedAt:new Date},mfaVerificationId:"",tenant:"",resolver:null}),getters:{isUserSessionAuthorized({user:e,forceMfa:t,hasMfaEnabled:i}){return!!e.uid&&(!t||i)},localesFilteredByDomains(){return(0,g.F)().domains?(0,g.F)().domains.reduce(((e,t)=>(e.includes(t.locale)||!k().user.geos.includes(t.locale)||e.push(t.locale),e)),[]):[]}},actions:{setPasswordReset(){this.password.hasReset=!0,this.password.requestedAt=new Date,localStorage.setItem("passwordReset",JSON.stringify(this.password))},clearPasswordReset(){this.password.hasReset=!1,localStorage.removeItem("passwordReset")},initiatePasswordReset(){const e=JSON.parse(localStorage.getItem("passwordReset"));e&&(e.requestedAt=new Date(e.requestedAt)),this.password=e||this.password},async initiateUser(e){const t=await e.getIdTokenResult(!0),i=t.claims.roles||[];if(!_(i)){(0,m.G)().addNotification({message:"You do not have permission to access this domain.",type:r.j_.Error});const e=(0,n.Mq)(),t=(0,o.v0)(e);(0,o.w7)(t)}const a={uid:e.uid,displayName:e.displayName,email:e.email,photoUrl:e.photoURL,score:t.claims?.score,roles:i,geos:t.claims.geos,claims:t.claims,companyId:t.claims.company};c.Z.setRoles(i),this.user=a,this.tenant=e.tenantId,this.token=t.token,this.isUserInitialized=!0,this.forceMfa=t.claims.forceMfa??!1;const s=(0,n.Mq)(),l=(0,o.v0)(s);this.hasMfaEnabled=(0,o.JG)(l.currentUser).enrolledFactors.length>0,await(0,g.F)().initAppConfig();try{await u.m.init()}catch(h){(0,m.G)().addNotification({message:`${(0,d.h)(h.code)}`,type:r.j_.Error})}},setResolver(e){this.resolver=e},unsetSocketConnection(){(0,p.T)().disconnect()},setSocketConnection(e=!1){const t=(0,n.Mq)(),i=(0,o.v0)(t);(0,o.MX)(i,(async t=>{if(!t)return void(0,p.T)().disconnect();const i=await t.getIdTokenResult(),a=i.claims?.roles??[],s=a.includes(r.G7.Operator)&&!a.includes(r.G7.Admin);e||s?(0,p.T)().connect(i.token):(0,p.T)().disconnect()}))},async authenticate(){const e=await this.getCurrentUser();e&&await this.initiateUser(e)},async login(e){try{const t=(0,n.Mq)(),i=(0,o.v0)(t),a=await(0,o.e5)(i,e.email,e.password),s=a.user;return await this.initiateUser(s),c.Z.hasRole(r.G7.Operator)&&((0,f.a)().isAnnouncementDialogShown=!0),localStorage.setItem("selectedGeo",JSON.stringify(null)),s}catch(t){if("auth/multi-factor-auth-required"===t.code)throw t;return void(0,m.G)().addNotification({message:(0,d.h)(t.code),type:r.j_.Error})}},getCurrentUser(){return new Promise(((e,t)=>{const i=(0,n.Mq)(),a=(0,o.v0)(i),s=(0,o.Aj)(a,(t=>{s(),e(t)}),t)}))},async signOut(){const e=(0,n.Mq)(),t=(0,o.v0)(e);this.unsetSocketConnection(),await(0,o.w7)(t),u.m.teardown(),(0,s.j)(),this.destroyRecaptchaElement();const i="/login";l.Z.currentRoute.path!==i&&await l.Z.push(i)},async resetPassword(e){this.initiatePasswordReset();const t=new Date(Date.now()-y*b);if(this.password.hasReset&&this.password.requestedAt<=t&&this.clearPasswordReset(),this.password.hasReset&&this.password.requestedAt>t)return(0,m.G)().addNotification({message:"You have to wait 15 minutes before another email can be send.",type:r.j_.Error}),!1;const i=(0,n.Mq)(),a=(0,o.v0)(i);(0,o.LS)(a,e).then((()=>(this.setPasswordReset(),(0,m.G)().addNotification({message:"An email will be sent to your address with a password reset option.",type:r.j_.Success}),!0))).catch((e=>(this.clearPasswordReset(),(0,m.G)().addNotification({message:`${(0,d.h)(e.code)}`,type:r.j_.Error}),!1)))},async setMfaPhoneNumber(e){const t=(0,n.Mq)(),i=(0,o.v0)(t),a=(0,o.JG)(i.currentUser),s=await a.getSession(),l={phoneNumber:e,session:s},c=new o.RO(i);try{await this.initiateRecaptchaVerifier();const e=await c.verifyPhoneNumber(l,C);return this.mfaVerificationId=e,(0,m.G)().addNotification({message:"Validation code sent to the registered mobile number.",type:r.j_.Success}),!0}catch(u){return(0,m.G)().addNotification({message:`${(0,d.h)(u.code)}`,type:r.j_.Error}),[h.LN,h.kg,h.vv,h.PA].includes(u.code)&&this.signOut(),!1}},async setMfaCode(e){const t=(0,n.Mq)(),i=(0,o.v0)(t),a=o.RO.credential(this.mfaVerificationId,e),s=o.ww.assertion(a),r=(0,o.JG)(i.currentUser);await r.enroll(s,"Phone")},async initiateLoginWithMobileMfa(e){const t=e.hints[0],i={multiFactorHint:t,session:e.session},a=(0,n.Mq)(),s=(0,o.v0)(a),r=new o.RO(s);await this.initiateRecaptchaVerifier(),this.mfaVerificationId=await r.verifyPhoneNumber(i,C)},async loginWithMfa({verificationCode:e,resolver:t}){const i=o.RO.credential(this.mfaVerificationId,e),a=o.ww.assertion(i),s=await t.resolveSignIn(a);await this.initiateUser(s.user)},async initiateRecaptchaVerifier(){const e=(0,o.v0)((0,n.Mq)());if(C)return C;this.prepareRecaptchaElement();try{return C=new o.lI(v,{size:"invisible","expired-callback":()=>{this.destroyRecaptchaElement()}},e),C}catch(t){(0,m.G)().addNotification({message:`${(0,d.h)(t.code)}`,type:r.j_.Error})}},prepareRecaptchaElement(){document.getElementById(v)||document.body.insertAdjacentHTML("beforeend",`<div id="${v}"></div>`)},destroyRecaptchaElement(){C=null,document.getElementById(v)?.remove()}}})},73222:function(e,t,i){"use strict";i.d(t,{a:function(){return f}});i(57658);var a=i(69876),s=i(67473),n=i(30920),o=i(36968),r=i.n(o),l=i(5412),c=i(21056),u=i(94677),d=i(60359),h=i(27722),m=i(54057);function g(e){return Object.entries(e).sort((([,e],[,t])=>+t.createdAt?.toDate()-+e.createdAt?.toDate())).reduce(((e,[t,i])=>({...e,[t]:i})),{})}function p(e){const t=[];for(const[i,a]of Object.entries(e)){const e=g(a),s=Object.keys(e)[0],n=e[s].createdAt?.toDate();t.push({category:i,sortedLogs:e,lastUpdateAt:n})}return t.sort(((e,t)=>+t.lastUpdateAt-+e.lastUpdateAt)),t.reduce(((e,t)=>({...e,[t.category]:t.sortedLogs})),{})}const f=(0,a.Q_)("chat",{state:()=>({claimedChat:null,unclaimedChats:[],chats:[],currentMessages:[],categorizedLogs:{customer:{},entertainmentProfile:{}},waitingForClaim:!1,initialized:!1,hasBeginningMessage:!1,isLoadingUnclaimedChats:!1,suggestions:[]}),getters:{reversedCurrentMessages:e=>[...e.currentMessages].reverse(),sortedUnclaimedChats:e=>[...e.unclaimedChats].sort(((e,t)=>Math.sign(e.lastMessage.createdAt.seconds-t.lastMessage.createdAt.seconds))),sortedCategorizedLogs(e){return{customer:p(e.categorizedLogs.customer),entertainmentProfile:p(e.categorizedLogs.entertainmentProfile)}},isLegacyChat:e=>"legacy"===e.claimedChat.origin?.type,countLogbooks:e=>{const t=e.categorizedLogs?.customer?Object.keys(e.categorizedLogs.customer).reduce(((t,i)=>t+Object.keys(e.categorizedLogs.customer[i]).length),0):0,i=e.categorizedLogs?.entertainmentProfile?Object.keys(e.categorizedLogs.entertainmentProfile).reduce(((t,i)=>t+Object.keys(e.categorizedLogs.entertainmentProfile[i]).length),0):0;return{customer:t,entertainmentProfile:i}},domainConfiguration:e=>(0,h.F)().domainConfig(e.claimedChat.domain),hasSuggestions(e){const t=e.claimedChat?.trigger?.type,i=t&&c.Zo.has(t);return this.domainConfiguration.suggestionsEnabled&&l.Z.hasAnyRole([s.G7.BetaAccess,s.G7.ChatSuggestions])&&!l.Z.hasRole(s.G7.OperatorAgentOnly)&&!i}},actions:{init(){this.initialized=!0},async sendMessage(e,t,i,a){const s={...e,senderType:"agent",senderId:(0,u.m)().user.uid};this.addMessage(s),await m.Z.post("/message/send",{chatDocumentId:t,message:s,domain:i,metadata:a})},async reGenerateSuggestion(e,t,i,a,s,n){await m.Z.post("/suggestions/reGenerate",{chatId:e,messageId:t,domain:i,locale:a,selectedImage:s,fullAI:n})},async claimChat(e){return await m.Z.post(`/chats/${e.id}/claim`,{domain:e.domain,messagePool:e.lastMessageMessagePool}).then((()=>{this.waitingForClaim=!0,this.chatToBeClaimedListener(e)})).catch((e=>{(0,d.G)().addNotification({message:`Failed to claim chat. ${e}`,type:s.j_.Error})}))},chatToBeClaimedListener(e){n.m.dispatch("chat",e.locale,"waitForClaim",{chatId:e.id})},async deleteMessages({messages:e,locale:t}){await n.m.dispatch("chat",t,"deleteMessages",e)},async updateMessage({message:e,locale:t}){await n.m.dispatch("chat",t,"updateMessage",e)},resetChatState(e){this.currentMessages=[],this.resetCurrentLogs(),this.updateClaimedChat(e,"removed")},addSuggestion(e){this.suggestions.push(e)},updateSuggestion(e){const t=this.suggestions.findIndex((t=>t.id===e.id));this.suggestions.splice(t,1,{...e,id:e.id})},removeSuggestion(e){const t=this.suggestions.findIndex((t=>t.id===e.id));this.suggestions.splice(t,1)},modifyMessage(e){const t=this.currentMessages.find((t=>t.id===e.id));t?Object.assign(t,e):this.currentMessages.push(e)},addMessage(e){this.currentMessages.unshift(e)},removeMessage(e){const t=this.currentMessages.map((e=>e.id)).indexOf(e.id);t>-1&&this.currentMessages.splice(t,1)},updateClaimedChat(e,t){switch(t){case"added":this.claimedChat=e;break;case"modified":this.claimedChat={...this.claimedChat,...e};break;case"removed":this.claimedChat&&this.claimedChat.id===e.id&&(this.claimedChat=null);break;default:throw new Error(`Unknown action: ${t}`)}},pushUnclaimedChat(e){e&&e.id&&e.customer&&e.profile&&e.lastMessage&&e.domain&&this.unclaimedChats.push(e)},updateUnlaimedChat(e,t){const i=this.unclaimedChats.find((t=>t.id===e.id)),a=this.unclaimedChats.findIndex((t=>t.id===e.id));switch(t){case"added":this.pushUnclaimedChat(e);break;case"modified":i?Object.assign(i,e):this.pushUnclaimedChat(e);break;case"removed":a>-1&&this.unclaimedChats.splice(a,1);break;default:throw new Error(`Unknown action: ${t}`)}},resetCurrentLogs(){this.categorizedLogs={customer:{},entertainmentProfile:{}}},setLog(e){const t=e.concerning,i=e.category||"other",a=e.id;r()(this.categorizedLogs,[t,i,a],{...e}),this.categorizedLogs={...this.categorizedLogs}}}})},27722:function(e,t,i){"use strict";i.d(t,{F:function(){return l}});var a=i(69876),s=i(59875);const n=i(30209);function o(e){return n(`./${e}.svg`)}var r=i(54057);const l=(0,a.Q_)("config",{state:()=>({variables:{central:null,profileBaseUrl:"",regional:null},initialized:!1,domains:[],project:null,pokeConfig:null,appearance:{title:"",logo:""}}),getters:{domainConfig:e=>t=>{const i=e.domains?.find((e=>e.domain===t));if(!i)throw new Error(`Can't find domainConfiguration with claimedChat.domain: ${t} and domains: ${e.domains?.map((e=>e.domain))}`);return i},currentTenantAlias:e=>{const t=e.domains?.find((e=>e.tenantAlias));return t?.tenantAlias||null},domainConfigs:e=>t=>(t||[]).map((t=>e.domains?.find((e=>e.domain===t)))).filter(Boolean),regions:e=>Object.keys(e.variables.regional),appTitle:e=>e.appearance.title??"",getLogoImageFilename:e=>(t="")=>{if(!e.appearance.logo)return o("fallback-logo");try{return o(`${e.appearance.logo}${t}`)}catch(i){console.warn("Can't find logo image file.",i);try{return o(`fallback-logo${t}`)}catch(i){return console.warn("Can't find logo image file.",i),o("fallback-logo")}}},getUniqueDomainsFilteredByLocale:e=>t=>{if(!e.domains||!t)return{};const i=e.domains.filter((e=>e.locale===t)),a={};return i.forEach((e=>{a[e.domain]=e})),a}},actions:{async initCentralProject(){const{data:e}=await r.Z.get("/firebase/projects/central");this.variables.central=e},async initRegionalProjects(){const{data:e}=await r.Z.get("/firebase/projects/regional");this.variables.regional=e},async initAppConfig(){const{data:e}=await r.Z.get("/firebase/projects/regional"),{data:t}=await r.Z.get("/domains");this.variables.regional=e,this.domains=t},setConfigInitialized(){this.initialized=!0},async fetchPokeConfig(){const{data:e}=await r.Z.get("/domains/config/poke");this.pokeConfig=e},async getTenantInfo(){const e=window.location.host.replace(/\.$/,"");try{const t=await r.Z.get(`/tenant/${e}/info`),i=t.data.data;this.appearance={title:i.app_name,logo:i.app_logo_name},i.app_primary_color&&(s.ZP.framework.theme.currentTheme.primary=i.app_primary_color)}catch(t){console.warn("Can't get the application appearance data for host:",e," Error message:",t),this.appearance={title:"",logo:""}}}}})},70860:function(e,t,i){"use strict";i.d(t,{j:function(){return f}});i(57658);var a=i(69876),s=i(67473),n=i(7442),o=i(94677),r=i(60359),l=i(26186),c=i(9669),u=i.n(c),d=i(83977),h=i(74864);const m="https://api.chathomebase.com",g=u().create({baseURL:m});g.interceptors.request.use((async e=>{const t=(0,d.Mq)(),i=await((0,h.v0)(t).currentUser?.getIdToken());return e.headers.Authorization=`Bearer ${i}`,e}),(e=>Promise.reject(e)));class p{static async getConnectedOperators(e={},t){const i=await g.get(`/connectedOperators/?${t}`,e);return i.data}}const f=(0,a.Q_)("debug",{state:()=>({loading:!1,operators:[],connectedOperators:{operators:{SFW:{operators:[]},NSFW:{operators:[]},AGENT_ONLY:{operators:[]}}},operatorPools:[]}),getters:{getConnectedOperators:e=>{const t={SFW:{operators:[]},NSFW:{operators:[]},AGENT_ONLY:{operators:[]}};return Object.keys(e.connectedOperators.operators).forEach((i=>{const a=[],s=new Set;e.connectedOperators.operators[i].operators.forEach((e=>{s.has(e.id)||(s.add(e.id),a.push(e))})),t[i]={operators:a}})),{operators:t}}},actions:{async fetchOperators(){this.operators=[],this.loading=!0;const e=await n.Z.operators.getAll(),t=e.operators.map((e=>({...e,geos:e.geos?JSON.parse(e.geos):null,name:e.id})));this.operators=t,this.loading=!1},async fetchConnectedOperators(e){this.connectedOperators={operators:{SFW:{operators:[]},NSFW:{operators:[]},AGENT_ONLY:{operators:[]}}},this.loading=!0;try{const t=await p.getConnectedOperators({},e),i={operators:{SFW:t.operators?.SFW??{operators:[]},NSFW:t.operators?.NSFW??{operators:[]},AGENT_ONLY:t.operators?.AGENT_ONLY??{operators:[]}}},a=l.Wq.map((e=>e.id));a.forEach((e=>{const t=i.operators[e];if(!t)return;const a=t.operators.map((e=>({...e,geos:JSON.parse(e.geos)})));this.connectedOperators.operators[e].operators.push(...a)}))}catch(t){(0,r.G)().addNotification({message:t.message||"An error occurred while fetching operators.",type:s.j_.Error})}finally{this.loading=!1}},async fetchOperatorPools(e){this.operatorPools=[],this.loading=!0;try{const t=await n.Z.redis.pools(e,(0,o.m)().tenant);this.operatorPools=t}catch(t){(0,r.G)().addNotification({message:t.message||"An error occurred while fetching operator pools.",type:s.j_.Error})}finally{this.loading=!1}},getCategoryInfo(e){const t={label:e,description:"No description available"};return l.Wq.forEach((i=>{const a=e.toLowerCase().replace(" ","_");i.id.toLowerCase()===a&&(t.label=i.label,t.description=i.description)})),t}}})},92358:function(e,t,i){"use strict";i.d(t,{M:function(){return n}});var a=i(69876),s=i(54057);const n=(0,a.Q_)("geo",{state:()=>({regions:[],cities:[],levels:1}),actions:{async fetchRegions(e){const t=await s.Z.get("/geo/places/options",{params:e});this.regions=t.data.options},async fetchCities(e){const t=await s.Z.get("/geo/places/options",{params:{...e,level:this.levels+1}});this.cities=t.data.options},async fetchLevels(e){const t=await s.Z.get("/geo/places/levels",{params:{strategy:e}});this.levels=t.data.levels}}})},67721:function(e,t,i){"use strict";i.d(t,{j:function(){return M}});var a=i(20144),s=i(69876),n=i(2938),o=i(81258),r=i(25282),l=i(78397),c=i(30532),u=i(94677),d=i(73222),h=i(27722),m=i(70860),g=i(92358),p=i(60359),f=i(9224),b=i(63723),y=i(67586),v=i(814),C=i(48541),_=i(48435),k=i(16182),w=i(89177),P=i(89393);a["default"].use(s.og);const A=(0,s.WB)();function M(){[r.C,l.a,c.K,u.m,d.a,h.F,m.j,g.M,p.G,f.J,b.r,y.U,v.O,C.p,_.F,k.T,w.y,P.m].forEach((e=>{e().$reset()}))}A.use((0,o.O)(n.D)),t.Z=A},60359:function(e,t,i){"use strict";i.d(t,{G:function(){return s}});i(57658);var a=i(69876);const s=(0,a.Q_)("notification",{state:()=>({notifications:[],isClaimedChatNotificationActive:!1}),actions:{addNotification(e){return new Promise((t=>{this.notifications.push({...e,show:!0}),t(!0)}))},removeNotification(e){return new Promise((t=>{this.notifications.splice(e,1),t(!0)}))},removeAllNotifications(){return new Promise((e=>{this.notifications=[],e(!0)}))},setNotificationSeen(e){return new Promise((t=>{this.notifications[e]&&(this.notifications[e].show=!1),t(!0)}))},showClaimedChatNotification(){this.isClaimedChatNotificationActive=!0},resetClaimedChatNotification(){this.isClaimedChatNotificationActive=!1}}})},9224:function(e,t,i){"use strict";i.d(t,{J:function(){return r}});var a=i(69876),s=i(67473),n=i(60359),o=i(54057);const r=(0,a.Q_)("pokeQueue",{state:()=>({locations:[],queue:[],selectedLocation:""}),actions:{async loadLocations(){try{const e="/poke/queue/statistics/locations",t=await o.Z.get(e);this.locations=Object.keys(t.data.data)}catch(e){(0,n.G)().addNotification({message:e.toString(),type:s.j_.Error})}},async setQueue(){if(this.selectedLocation)try{const e=`/poke/queue/statistics/${this.selectedLocation}`,t=await o.Z.get(e);this.queue=t.data.data}catch(e){this.queue=[],(0,n.G)().addNotification({message:500===e.response.status||422===e.response.status?"No data for this location":e.toString(),type:s.j_.Error})}else(0,n.G)().addNotification({message:"Please select region and location",type:s.j_.Error})}}})},63723:function(e,t,i){"use strict";i.d(t,{r:function(){return c}});i(57658);var a=i(69876),s=i(67473),n=i(21056),o=i(30920),r=i(27722),l=i(60359);const c=(0,a.Q_)("pokeSchedule",{state:()=>({pokes:[],dailyPokes:[],origin:n.ty,scheduledProfiles:{future:{},past:{}}}),getters:{futureScheduledPoke:e=>t=>e.scheduledProfiles.future[t],pastScheduledPoke:e=>t=>e.scheduledProfiles.past[t],followUpsByPoke:e=>t=>e.dailyPokes.filter((e=>e.followUp?.parentId===t.id)),nextFollowUpsByPoke:e=>t=>{const i=[];let a=t;while(a)a=e.dailyPokes.find((e=>e.followUp?.previousId===a.id)),a&&i.push(a);return i}},actions:{addPoke(e){this.pokes.push(e)},addDailyPoke(e){this.dailyPokes.push(e)},updatePoke(e){const t=this.pokes.find((t=>t.id===e.id));t?Object.assign(t,e):this.pokes.push(e)},updateDailyPoke(e){const t=this.dailyPokes.find((t=>t.id===e.id));t?Object.assign(t,e):this.dailyPokes.push(e)},removePoke(e){this.pokes=this.pokes.filter((t=>t.id!==e.id)),this.dailyPokes=this.dailyPokes.filter((t=>t.id!==e.id))},addFutureScheduledPoke(e){this.scheduledProfiles.future[e.profile.uuid]=e},addPastScheduledPoke(e){this.scheduledProfiles.past[e.profile.uuid]=e},clearScheduledProfiles(){this.scheduledProfiles={future:{},past:{}}},async removeScheduledPoke(e){const t=e.domains[0],i=(0,r.F)().domains.find((e=>e.domain===t));try{await o.m.dispatch("poke",i.locale,"deletePoke",e.id),this.removePoke(e);let t="The poke was removed.";const a=this.followUpsByPoke(e);if(a.forEach((e=>{this.removePoke(e)})),a.length>0&&(t+=` It's ${a.length} follow-ups have been removed as well.`),e.followUp){const i=this.nextFollowUpsByPoke(e);i.forEach((e=>{this.removePoke(e)})),i.length>0&&(t+=` It's ${i.length} next follow-ups have been removed as well.`)}(0,l.G)().addNotification({message:t,type:s.j_.Success})}catch(a){(0,l.G)().addNotification({message:a.toString(),type:s.j_.Error})}},async getDailyPokes({geo:e,filters:t}){await o.m.dispatch("poke",e,"getDailyPokes",{...t})},getPokesByScheduled({locale:e,scheduled:t,domains:i}){return o.m.dispatch("poke",e,"getPokesByScheduled",{scheduled:t,domains:i})}}})},67586:function(e,t,i){"use strict";i.d(t,{U:function(){return D}});i(82801),i(61295),i(57658);var a=i(69876),s=i(67473),n=i(36100),o=i(21056),r=i(8201),l=i(19789),c=i(59875),u=i(87699),d=i(24449),h=i(73802),m=i(45519),g=i(5412),p=i(97398),f=i(30920),b=i(54057),y=i(71843),v=i.n(y),C=i(94677),_=i(27722),k=i(60359),w=i(814),P=i(715),A=i(27484),M=i.n(A),T=i(29387),S=i.n(T),I=i(70178),x=i.n(I),E=i(30532),L=i(85694);const R=P.Z;M().extend(S()),M().extend(x());const F={mainPokeMessage:{attachment:null,attachmentFilenameForLegacy:null,content:"",hasAttachment:!1,messageLength:0,scheduledDateTime:null,type:"poke"},profile:null,legacyProfile:null,selectedProfiles:[],legacyFilters:{age_18_till_25:!0,age_26_till_35:!0,age_36_till_45:!0,age_46_till_54:!0,age_55_till_99:!0,age_unknown:!0,duplicate_ip_target_level:"ignore_ip_filter",gender_couple:!1,gender_female:!1,gender_male:!0,gender_transgender:!1,gender_unknown:!1,geoRegion1:"",had_credits:!0,has_credits:!0,in_conversation:!1,lastLogin:7,lastLoginByHours:0,limit:0,never_had_credits:!0,not_in_conversation:!0,past_paid_older_then_1_month:!0,past_paid_within_1_month:!0,past_paid_within_1_week:!0,past_paid_within_2_weeks:!0,targetFilterType:"",selectedTargetsPerDomain:null,with_photo:!0,with_text:!0,without_photo:!0,without_text:!0},filters:{age:{age_max:99,age_min:18},angel:0,build:null,eye_colour:null,gender:"male",geo_type:null,hair_colour:null,has_photo:null,has_text:null,is_disabled:0,is_doi:1,locality:null,region1:null,region2:null,region3:null,region4:null,snowflake:0},domains:[],domainConfigurations:[],origin:o.ty,frequency:{day:null,limit:o.mj},id:null,locale:null,followUps:[],geoStrategy:null,strategy:o.OE};function O(e){const t=e.map((e=>e.profileTypes)),i=t.reduce(((e,t)=>0===e.length?t:e.filter((e=>t.includes(e)))),[]);return Array.from(new Set(i))}const D=(0,a.Q_)("pokeWizard",{state:()=>({...structuredClone(F),action:"create",originalPoke:null,pagination:{itemsPerPage:10,page:1},pokePlayerFilters:{},pokeType:o.Qu,query:"",searchedFilters:{},searchedPlayers:[]}),getters:{isOriginalPokeInThePast:e=>{if(!e.originalPoke)return!1;const t=n.EK.now();return e.originalPoke.scheduled<t},isOriginalFollowPokeInThePast:e=>t=>{if(!e.followUps[t])return!1;if(!e.followUps[t].originalDateTime)return!1;const i=M()(new Date).tz(e.originalPoke.profile?.timezone||"UTC");return e.followUps[t].originalDateTime<i},profileTimezone:e=>e.profile?.geo[0].timezone,cityField:e=>{if(e.domainConfigurations.length)return e.domainConfigurations[0]?.geoStrategyCityField},regionField:e=>{if(e.domainConfigurations.length)return e.domainConfigurations[0].geoStrategyRegionField},filtersForApi(e){if(e.origin===o.ty){const t=(0,r.xh)(e.legacyFilters);return(0,l.X)(structuredClone(t))}const t={...e.filters,gender:[e.filters.gender],geo_type:e.filters.geo_type?[e.filters.geo_type]:null};return e.origin!==o.ty&&this.usedVariables.length>0&&(t.hasFilters=this.usedVariables),t.age_min=t.age.age_min,t.age_max=t.age.age_max,delete t.age,t},usedVariables(){return this.parsedPokeMessage?.length?this.parsedPokeMessage.reduce(((e,t)=>("var"!==t.type||e.includes(t.fixedVarName)||t.isBroken||!t.isValid||e.push(t.fixedVarName),e)),[]):[]},typeColor(){return r.z4[this.pokeType]?.color||"primary"},typeColorRGB(){return R[this.typeColor]?.base||c.lr},parsedPokeMessage(){return(0,u.Y)(this.mainPokeMessage?.content,r._F)},getPayload(e){const t=n.EK.now(),i=this.mainPokeMessage.scheduledDateTime?n.EK.fromDate(this.mainPokeMessage.scheduledDateTime.toDate()):t,a=(0,C.m)().user,s=this.profile;if(!s)return null;const r={...this.mainPokeMessage,attachment:this.mainPokeMessage.attachment||null};delete r.scheduledDateTime;const l=this.origin===o.ty,c={id:this.id,agent:{id:a.uid,name:a.displayName},company:a.companyId,profile:{id:l?s.profileCmsId:s.id,name:s.name,timezone:s.geo[0].timezone,uuid:s.uuid??null,profileType:s.profile_type??null},filters:this.filtersForApi,message:r,createdAt:t,scheduled:i,targets:{estimate:(0,w.O)().customerProfilesCount,targetsPerDomain:(0,w.O)().targetsPerDomain},domains:this.domains,locale:this.locale,strategy:this.strategy,type:this.pokeType,origin:{type:this.origin},tenant:(0,C.m)().tenant};return c.strategy!==o.vG||e.frequency?.day||(c.strategy=o.OE),c.strategy===o.vG&&e.frequency&&(c.frequency=e.frequency),c},availableTargetVariables(e){return"legacy"===e.origin?r._F.filter((e=>!r.lk.includes(e))):r._F},messageWithFixedVariables(){const e=this.parsedPokeMessage,t=e.reduce(((e,t)=>"var"===t.type?`${e}%[${t.fixedVarName}]%`:`${e}${t.original}`),"");return t},isGeoWizardEnabledForAllDomains(e){return e.domainConfigurations.every((e=>e.geoWizardEnabled))},entertainmentProfileVariables(){if(!this.profile)return[];const e=(0,d.IH)("real_name")(this.profile),t=this.profile.geo?.[0]||null;if(!this.profile.geo_free){const i=t.label&&"null"!=t.label.toLowerCase()?t.label:t.locality,a=t.region1;i&&(e["location_city"]=i),a&&(e["location_region"]=a)}return this.profile.geo_free&&this.isGeoWizardEnabledForAllDomains&&(e["player_city"]="%[playerCity]%",e["player_province"]="%[playerProvince]%"),e},selectedCharacteristics(){return this.profile?(0,d.IH)("real_name","passion","civil_status","is_smoker","has_piercing","has_tattoo","eye_colour","appearance","gender","hobbies","length","profession","sexual_orientation","transportation","build")(this.profile):[]},profileCharacteristics(){const e=Object.keys(this.selectedCharacteristics).map((e=>{let t="";const i=this.selectedCharacteristics[e];return t=!0===i?"Yes":!1===i?"No":Array.isArray(i)?i.join(", "):i,"length"===e&&(t=this.profile?.geo&&["GB","US"].includes(this.profile.geo[0].iso)?(0,h.m)(t):`${t} cm`),{name:e,value:t||"not set",icon:d.Gl[e]||"mdi-arrow-right"}}));return e},fullLocation(){return this.profile?m.Z.fullLocation(this.profile):""},avatarUrl(){const e="https://cdn.prod.phnx.review";return this.isLegacy?this.profile?.avatar:`${e}/${this.profile?.avatar}`},isLegacy(){return this.origin===o.ty},canSendImmediately(){return g.Z.hasAnyRole([s.G7.Admin])},isEditMode(e){return!!e.id},hasMessageInput(){return this.pokeType===o.Qu},hasSearchedFilters:e=>Object.keys(e.searchedFilters).length>0||e.query.length>0,hasPokeTargets(e){return this.isFilteredByNames?e.legacyFilters.selectedTargetsPerDomain?.some((e=>e.targets&&e.targets.length>0)):(0,w.O)().customerProfilesCount>0},reasonsOfInvalidity(e){const t={"there is no targets":!this.hasPokeTargets,"filter 'in conversation' is enabled":e.legacyFilters.in_conversation},i=Object.entries(t).filter((([e,t])=>Boolean(t))).map((([e,t])=>e));return i.length>0?"It's disabled because: "+i.join(", "):""},isPokeValidToSend(){return!this.reasonsOfInvalidity},isFilteredByNames(e){return"by_name"===e.legacyFilters.targetFilterType},totalNumberOfTargetDomains(e){return this.isFilteredByNames?e.legacyFilters.selectedTargetsPerDomain.length:(0,w.O)().customerProfilesCountPerDomain.length},totalNumberOfTargets(e){const t=(0,w.O)().customerProfilesCount,i=e.legacyFilters.selectedTargetsPerDomain?e.legacyFilters.selectedTargetsPerDomain.reduce(((e,t)=>e+(t.targets?.length||0)),0):0;return this.isFilteredByNames?i:t},domainsAndTargetNumber(e){const t=(0,w.O)().customerProfilesCountPerDomain,i=e.legacyFilters.selectedTargetsPerDomain?.map((e=>({domainName:e.domain||"unknown",count:e.targets?.length||0})))||[];return this.isFilteredByNames?i:t}},actions:{checkAttachmentWasAlreadyUsedInPoke(e){const t=this.followUps.filter((e=>e.poke.attachment)).map((e=>e.poke.attachment.displayUrl));return this.mainPokeMessage.attachment&&t.push(this.mainPokeMessage.attachment.displayUrl),t.includes(e)},resetPokeWizard(){this.$patch(structuredClone(F))},resetMainAttachment(){this.mainPokeMessage.attachment=null,this.mainPokeMessage.hasAttachment=!1,this.mainPokeMessage.attachmentFilenameForLegacy=null},async setFollowUps(e){this.followUps=await Promise.all(e.map((async e=>({...e,poke:{...e.poke,attachment:await(0,L.Jx)(e.poke.attachment,this.domains[0])}}))))},setProfile(e){this.profile=e},setSelectedProfiles(e){this.selectedProfiles=e,this.setProfile(e[0])},setLegacyFilters(e){this.legacyFilters=e,!this.profile||this.legacyFilters?.selectedTargetsPerDomain?.targets?.length>0||(0,w.O)().getCustomerCounts({origin:this.origin,domains:this.domains,filters:this.filtersForApi,profile:this.profile,locale:this.locale})},setFilters(e){this.filters=e,this.profile&&(0,w.O)().getCustomerCounts({origin:this.origin,domains:this.domains,filters:this.filtersForApi,profile:this.profile,locale:this.locale})},setDomainConfigurations(e){if(this.domainConfigurations=e,!e.length)return this.geoStrategy=null,void(this.domains=[]);this.geoStrategy=e[0].geoStrategy,this.domains=e.map((e=>e.domain))},setTargetFilterType(e){this.legacyFilters={...this.legacyFilters,targetFilterType:e}},clearSelectedTargetPerDomain(){this.legacyFilters.selectedTargetsPerDomain=null},async initializeMainPokeData(e){if(e.strategy===o.KZ&&e.followUp?.parentId)return void await p.Z.push(`/pokes/${e.locale}/${e.followUp.parentId}/edit`);this.pokeType=e.type;const t=(0,_.F)().domains.filter((t=>e.domains.includes(t.domain)));if(this.setDomainConfigurations(t),this.locale=e.locale,this.id=e.id,this.origin=o.ty,this.action="update",this.originalPoke=e,this.strategy=e.strategy??o.OE,this.mainPokeMessage={...e.message,attachment:await(0,L.Jx)(e.message.attachment,this.domains[0])},e.strategy===o.KZ){const t=await f.m.dispatch("poke",e.locale,"getFollowUpPokes",e.id);await this.setFollowUps(t)}await(0,w.O)().getPokeEntertainmentProfile({entertainmentProfileId:e.profile.id,domain:t[0].domain,entertainmentProfileUuid:e.profile.uuid});const i=(0,w.O)().activeEntertainmentProfile;if(this.setSelectedProfiles([i]),e.createdAt==e.scheduled)this.mainPokeMessage.scheduledDateTime=null;else{const t=M()(1e3*e.scheduled?.seconds).tz(e.profile?.timezone||"UTC");this.mainPokeMessage.scheduledDateTime=t}e.strategy===o.vG&&e.frequency?.day&&(this.frequency=e.frequency),this.setLegacyFilters(e.filters),(0,E.K)().loadAttachments(t[0],i)},async setPlayerFilters(){try{const e="/profile/filters",t=await b.Z.get(e);this.pokePlayerFilters=t.data.data}catch(e){(0,k.G)().addNotification({message:e.toString(),type:s.j_.Error})}},async searchPlayers({domains:e,query:t,filters:i={},page:a=1,limit:s=10}){const n=(0,_.F)().domainConfigs(e),o=Array.from(new Set(n.map((e=>e.locale)))),r=O(n),l=n.every((e=>e.profileApiEnabled)),c=!l&&Object.values(n).some((e=>e.profileApiEnabled));try{if(c){const e=Object.values(n).filter((e=>!e.profileApiEnabled)).map((e=>e.domain)),t=Object.values(n).filter((e=>e.profileApiEnabled)).map((e=>e.domain)),i=await(0,w.O)().getEntertainmentProfilesFromMessageCentral({locales:o,domains:e,query:this.query,filters:{...this.searchedFilters},page:this.pagination.page,limit:this.pagination.itemsPerPage}),a=i.map((e=>e.uuid)),s=await(0,w.O)().getEntertainmentProfilesFromProfileAPI({locales:o,profileTypes:r,domains:t,query:this.query,filters:{uuids:a},page:this.pagination.page,limit:this.pagination.itemsPerPage});return v()(i,s,(e=>e.uuid))}const u=l?(0,w.O)().getEntertainmentProfilesFromProfileAPI:(0,w.O)().getEntertainmentProfilesFromMessageCentral;return await u({locales:o,profileTypes:r,domains:e,query:t,filters:i,page:a,limit:s})}catch(u){return[]}},async setSearchedPlayers(e,t){this.searchedFilters.fromCMSID=e,this.searchedFilters.toCMSID=t,this.searchedPlayers=await this.searchPlayers({domains:this.domains,query:this.query,filters:this.searchedFilters,page:this.pagination.page,limit:this.pagination.itemsPerPage})}}})},814:function(e,t,i){"use strict";i.d(t,{O:function(){return u}});i(57658);var a=i(69876),s=i(71843),n=i.n(s),o=i(5262),r=i(1027),l=i(88920),c=i(27722);const u=(0,a.Q_)("profile",{state:()=>({entertainmentProfiles:[],entertainmentProfilesCount:null,activeEntertainmentProfile:null,geoFreeEntertainmentProfileLocation:null,activeCustomerProfile:null,entertainmentProfileFilters:{},customerProfilesCountPerDomain:[],loadingCounts:!1,playersPerDomain:{}}),getters:{customerProfilesCount(){return this.customerProfilesCountPerDomain.reduce(((e,t)=>e+t.count),0)},activeCustomerTimezone(){return this.activeCustomerProfile?.geo[0].timezone||"UTC"},activeProfileTimezone(){return this.activeEntertainmentProfile?.geo[0].timezone||"UTC"},targetsPerDomain(){return Array.from(this.customerProfilesCountPerDomain)?.map((e=>({site:e.domainName.replaceAll(/_/g,"."),estimate:e.count,reached:0})))||[]},customerProfileFilters(){return Object.keys(this.entertainmentProfileFilters).filter((e=>["gender","build","hair_colour","eye_colour","geo_type"].indexOf(e)>=0)).reduce(((e,t)=>Object.assign(e,{[t]:this.entertainmentProfileFilters[t]})),{})},getPlayerByCmsId(){return(e,t)=>this.playersPerDomain[e].find((e=>e.profileCmsId==t))}},actions:{setCustomerProfilesCountPerDomain(e){this.customerProfilesCountPerDomain.push(e)},clearCustomerProfilesCountPerDomain(){this.customerProfilesCountPerDomain=[]},resetActiveProfiles(){this.activeCustomerProfile=null,this.activeEntertainmentProfile=null},async getEntertainmentProfile({entertainmentProfileId:e,domain:t,entertainmentProfileUuid:i}){const a=new o.Z(t),s=await a.getEntertainmentProfile(e,i);this.activeEntertainmentProfile=s},async getGeoFreeEntertainmentProfileLocation({entertainmentProfileId:e,entertainmentProfileUUID:t,customerProfileUUID:i,domain:a,countryCode:s,customerLat:n,customerLng:r}){const l=new o.Z(a),c=await l.getGeoFreeEntertainmentProfileLocation(e,t,i,s,n,r);this.geoFreeEntertainmentProfileLocation=c},updateActiveEntertainmentProfile(e){return this.activeEntertainmentProfile=e,e},async getPokeEntertainmentProfile({entertainmentProfileId:e,domain:t,entertainmentProfileUuid:i}){const a=new o.Z(t),s=await a.getPokeEntertainmentProfile(e,t,i);return this.activeEntertainmentProfile=s,s},async getCustomerProfile({customerProfileId:e,customerUuid:t,domain:i}){const a=new o.Z(i),s=await a.getCustomerProfile({customerProfileId:e,customerUuid:t});this.activeCustomerProfile=s},async getCustomerCountsFromMessageCentral({domainsPerMessageCentral:e,filters:t,profileId:i,profileUuid:a}){await Promise.all(Object.values(e).map((async e=>{const s=new o.Z(e[0]),n=await s.getCustomerProfilesCount({domainNames:e,filters:t,profileId:i,profileUuid:a});for(const[t,i]of Object.entries(n))this.setCustomerProfilesCountPerDomain({domainName:t,count:i})})))},async getCustomerCountsFromProfileAPI({domainNames:e,filters:t,profileId:i,profileUuid:a}){const s=await(new r.Z).getCustomerProfilesCount({domainNames:e,filters:t,profileId:i,profileUuid:a});for(const[n,o]of Object.entries(s))this.setCustomerProfilesCountPerDomain({domainName:n,count:o})},async getLegacyCounts({domains:e,filters:t,profile:i}){this.loadingCounts=!0,this.clearCustomerProfilesCountPerDomain();const a=Object.fromEntries(e.map((e=>[e,(0,c.F)().domains.find((t=>t.domain===e))]))),s=Object.values(a).every((e=>e.profileApiEnabled));if(s)return await this.getCustomerCountsFromProfileAPI({domainNames:e,filters:t,profileId:i?.uuid,profileUuid:i?.uuid}),void(this.loadingCounts=!1);const n=!s&&Object.values(a).some((e=>e.profileApiEnabled));if(n){const e=Object.values(a).filter((e=>e.profileApiEnabled)).map((e=>e.domain));await this.getCustomerCountsFromProfileAPI({domainNames:e,filters:t,profileId:i?.uuid,profileUuid:i?.uuid})}const o=Object.entries(a).reduce(((e,[t,i])=>(i.profileApiEnabled||(e[i.messageCentralUrl]||=[],e[i.messageCentralUrl].push(t)),e)),{});await this.getCustomerCountsFromMessageCentral({domainsPerMessageCentral:o,filters:t,profileId:i?.profileCmsId||i.id,profileUuid:i?.uuid}),this.loadingCounts=!1},async getCustomerCounts({origin:e,domains:t,filters:i,profile:a}){this.clearCustomerProfilesCountPerDomain(),await this.getLegacyCounts({domains:t,filters:i,profile:a})},async searchCustomerProfilesByName({sites:e,filters:t,profileCmsId:i}){if(!e||0===e.length)return[];const a=new o.Z(e[0]);return await a.searchCustomerProfilesByName({sites:e,filters:t,profileCmsId:i})},async searchCustomersByName({origin:e,sites:t,filters:i,profileCmsId:a,locale:s}){if("legacy"===e)return await this.searchCustomerProfilesByName({sites:t,filters:i,profileCmsId:a,locale:s});const n=t[0]||"",r=new o.Z(n);return r.searchCustomerProfilesByName(i)},setDomainCustomerProfilesCount(e){this.loadingCounts=!0,this.clearCustomerProfilesCountPerDomain(),e.forEach((e=>{this.setCustomerProfilesCountPerDomain({domainName:e.domain,count:e.targets.length})})),this.loadingCounts=!1},clearDomainCustomerProfilesCount(){this.loadingCounts=!0,this.clearCustomerProfilesCountPerDomain(),this.loadingCounts=!1},async getEntertainmentProfilesFromProfileAPI({locales:e,profileTypes:t,domains:i,query:a,filters:s,page:n,limit:o}){this.playersPerDomain={};const l=await(new r.Z).getEntertainmentProfiles({query:a,filters:s,page:n,limit:o,locales:e,profileTypes:t});return i.forEach((e=>{this.playersPerDomain[e]=l})),l},async getEntertainmentProfilesFromMessageCentral({domains:e,query:t,filters:i,page:a,limit:s}){this.playersPerDomain={};const o=await Promise.all(e.map((async e=>{const n=await new l.Z(e).getEntertainmentProfiles({query:t,filters:i,page:a,limit:s});return this.playersPerDomain[e]=n,n}))),r=n()(...o,(e=>+e.profileCmsId));return r}},debounce:{getCustomerCounts:1e3}})},48541:function(e,t,i){"use strict";i.d(t,{p:function(){return l}});var a=i(69876),s=i(67473),n=i(26186),o=i(30920),r=i(60359);const l=(0,a.Q_)("reportedMessages",{state:()=>({reportedMessages:[],currentReportedMessage:null,firstReportedMessageId:null,lastReportedMessageId:null,categories:n.ao}),getters:{},actions:{async reportMessageStatus(e,t,i){try{await o.m.dispatch("reportedMessages",e,"setProcessedStatus",{id:t,isProcessed:i})}catch(a){(0,r.G)().addNotification({message:"Failed to change the message status.",type:s.j_.Error})}},updateReportedMessage(e){this.currentReportedMessage?.id===e?.id&&(this.currentReportedMessage={...e});const t=this.reportedMessages.findIndex((t=>t.id===e.id));t>=0&&this.reportedMessages.splice(t,1,{...e})}}})},48435:function(e,t,i){"use strict";i.d(t,{F:function(){return s}});var a=i(69876);const s=(0,a.Q_)("settings",{state:()=>({isClaimedChatNotificationEnabled:JSON.parse(localStorage.getItem("isClaimedChatNotificationEnabled"))??!0,claimedChatNotificationTimeoutSeconds:JSON.parse(localStorage.getItem("claimedChatNotificationTimeoutSeconds"))??1e4}),actions:{setClaimedChatNotificationEnabled(e){localStorage.setItem("isClaimedChatNotificationEnabled",JSON.stringify(e)),this.isClaimedChatNotificationEnabled=e},setClaimedChatNotificationTimeoutSeconds(e){localStorage.setItem("claimedChatNotificationTimeoutSeconds",e.toString()),this.claimedChatNotificationTimeoutSeconds=e}}})},16182:function(e,t,i){"use strict";i.d(t,{T:function(){return l}});var a=i(69876),s=i(94677),n=i(53920);const o="https://claim-service-dot-phoenix-central-prod.ew.r.appspot.com",r=(0,n.io)(`${o}/presence`,{autoConnect:!1,transports:["websocket"]}),l=(0,a.Q_)("socket",{state:()=>({isConnected:!1}),actions:{bindEvents(){r.on("connect",(()=>{this.isConnected=!0})),r.on("disconnect",(()=>{this.isConnected=!1})),r.on("reconnect_attempt",(()=>{r.io.opts.transports=["polling","websocket"]})),r.on("disconnectOperator",(()=>{(0,s.m)().signOut()}))},connect(e){r.io.opts.query={token:e},r.connect()},disconnect(){r.disconnect()}}})},89177:function(e,t,i){"use strict";i.d(t,{y:function(){return r}});i(57658);var a=i(69876),s=i(67473),n=i(94677),o=i(24449);const r=(0,a.Q_)("statistics",{state:()=>({messages:[],allChatDocuments:[],queueCounts:[],activeChat:null,chatMessages:[],nextChatDocPage:null,previousChatDocPage:null,nextPokeDocPage:null,previousPokeDocPage:null,pokes:[],queueCountInterval:null,isLoadingAllChatDocuments:!1}),getters:{reversedChatMessages:e=>[...e.chatMessages].reverse(),computedQueueCounts:e=>{const t=(0,n.m)().user.geos||[],i=t.map((e=>{const[t,i]=(0,o.Z5)(e);return{locale:e,countryCode:i,languageCode:t,counts:{}}})),a=new Map;return i.forEach((e=>a.set(e.locale,e))),e.allChatDocuments.forEach((e=>{const{locale:t,lastMessageMessagePool:i,lastMessage:n}=e,r=(i??s.kB.NSFW).replace(" ","_").toUpperCase(),l=n?.createdAt,c=a.get(t);if(c){c.counts[r]||(c.counts[r]={count:0,oldestMessage:null}),c.counts[r].count+=1;const e=c.counts[r].oldestMessage;(!e||l&&l<e)&&(c.counts[r].oldestMessage=l)}else{const[e,i]=(0,o.Z5)(t),s={locale:t,languageCode:e,countryCode:i,counts:{[r]:{count:1,oldestMessage:l}}};a.set(t,s)}})),Array.from(a.values())}},actions:{pushChatMessage(e){this.chatMessages.find((t=>t.id===e.id))||this.chatMessages.push(e)},updateQueueCount(e,t){const i=this.allChatDocuments.findIndex((t=>t.id===e.id));"removed"===t&&-1!==i?this.allChatDocuments.splice(i,1):"added"===t&&-1===i?this.allChatDocuments.push(e):"modified"===t&&-1!==i?this.allChatDocuments[i]=e:"modified"===t&&-1===i&&this.allChatDocuments.push(e),this.allChatDocuments=[...this.allChatDocuments]},startQueueUpdateInterval(e=10){this.queueCountInterval=setInterval((()=>{this.queueCounts=this.computedQueueCounts}),1e3*e),setTimeout((()=>{this.queueCounts=this.computedQueueCounts}),3e3)},clearQueueUpdateInterval(){clearInterval(this.queueCountInterval)}}})},89393:function(e,t,i){"use strict";i.d(t,{m:function(){return s}});i(82801),i(61295),i(57658);var a=i(69876);const s=(0,a.Q_)("system",{state:()=>({currentSystemNotification:null,systemNotifications:[]}),actions:{setCurrentSystemNotification(e){this.currentSystemNotification=e?structuredClone(e):null},addSystemNotification(e){this.systemNotifications.push(e)},resetSystemNotifications(){this.systemNotifications=[]}}})},26186:function(e,t,i){"use strict";i.d(t,{sW:function(){return h},H5:function(){return p},f4:function(){return m},S3:function(){return f},IF:function(){return d},WO:function(){return y},Lf:function(){return C},$Z:function(){return b},dn:function(){return c},Wq:function(){return _},ao:function(){return o},hs:function(){return g},qn:function(){return v}});var a=i(21056);const s=[{name:"sport",title:"Sport and Hobbies",values:["3D printing","Acrobatics","Acting","Action figure","Air sports","Aircraft spotting","Airsoft","Amateur astronomy","Amateur geology","Amateur radio","American football (gridiron)","Amusement park visiting","Animal fancy","Animation","Ant-keeping","Antiquing","Antiquities","Aquascaping","Archery","Art collecting","Association football","Astrology","Astronomy","Audiophile","Australian rules football","Auto audiophilia","Auto racing","Axe throwing","BASE jumping","BMX","Backgammon","Backpacking","Badminton","Baking","Baseball","Basketball","Baton twirling","Beach volleyball","Beauty pageants","Beekeeping","Billiards","Biology","Birdwatching","Blacksmithing","Blogging","Board sports","Board/tabletop games","Bodybuilding","Bonsai","Book collecting","Book discussion clubs","Book restoration","Bowling","Boxing","Brazilian jiu-jitsu","Breadmaking","Breakdancing","Bridge","Building","Bullet journaling","Bus riding","Bus spotting","Butterfly watching","Button collecting","Cabaret","Calligraphy","Camping","Candle making","Candy making","Canoeing","Canyoning","Car fixing & building","Car riding","Card games","Cartophily","Caving","Checkers (draughts)","Cheerleading","Cheesemaking","Chemistry","Chess","Cleaning","Climbing","Clothesmaking","Coffee roasting","Coin collecting","Collecting","Color guard","Coloring","Comic book collecting","Composting","Computer programming","Confectionery","Cooking","Cosplaying","Couponing","Craft","Creative writing","Cribbage","Cricket","Crocheting","Croquet","Cross-stitch","Crossword puzzles","Cryptography","Cue sports","Curling","Cycling","DJing","Dance","Dancing","Darts","Debate","Deltiology","Die-cast toy","Digital arts","Digital hoarding","Disc golf","Distro Hopping","Do it yourself","Dog sport","Dolls","Dominoes","Dowsing","Drama","Drawing","Drink mixing","Drinking","Driving","Eating","Electrochemistry","Electronic games","Electronics","Element collecting","Embroidery","Ephemera collecting","Equestrianism","Esports","Exhibition drill","Experimenting","Fantasy sports","Farming","Fashion design","Fashion","Fencing","Field hockey","Figure skating","Filmmaking","Fingerprint collecting","Fishing","Fishkeeping","Flag football","Flower arranging","Flower collecting and pressing","Flower growing","Fly tying","Flying disc","Flying","Footbag","Foraging","Foreign language learning","Fossicking","Fossil hunting","Freestyle football","Frisbee","Furniture building","Fusilately","Gaming","Gardening","Genealogy","Geocaching","Geography","Ghost hunting","Gingerbread house making","Glassblowing","Go","Gold prospecting","Golfing","Gongoozling","Graffiti","Graphic design","Gunsmithing","Gymnastics","Hacking","Handball","Herbalism","Herp keeping","Herping","High-power rocketry","Hiking","History","Hobby horsing","Hobby tunneling","Home improvement","Homebrewing","Hooping","Horseback riding","Horseshoes","Houseplant care","Hula hooping","Humor","Hunting","Hydroponics","Ice hockey","Ice skating","Iceboat racing","Inline skating","Insect collecting","Jewelry making","Jigsaw puzzles","Jogging","Journaling","Judo","Juggling","Jujitsu","Jukskei","Jumping rope","Kabaddi","Karaoke","Karate","Kart racing","Kayaking","Kendama","Kite flying","Kitesurfing","Knife collecting","Knife making","Knife throwing","Knitting","Knot tying","Knowledge/word games","Kombucha brewing","LARPing","Lace making","Lacrosse","Lapidary","Laser tag","Learning","Leather crafting","Lego building","Letterboxing","Listening to music","Listening to podcasts","Lock picking","Long-distance running","Longboarding","Lotology","Machining","Macrame","Magic","Magnet fishing","Mahjong","Makeup","Marbles","Marching band","Martial arts","Mathematics","Mazes (indoor/outdoor)","Meditation","Metal detecting","Metalworking","Meteorology","Microscopy","Mineral collecting","Model United Nations","Model aircraft","Model building","Model engineering","Motor sports","Mountain biking","Mountaineering","Movie and movie memorabilia collecting","Museum visiting","Mushroom hunting","Nail art","Needlepoint","Netball","Nordic skating","Orienteering","Origami","Paintball","Painting","Palmistry","Parkour","Perfume","Pet adoption & fostering","Philately","Phillumeny","Photography","Physics","Pickleball","Playing musical instruments","Podcast hosting","Poi","Poker","Polo","Pool","Pottery","Powerlifting","Practical jokes","Pressed flower craft","Psychology","Public transport riding","Puzzles","Quidditch","Quilling","Quilting","Quizzes","Race walking","Racquetball","Radio-controlled car racing","Radio-controlled model","Rafting","Rail transport modeling","Rail transport modelling","Railway journeys","Railway studies","Rappelling","Rapping","Reading","Record collecting","Refinishing","Reiki","Research","Road biking","Robot combat","Rock balancing","Rock climbing","Rock tumbling","Role-playing games","Roller derby","Roller skating","Rubik's Cube","Rugby league football","Rugby","Running","Sailing","Sand art","Satellite watching","Scouting","Scrapbooking","Scuba diving","Sculling","Sculpting","Scutelliphily","Sea glass collecting","Seashell collecting","Sewing","Shoemaking","Shoes","Shogi","Shooting sport","Shooting","Shopping","Shortwave listening","Shuffleboard","Singing","Skateboarding","Sketching","Skiing","Skimboarding","Skipping rope","Skydiving","Slacklining","Sled dog racing","Slot car racing","Slot car","Snowboarding","Snowmobiling","Snowshoeing","Soapmaking","Soccer (football)","Social media","Softball","Speed skating","Speedcubing","Sport stacking","Sports memorabilia","Sports science","Spreadsheets","Squash","Stamp collecting","Stand-up comedy","Stone collecting","Stone skipping","Stuffed toy collecting","Sun bathing","Surfing","Survivalism","Swimming","Table football","Table tennis","Taekwondo","Tai chi","Tarot","Taxidermy","Tea bag collecting","Tennis polo","Tennis","Tether car","Thrifting","Thru-hiking","Ticket collecting","Topiary","Tour skating","Tourism","Toys","Trade fair visiting","Trainspotting","Transit map collecting","Trapshooting","Travel","Triathlon","Ultimate frisbee","Urban exploration","Vacation","Vegetable farming","Vehicle restoration","Video editing","Video game collecting","Video game developing","Video gaming","Videography","Vintage cars","Vintage clothing","Vinyl Records","Virtual reality","Volleyball","Walking","Watching movies","Watching television","Water polo","Water sports","Waxing","Weaving","Weight training","Weightlifting","Welding","Whale watching","Whittling","Wikipedia editing","Winemaking","Wood carving","Woodworking","Word searches","Worldbuilding","Wrestling","Writing","Yo-yoing","Yoga","Zumba"]}],n=[{name:"action",title:"Action",values:["Anal Sex / pegging","Anal orgasms","Attention","Bisexuality","Blowjob fellatio","Boobjob","Breeding","Cuddling","Cunnilingus","Deep throat","Deference","Edging","Ejaculation","Face Fucking","Face-sitting","Facials","Fingering","G-Spot Stimulation","Handjob","Heterosexuality","Homosexuality","Hugging","Kissing (mouth or full body)","Massages","Masturbation (mutual or alone)","Masturbation (viewing / doing)","Open relationship","Phone sex / sexting / cyber","Polyamory and multiple relationship","Pornography","Prostate milking","Prostate massage","Quickies","Role Play","Rimming","Romance / Affection","Rough Sex","Slow Sex Play","Snuggling","Swallowing","Teasing","Vaginal creampie","Vaginal fisting"]},{name:"toys",title:"Sex toys",values:["Butt plug","Canes","Cilice","Clamps","Cock rings","Cock straps","Crop","Dildos","Floggers","Fucking machine","Needles","Paddles","Plugs","Prostate massager","Urethra play / Sounding","Vibrators","Whips"]}],o={agent:[{icon:"mdi-email-outline",text:a.AM,value:"contact"},{icon:"mdi-cards-playing-outline",text:a.S_,value:"company services"},{icon:"mdi-skull",text:a.wN,value:"abusive operator"},{icon:"mdi-untappd",text:a.AF,value:"misleading"},{icon:"mdi-needle",text:a.zJ,value:"illegal"},{icon:"mdi-new-box",text:a.f9,value:"new category"},{icon:"mdi-thumb-down",text:a.EH,value:"bad quality/answer is not relevant"},{icon:"mdi-help-circle-outline",text:a._t,value:"other"}],customer:[{icon:"mdi-email-outline",text:a.WB,value:"contact"},{icon:"mdi-skull",text:a.Vo,value:"abusive customer"},{icon:"mdi-needle",text:a.zJ,value:"illegal"},{icon:"mdi-new-box",text:a.f9,value:"new category"},{icon:"mdi-thumb-down",text:a.EH,value:"bad quality/answer is not relevant"},{icon:"mdi-help-circle-outline",text:a._t,value:"other"}]};function r(e){return e.map((e=>({label:e.title,value:e.name})))}function l(e){return e.reduce(((e,t)=>[...e,{divider:!0},{header:t.title},...t.values.map((e=>({text:e,value:{title:e,group:t.name}})))]),[])}const c={personal:{title:"Personal Info",icon:"mdi-information-outline",color:"blue darken-3",cssColor:"blue--text text--darken-3",groups:[{label:"Name",value:"name"},{label:"Age",value:"age"}]},family:{title:"Family",icon:"mdi-nature-people",color:"light-green darken-3",cssColor:"light-green--text text--darken-3"},hobbies:{title:"Sport and Hobbies",icon:"mdi-puzzle",color:"pink darken-3",cssColor:"pink--text text--darken-3",groups:r(s),predefinedValues:l(s)},work:{title:"Work",icon:"mdi-briefcase",color:"indigo darken-2",cssColor:"indigo--text text--darken-2"},sex:{title:"Sexual Preferences",icon:"mdi-gender-male-female",color:"pink lighten-1",cssColor:"pink--text text--lighten-1",groups:r(n),predefinedValues:l(n)},health:{title:"Health",icon:"mdi-medical-bag",color:"red darken-2",cssColor:"red--text text--darken-2"},updates:{title:"Updates",icon:"mdi-update",color:"cyan darken-3",cssColor:"cyan--text text--darken-3"},other:{title:"Other",icon:"mdi-chart-bubble",color:"blue-grey darken-1",cssColor:"blue-grey--text text--darken-1"}},u={male:{icon:"mdi-gender-male",color:"blue"},female:{icon:"mdi-gender-female",color:"pink lighten-3"},couple:{icon:"mdi-account-multiple",color:"teal"},shemale:{icon:"mdi-gender-male-female",color:"purple"},user:{icon:"mdi-account",color:"blue-grey"},f:{icon:"mdi-gender-female",color:"pink lighten-3"},m:{icon:"mdi-gender-male",color:"blue"}};function d(e){return u[e]||{icon:"mdi-gender-male-female-variant",color:"gray"}}const h={living_together:{icon:"mdi-home-modern",title:"Living together"},single:{icon:"mdi-account",title:"Single"},married:{icon:"mdi-account-multiple",title:"Married"},relation:{icon:"mdi-sofa",title:"In relation"},living_apart_together:{icon:"mdi-city",title:"Living apart together"},divorced:{icon:"mdi-heart-broken",title:"Divorced"},widow:{icon:"mdi-skull",title:"Widow"}};function m(e){return h[e]||{icon:"mdi-handshake",title:e}}const g={smoking:{icon:"mdi-smoking",title:"Smoking"},no_smoking:{icon:"mdi-smoking-off",title:"No smoking"},Yes:{icon:"mdi-smoking",title:"Smoking"},No:{icon:"mdi-smoking-off",title:"No smoking"},true:{icon:"mdi-smoking",title:"Smoking"},false:{icon:"mdi-smoking-off",title:"No smoking"}},p={brown:{color:"brown",title:"Brown eyes"},green:{color:"green darken-1",title:"Green eyes"},blue:{color:"light-blue darken-1",title:"Blue eyes"},gray:{color:"grey darken-1",title:"Gray eyes"},grey:{color:"grey darken-1",title:"Grey eyes"}};function f(e){return p[e]||{color:"grey",title:`${e} eyes`}}const b={brown:{color:"brown lighten-1",title:"Brown hair"},black:{color:"black",title:"Black hair"},blond:{color:"orange lighten-2",title:"Blond hair"},darkblond:{color:"orange darken-2",title:"Dark blond hair"},gray:{color:"grey",title:"Gray hair"},grey:{color:"grey",title:"Grey hair"},bald:{color:"grey lighten-4",title:"Bald"},red:{color:"red lighten-1",title:"Red color"},colored:{color:"pink",title:"Colored hair"}};function y(e){return b[e]||{color:"grey",title:`${e} hair`}}const v={none:{icon:"mdi-walk",title:"None"},public_transport:{icon:"mdi-bus",title:"Public transport"},bicycle:{icon:"mdi-bike",title:"Bicycle"},bike:{icon:"mdi-bike",title:"Bicycle"},moped:{icon:"mdi-motorbike",title:"Moped"},scooter:{icon:"mdi-motorbike",title:"Scooter"},motorbike:{icon:"mdi-motorbike",title:"Motorbike"},auto:{icon:"mdi-car-hatchback",title:"Auto"},mobility_scooter:{icon:"mdi-wheelchair-accessibility",title:"Mobility scooter"},taxi:{icon:"mdi-taxi",title:"Taxi"}};function C(e){return v[e]||{icon:"mdi-airballoon",title:e}}const _=[{id:"SFW",label:"Snowflake",description:"This queue is designated for handling SFW (Safe for Work) messages specifically from users categorized as snowflake and require particular sensitivity."},{id:"NSFW",label:"Generic",description:"This is the default queue where standard NSFW (Not Safe for Work) messages are received and managed."},{id:"AGENT_ONLY",label:"Agent Only",description:"This is the dedicated queue for NSFW messages that require a response from a human agent, ensuring personalized interaction for messages needing direct engagement."}]},21056:function(e,t,i){"use strict";i.d(t,{AF:function(){return q},AM:function(){return Z},B0:function(){return Q},BX:function(){return _},C$:function(){return O},Cu:function(){return R},D9:function(){return P},EH:function(){return z},I5:function(){return h},KZ:function(){return o},MT:function(){return C},OE:function(){return s},OR:function(){return l},PJ:function(){return I},Qu:function(){return E},Qx:function(){return d},Rp:function(){return D},S_:function(){return G},U3:function(){return u},Vo:function(){return j},W1:function(){return v},WB:function(){return U},XZ:function(){return S},Xy:function(){return L},Zo:function(){return ee},_m:function(){return c},_t:function(){return W},cV:function(){return m},dl:function(){return N},e5:function(){return A},f9:function(){return H},iJ:function(){return y},jA:function(){return f},jO:function(){return T},lD:function(){return M},mj:function(){return Y},nu:function(){return b},oe:function(){return w},pB:function(){return F},pL:function(){return p},r4:function(){return g},st:function(){return k},ty:function(){return a},ur:function(){return r},vG:function(){return n},wN:function(){return B},wj:function(){return x},wp:function(){return K},x5:function(){return X},xl:function(){return J},y9:function(){return V},zJ:function(){return $}});const a="legacy",s="default",n="recurring",o="follow-up",r="poke",l="message",c="poke",u="normal",d="gift",h="customer",m="entertainmentProfile",g="agent",p="stopped_conversation",f="re_engagement",b="Not available",y="poke",v="Done",C="Scheduled",_="In Progress",k="Done",w="Cancelled",P="Killed",A="Mixed",M="Crashed",T="blue",S="green",I="orange",x="red",E="message",L="pending",R="abuse",F="safe",O="expired",D="red",N="green",Z="Giving out contact info",U="Visible contact info",G="Abusive message about company services",B="Operator is abusive to the customer",j="Customer being abusive",q="Misleading (setting up a date, love, etc)",$="Illegal: drugs, violence, children, animals, etc.",H="New category",z="Bad Quality / Answer is not relevant",W="Other",V=120,J="other",Q="2923755",Y=0,K="[a-f0-9]{16,}",X=`^${K}(.webp)?$`,ee=new Set(["stopped_conversation","re_engagement"])},67473:function(e,t,i){"use strict";i.d(t,{Ar:function(){return r},G7:function(){return o},H3:function(){return d},MY:function(){return c},SP:function(){return a},TO:function(){return u},ZW:function(){return m},Zm:function(){return l},bF:function(){return h},j_:function(){return s},kB:function(){return n},rc:function(){return g}});const a=e=>"fulfilled"===e.status;var s,n,o,r,l,c,u,d,h,m,g;(function(e){e["Success"]="success",e["Error"]="error",e["Info"]="info",e["Warning"]="warning"})(s||(s={})),function(e){e["NSFW"]="NSFW",e["SFW"]="SFW",e["AGENT_ONLY"]="AGENT_ONLY"}(n||(n={})),function(e){e["Operator"]="CHAT_OPERATOR",e["Poker"]="CHAT_POKER",e["Manager"]="CHAT_MANAGER",e["Admin"]="CHAT_ADMIN",e["AbuseChecker"]="CHAT_ABUSE_CHECKER",e["BetaAccess"]="CHAT_BETA_ACCESS",e["Developer"]="DEBUG_DEVELOPER",e["ChatSuggestions"]="CHAT_SUGGESTIONS",e["OperatorSFW"]="CHAT_OPERATOR:SFW",e["OperatorNSFW"]="CHAT_OPERATOR:NSFW",e["OperatorAgentOnly"]="CHAT_OPERATOR:AGENT_ONLY"}(o||(o={})),function(e){e["Age18_25"]="18-25",e["Age26_35"]="26-35",e["Age36_45"]="36-45",e["Age46_54"]="46-54",e["Age55_99"]="55-99",e["Unknown"]="unknown"}(r||(r={})),function(e){e["Couple"]="couple",e["Female"]="female",e["Male"]="male",e["Transgender"]="transgender",e["Unknown"]="unknown"}(l||(l={})),function(e){e["MoreOneMonth"]="older than 1 month",e["WithinOneMonth"]="within 1 month",e["WithinTwoWeeks"]="within 1 week",e["WithinOneWeek"]="within 2 weeks"}(c||(c={})),function(e){e["HasCredits"]="has credits",e["HadCredits"]="had credits",e["NeverHadCredits"]="never had credits"}(u||(u={})),function(e){e["WithPhoto"]="with photo",e["WithoutPhoto"]="without photo"}(d||(d={})),function(e){e["WithText"]="with text",e["WithoutText"]="without text"}(h||(h={})),function(e){e["InConversation"]="conversation",e["NotInConversation"]="not in conversation"}(m||(m={})),function(e){e[e["FIVE_MINUTES"]=5]="FIVE_MINUTES",e[e["THIRTY_MINUTES"]=30]="THIRTY_MINUTES",e[e["ONE_HOUR"]=60]="ONE_HOUR",e[e["THREE_HOURS"]=180]="THREE_HOURS",e[e["SIX_HOURS"]=360]="SIX_HOURS",e[e["TWELVE_HOURS"]=720]="TWELVE_HOURS",e[e["ONE_DAY"]=1440]="ONE_DAY",e[e["TWO_DAYS"]=2880]="TWO_DAYS"}(g||(g={}))},7710:function(e,t,i){"use strict";i.d(t,{$y:function(){return g},AE:function(){return d},DC:function(){return y},Fb:function(){return v},I2:function(){return h},k8:function(){return u},yY:function(){return c}});i(57658);var a=i(715),s=i(68929),n=i.n(s),o=i(48403),r=i.n(o),l=i(48541);const c=5,u={COMPANY_INFORMATION:{testid:"information",title:"Company Information",icon:"mdi-information-variant"},EMAIL_PROVIDER_VARIANTS:{testid:"email",title:"Email provider variants",icon:"mdi-email-outline"},NATURE_OF_SERVICE:{testid:"nature",title:"Nature of service",icon:"mdi-cards-playing-outline"}},d="No filter (all words)",h="For all countries",m={VERY_LIKELY:"red",LIKELY:"orange darken-2",POSSIBLE:"blue darken-2",UNLIKELY:"light-blue",VERY_UNLIKELY:"light-blue lighten-3",LIKELIHOOD_UNSPECIFIED:"blue"},g=(()=>(delete m.LIKELIHOOD_UNSPECIFIED,Object.keys(m).map((e=>({color:m[e],key:e,title:r()(e.replace(/_/g," "))})))))();function p(e){const[t,i]=e?.split(" ")||["",""];return a.Z[n()(t)]?.[i?.replace("-","")||"base"]}function f(e,t){const i=p(m[t]),a="border-radius: 5px; padding-left: 2px; padding-right: 2px;",s=`<strong class="white--text" style='background-color: ${i}; ${a}'>`,n="</strong>";return`${s}${e}${n}`}function b(e,t){const i=e.indexOf(t.quote),a=i+t.quote.length,s=e.substring(0,i),n=e.substring(i,a),o=e.substring(a),r=[];return s&&r.push({type:"text",original:s,displayText:s}),r.push({type:"match",original:n,displayText:f(n,t.likelihood),likelihood:t.likelihood,matchType:t.type}),o&&r.push({type:"text",original:o,displayText:o}),r}function y(e,t=[]){if(!e)return[];const i=/ +(?= )/g,a=e.replace(i,""),s=[{type:"text",original:a,displayText:a}];return t.forEach((e=>{const t=s.findIndex((t=>"text"===t.type&&t.original.indexOf(e.quote)>=0));t<0||s.splice(t,1,...b(s[t].original,e))})),s}function v(e){return e?(0,l.p)().categories[e.message.senderType]?.find((t=>t.value===e.report.category))?.icon||"mdi-block-helper":""}},46104:function(e,t,i){"use strict";i.d(t,{Z:function(){return x}});var a=i(32875),s=i(25497),n=i(3738),o=i(11609),r=i(18506),l=i(10033),c=i(48185),u=i(8233),d=i(9341),h=i(63161),m=i(82151),g=i(68357),p=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(l.Z,{attrs:{justify:"center"}},[e.initialized&&e.topicsCount>0?t(o.Z,{staticStyle:{height:"100%"},attrs:{value:e.isAnnouncementDialogShown,persistent:"","max-width":"800"}},[t(d.Z,{attrs:{"non-linear":""},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}},[e.topicsCount>1?t(m.Rp,[e._l(e.announcementsByTopics,(function(i,a){return[t(g.Z,{key:`${a+1}-step`,attrs:{step:a+1,editable:""}},[e._v(" "+e._s(e.truncateTopicTitle(i.topic.title))+" ")]),a!==e.topicsCount-1?t(r.Z,{key:`${a+1}-divider`}):e._e()]}))],2):e._e(),t(m.gd,e._l(e.announcementsByTopics,(function(i,o){return t(h.Z,{key:`${o}-content`,attrs:{step:o+1}},[t(s.Z,{staticClass:"mb-12",attrs:{elevation:"0"}},[e.isLoading?t(c.Z,{attrs:{type:"list-item-three-line"}}):t("div",[t("div",{staticClass:"d-flex justify-space-between align-start"},[t("div",{staticClass:"d-flex align-center mb-6"},[i.topic.emoji?t("div",{staticClass:"mr-2 text-h4"},[e._v(" "+e._s(i.topic.emoji)+" ")]):e._e(),t("div",{staticClass:"font-weight-bold"},[t("span",{attrs:{"data-testid":`announcements-country-${i.locale}`}},[e._v(" "+e._s(i.topic.title)+" ")]),t(n.Z,{staticClass:"white--text px-2",attrs:{small:"",color:"red","data-testid":`announcements-count-${i.locale}`}},[e._v(" "+e._s(i.announcements&&Object.keys(i.announcements).length)+" ")])],1)]),t("div",{staticClass:"d-flex align-center mb-2"},[t("Flag",{attrs:{code:e.getFlagCodeByLocale(i.locale),size:"l"}})],1)]),e._l(i.announcements,(function(i){return t("div",{key:i.id,staticClass:"mb-4"},[t("span",{attrs:{"data-testid":"announcementMessage"},domProps:{innerHTML:e._s(e.displayMessage(i.message))}}),t("span",{staticClass:"d-block text-caption blue-grey--text",attrs:{"data-testid":"announcement-updateDate"}},[e._v(" "+e._s(e.displayDate(i.updatedAt))+" ")])])}))],2)],1),t("div",{staticClass:"d-flex py-2"},[e.currentPage>1?t(a.Z,{staticClass:"mr-2",attrs:{"x-large":""},on:{click:e.previousStep}},[e._v(" Previous ")]):e._e(),t(u.Z),e.currentPage<e.topicsCount?t(a.Z,{attrs:{"x-large":""},on:{click:e.nextStep}},[e._v(" Next ")]):e._e(),e.currentPage>=e.topicsCount?t(a.Z,{attrs:{"x-large":"",color:"blue-grey lighten-4"},on:{click:e.closeDialog}},[e._v(" Close ")]):e._e()],1)],1)})),1)],1)],1):e._e()],1)},f=[],b=(i(57658),i(20144)),y=i(69876),v=i(62769),C=i(39138),_=i.n(C),k=i(27484),w=i.n(k),P=i(27722),A=i(78397),M=(0,b.defineComponent)({data(){return{now:w()().format("D MMMM YYYY"),isLoading:!1,currentPage:1}},computed:{...(0,y.rn)(P.F,["initialized"]),...(0,y.rn)(A.a,["announcementsTopics","isAnnouncementDialogShown","announcementsPerLocale"]),announcementsByTopics(){const e=[];return Object.keys(this.announcementsTopics).forEach((t=>{Object.keys(this.announcementsTopics[t]).forEach((i=>{this.announcementsPerLocale[t]?.[i]&&e.push({locale:t,topic:this.announcementsTopics[t][i],announcements:this.announcementsPerLocale[t][i]})}))})),e},topicsCount(){return this.announcementsByTopics.length}},watch:{initialized(){this.initialized&&(this.isLoading=!0,(0,A.a)().getAnnouncementsForOperator())},announcementsByTopics(){this.isLoading=!1}},mounted(){this.initialized&&(this.isLoading=!0,(0,A.a)().getAnnouncementsForOperator())},methods:{getRegionNameByLocale:v.OW,getFlagCodeByLocale:v.up,displayDate(e){return w()(e?.toDate()).format("D MMMM YYYY")},displayMessage(e){return this.$sanitize(e.replace(/\n/g,"<br />"))},closeDialog(){(0,A.a)().isAnnouncementDialogShown=!1},previousStep(){this.currentPage-=1},nextStep(){this.currentPage+=1},truncateTopicTitle(e){return _()(e,{length:Math.max(Math.round(60/this.topicsCount),7)})}}}),T=M,S=i(1001),I=(0,S.Z)(T,p,f,!1,null,"1dc6a4f0",null),x=I.exports},14024:function(e,t,i){"use strict";i.d(t,{Z:function(){return ne}});var a=i(8250),s=i(41293),n=i(32875),o=i(18506),r=i(1442),l=i(18946),c=i(3982),u=i(13728),d=i(27275),h=i(8233),m=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isUserSessionAuthorized?t(a.Z,{attrs:{"data-testid":"chatHomeBaseBar",app:"",color:"primary",dark:"",dense:"","clipped-left":"","clipped-right":""}},[t("router-link",{staticClass:"white--text text-decoration-none",attrs:{to:"/"}},[t(l.Z,{staticClass:"mr-3",attrs:{src:e.imgSrc,width:"36",height:"36"}})],1),e.claimedChat?[e.isChatPage?t("LogbookFloatingPanel"):t("ChatFloatingPanel")]:e._e(),t(h.Z),e.isSmallDevice?[t(s.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),t(d.Z,{attrs:{right:"",color:"primary",app:"",absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(c.Z,{attrs:{nav:"",dense:""}},[t(u.Z,{staticClass:"justify-center"},[t("HeaderProfileToolbar")],1),t(o.Z),e._l(e.menuItems,(function(i){return t(u.Z,{directives:[{name:"role",rawName:"v-role",value:i.roles.join("|"),expression:"item.roles.join('|')"}],key:i.id},[t(n.Z,{attrs:{"data-testid":i.id,text:"",block:"",to:i.link}},[i.icon?t(r.Z,[e._v(e._s(i.icon))]):t("span",[e._v(" "+e._s(i.title)+" ")])],1)],1)}))],2)],1)]:[e._l(e.menuItems,(function(i){return t(n.Z,{directives:[{name:"role",rawName:"v-role",value:i.roles.join("|"),expression:"item.roles.join('|')"}],key:i.link,attrs:{text:"",to:i.link,"data-testid":i.id}},[i.icon?t(r.Z,[e._v(e._s(i.icon))]):t("span",[e._v(" "+e._s(i.title)+" ")])],1)})),t("HeaderProfileToolbar")]],2):e._e()},g=[],p=i(20144),f=i(67473),b=i(30920),y=i(98091),v=i(3738),C=i(51766),_=i(25063),k=i(21122),w=i(74178),P=i(51834),A=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.user.uid?t(P.lj,[t(w.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t(n.Z,e._g(e._b({attrs:{"data-testid":"userProfileButton",text:"",color:"white",dark:""}},"v-btn",a,!1),i),[t(y.Z,{staticClass:"align-self-center",attrs:{size:"40px"}},[e.user.img?t("img",{attrs:{alt:"user image",email:e.user.img}}):e.user.email?t("v-gravatar",{attrs:{email:e.user.email,protocol:"https"}}):e._e()],1),t("span",{staticClass:"mx-2 align-self-center",attrs:{"data-testid":"usernameText"}},[e._v(" "+e._s(e.user.displayName||e.user.email)+" "),e.user.score?t(v.Z,{attrs:{small:"",label:"",color:"blue"}},[e._v(" "+e._s(e.user.score)+" ")]):e._e(),t("span",{directives:[{name:"role",rawName:"v-role",value:"DEBUG_DEVELOPER",expression:"'DEBUG_DEVELOPER'"}],staticClass:"tenant-id caption text-lowercase",attrs:{"data-testid":"tenantId"}},[e._v(" "+e._s(e.tenant||"non-tenant mode")+" ")])],1),t(r.Z,[e._v("mdi-chevron-down")])],1)]}}],null,!1,3182917198)},[t(c.Z,{attrs:{shaped:""}},[t(_.Z,{attrs:{color:"primary"}},e._l(e.menuItems,(function(i){return t(u.Z,{key:i.id,attrs:{"data-testid":i.id,to:i.to,"v-role":i.roles&&i.roles.join("|")},on:{click:function(e){i.onClick&&i.onClick()}}},[t(k.Z,[t(r.Z,{staticClass:"mr-0",attrs:{left:""}},[e._v(e._s(i.icon))])],1),t(C.km,[t(C.V9,[e._v(e._s(i.title))])],1)],1)})),1)],1)],1)],1):e._e()},M=[],T=i(69876),S=i(94677),I=i(60359),x=(0,p.defineComponent)({computed:{...(0,T.rn)(S.m,["tenant","user"]),menuItems(){return[{icon:"mdi-chart-box",title:"My statistics",to:"/personal-stats",id:"myStatsButton",roles:[f.G7.Admin,f.G7.Operator]},{icon:"mdi-cog",title:"Settings",to:"/personal-settings",id:"settingsButton"},{icon:"mdi-logout",title:"Log out",onClick:this.signOut,id:"logOutButton"}]}},methods:{async signOut(){try{await(0,S.m)().signOut()}catch(e){(0,I.G)().addNotification({message:`Failed signout: ${e}.`,type:f.j_.Error})}}}}),E=x,L=i(1001),R=(0,L.Z)(E,A,M,!1,null,"592f7b08",null),F=R.exports,O=i(66284),D=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(O.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:a}){return[t("div",e._g(e._b({staticClass:"chat-floating-panel d-flex align-center mx-2",class:e.isSmallDevice?"mobile-position":"desktop-position",staticStyle:{gap:"0.5rem"}},"div",a,!1),i),[t(v.Z,{attrs:{color:"indigo darken-4"},on:{click:e.toClaimedChat}},[t(r.Z,{staticClass:"mr-2"},[e._v("mdi-chat-processing")]),t("transition",{attrs:{name:"fade-slide"}},[t("ChatCountdown",{staticClass:"mx-1 mt-1",attrs:{isVisibleOnlyWhenActive:""}})],1)],1)],1)]}}])},[t("span",[e._v("You still have a chat claimed")])])},N=[],Z=(i(57658),i(21056)),U=i(35023),G=(0,p.defineComponent)({name:"ChatFloatingPanel",components:{ChatCountdown:U.Z},data(){return{CUSTOMER_SENDER_TYPE:Z.I5,PROFILE_SENDER_TYPE:Z.cV,isLogbookDialogOpen:!1}},computed:{isSmallDevice(){return this.$vuetify.breakpoint.smAndDown}},methods:{toClaimedChat(){this.$router.push("/chat/claimed")}}}),B=G,j=(0,L.Z)(B,D,N,!1,null,"1fe99b4c",null),q=j.exports,$=i(25497),H=i(15474),z=i(11609),W=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"logbook-floating-panel d-flex align-center mx-2",class:e.isSmallDevice?"mobile-position":"desktop-position",staticStyle:{gap:"0.5rem"}},[t(v.Z,{staticClass:"px-2",attrs:{color:"transparent","data-testid":"logbookFloatButton"},on:{click:function(t){e.isLogbookDialogOpen=!0}}},[t("div",{staticClass:"logbook-icons"},[t("div",{staticClass:"customer-area icon"},[t(r.Z,{attrs:{color:"blue darken-2 mx-n2",large:""}},[e._v("mdi-bookmark")])],1),t("div",{staticClass:"customer-area text-over-icon",attrs:{"data-testid":"logbookNumberCustomerInFloat"}},[e._v(" "+e._s(e.countLogbooks.customer)+" ")]),t("div",{staticClass:"profile-area icon"},[t(r.Z,{attrs:{color:"purple accent-4 mx-n2",large:""}},[e._v("mdi-bookmark")])],1),t("div",{staticClass:"profile-area text-over-icon",attrs:{"data-testid":"logbookNumberProfileInFloat"}},[e._v(" "+e._s(e.countLogbooks.entertainmentProfile)+" ")])])]),t(z.Z,{attrs:{fullscreen:e.isExtraSmallDevice,"hide-overlay":!1,"content-class":"no-shadow-dialog "+(e.isExtraSmallDevice?"overflow-y-auto":"overflow-y-visible")},model:{value:e.isLogbookDialogOpen,callback:function(t){e.isLogbookDialogOpen=t},expression:"isLogbookDialogOpen"}},[t("div",{staticClass:"pa-4 d-flex flex-column align-center justify-start",class:{"custom-dialog-overlay ":e.isExtraSmallDevice},on:{click:function(t){if(t.target!==t.currentTarget)return null;e.isLogbookDialogOpen=!1}}},[t("div",{staticClass:"d-flex justify-center mb-4 black close-button-block",attrs:{"data-testid":"mobileLogbooksCloseButton"}},[t(n.Z,{attrs:{block:e.isExtraSmallDevice,outlined:"",color:"white"},on:{click:function(t){e.isLogbookDialogOpen=!1}}},[e._v("Close")])],1),t("div",{staticClass:"d-flex flex-column align-center justify-center",staticStyle:{height:"100%",width:"100%"}},[t("div",{staticClass:"d-flex justify-center flex-column flex-sm-row",staticStyle:{width:"100%","max-width":"800px"}},[t($.Z,{staticClass:"customer-shadow px-0 px-sm-4 mb-4 mr-sm-6"},[t(H.ZB,[t("h3",{staticClass:"subtitle-1 text-uppercase text-center mb-2"},[e._v("Customer Logbooks")]),t("LogbookPanel",{attrs:{concerning:e.CUSTOMER_SENDER_TYPE}})],1)],1),t($.Z,{staticClass:"profile-shadow px-0 px-sm-4 mb-4"},[t(H.ZB,[t("h3",{staticClass:"subtitle-1 text-uppercase text-center mb-2"},[e._v("Profile Logbooks")]),t("LogbookPanel",{attrs:{concerning:e.PROFILE_SENDER_TYPE}})],1)],1)],1)])])])],1)},V=[],J=i(42963),Q=i(73222),Y=(0,p.defineComponent)({name:"ChatFloatingPanel",components:{LogbookPanel:J.Z},data(){return{CUSTOMER_SENDER_TYPE:Z.I5,PROFILE_SENDER_TYPE:Z.cV,isLogbookDialogOpen:!1}},computed:{...(0,T.rn)(Q.a,["countLogbooks"]),isSmallDevice(){return this.$vuetify.breakpoint.smAndDown},isExtraSmallDevice(){return this.$vuetify.breakpoint.xsOnly}}}),K=Y,X=(0,L.Z)(K,W,V,!1,null,"4b8ea576",null),ee=X.exports,te=i(27722),ie=(0,p.defineComponent)({components:{HeaderProfileToolbar:F,ChatFloatingPanel:q,LogbookFloatingPanel:ee},data(){return{drawer:!1,menuItems:[{link:"/chat",title:"Chat",roles:[f.G7.Admin,f.G7.Operator],id:"chatButton"},{link:"/pokes",title:"Poke",roles:[f.G7.Admin,f.G7.Poker],id:"pokeButton"},{link:"/abuse",title:"Abuse",roles:[f.G7.Admin,f.G7.AbuseChecker],id:"abuseButton"},{link:"/announcements",title:"Notices",roles:[f.G7.Admin],id:"announcementsButton"},{link:"/statistics",title:"Statistics",roles:[f.G7.Admin,f.G7.Manager,f.G7.Poker,f.G7.AbuseChecker],id:"statisticsButton"},{link:"/connectedOperators",title:"Connected Operators",roles:[f.G7.Admin,f.G7.Manager],id:"connectedOperatorsButton"},{link:"/trigger",icon:"mdi-message-settings",roles:[f.G7.Admin],id:"triggerButton"},{link:"/debug",icon:"mdi-bug",roles:[f.G7.Developer],id:"debugButton"}]}},computed:{...(0,T.rn)(S.m,["user","isUserSessionAuthorized"]),...(0,T.rn)(Q.a,["claimedChat"]),isSmallDevice(){return this.$vuetify.breakpoint.smAndDown},isChatPage(){return this.$route.path.startsWith("/chat")},imgSrc(){return(0,te.F)().getLogoImageFilename("-white")}},watch:{claimedChat:{handler(e,t){e?(0,I.G)().showClaimedChatNotification():((0,I.G)().resetClaimedChatNotification(),this.isChatPage||b.m.dispatch("chat",t?.locale,"disableClaimedChatListener",null))},immediate:!0}}}),ae=ie,se=(0,L.Z)(ae,m,g,!1,null,"78a1ea1c",null),ne=se.exports},35023:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.isVisible?t("div",{staticClass:"flex flex-column",attrs:{"data-testid":"chatCountdown"}},[t("div",{staticClass:"countdown-bar rounded-pill white",style:`border-color: ${e.hexColor} !important;`},[t("div",{staticClass:"countdown-fill rounded-pill",class:e.color,style:`width: ${e.timeLeftPercent}%`})]),t("div",{staticClass:"countdown-time caption font-weight-bold d-flex justify-center",style:`color: ${e.hexColor}`},[t("span",[e._v(" "+e._s(e.timeLeftDisplay))])])]):e._e()},s=[],n=i(20144),o=i(69876),r=i(715),l=i(27484),c=i.n(l),u=i(73222);const d=60,h=30,m=[{color:"blue",hexColor:r.Z.blue.base},{color:"orange darken-4",hexColor:r.Z.orange.darken4},{color:"red",hexColor:r.Z.red.base}];var g=(0,n.defineComponent)({name:"ChatCountdown",props:{deadline:{type:Date,default:null},isVisibleOnlyWhenActive:{type:Boolean,default:!1}},emits:["end"],data(){return{intervalId:null,startDate:c()(),timeLeftSeconds:0,levelColorIndex:0}},computed:{...(0,o.rn)(u.a,["claimedChat"]),endDateJs(){return c()(this.deadline||this.claimedChat?.claimExpiresAt?.toDate())},fromStartToEndSeconds(){return this.endDateJs.diff(this.startDate,"second")},timeLeftPercent(){return this.timeLeftSeconds/this.fromStartToEndSeconds*100},timeLeftDisplay(){if(!this.timeLeftSeconds||this.timeLeftSeconds<0)return"—";const e=this.timeLeftSeconds%60,t=(this.timeLeftSeconds-e)/60;return`${t}:${e<10?"0":""}${e}`},isActive(){return this.timeLeftPercent>0&&this.timeLeftPercent<=100},isVisible(){return!this.isVisibleOnlyWhenActive||this.isActive},color(){return m[this.levelColorIndex].color},hexColor(){return m[this.levelColorIndex].hexColor}},mounted(){this.startDate=c()(),this.tick(),this.setupCountdownTimer()},methods:{setupCountdownTimer(){clearInterval(this.intervalId),this.intervalId=setInterval(this.tick,1e3)},tick(){if(!this.endDateJs)return clearInterval(this.intervalId),this.timeLeftSeconds=0,void(this.levelColorIndex=0);this.timeLeftSeconds=this.endDateJs.diff(c()(),"second"),this.levelColorIndex=this.timeLeftSeconds>d?0:this.timeLeftSeconds>h?1:2,this.timeLeftSeconds<=0&&(clearInterval(this.intervalId),this.$emit("end"))}}}),p=g,f=i(1001),b=(0,f.Z)(p,a,s,!1,null,"0b792239",null),y=b.exports},42963:function(e,t,i){"use strict";i.d(t,{Z:function(){return H}});var a=i(32875),s=i(25497),n=i(3738),o=i(40912),r=i(1442),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(a.Z,{staticClass:"mb-2",attrs:{rounded:"",block:"",outlined:"",dark:"",color:e.colorBySenderType(e.concerning),"data-testid":`addNewLogbookButton-${e.concerning}`},on:{click:function(t){return e.openCreateDialog()}}},[t(r.Z,{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-bookmark-outline")]),e._v(" Add new log ")],1),t("LogBookDialog",{attrs:{concerning:e.concerning,logToEdit:e.logToEdit},model:{value:e.hasOpenDialog,callback:function(t){e.hasOpenDialog=t},expression:"hasOpenDialog"}}),e.logsCount>0?t("div",{staticClass:"mx-n4"},e._l(Object.keys(e.logsByCategories),(function(i){return t(s.Z,{key:i,staticClass:"px-4 pt-1 pb-2 mb-2",attrs:{color:"blue-grey lighten-5",elevation:"0",rounded:"0","data-testid":`logbookCategory-${i}`}},[t("h4",{staticClass:"my-2 overline compact-line-height d-flex align-center",class:e.logsCategories[i].cssColor},[t(r.Z,{staticClass:"mr-1",attrs:{dense:"",color:e.logsCategories[i].color}},[e._v(" "+e._s(e.logsCategories[i].icon)+" ")]),t("span",{attrs:{"data-testid":`logbookCategoryTitle-${i}`}},[e._v(" "+e._s(e.logsCategories[i].title)+" ")])],1),e._l(Object.values(e.logsByCategories[i]),(function(a){return t(o.Z,{key:a.id,scopedSlots:e._u([{key:"default",fn:function({hover:s}){return[t("div",{staticClass:"mb-2"},["object"===typeof a.content?[a.createdByName&&e.hasLogbookViewAccess?t("span",{staticClass:"blue-grey--text caption"},[e._v(" "+e._s(a.createdByName)+" ")]):e._e(),t("div",{staticClass:"d-flex align-center"},["other"!==a.content.group?t(n.Z,{staticClass:"ml-n1 mr-1",attrs:{small:"",dark:"",color:e.logsCategories[i].color,"data-testid":`logbookGroup-${a.id}`}},[t("span",[e._v(" "+e._s(a.content.group)+" ")])]):e._e(),a.content.groupValue?t("span",{staticClass:"body-2 compact-line-height",attrs:{"data-testid":`logbookGroupValue-${a.id}`}},[e._v(" "+e._s(a.content.groupValue)+" ")]):t("span",{staticClass:"body-2 compact-line-height",attrs:{"data-testid":`logbookComment-${a.id}`}},[e._v(" "+e._s(a.content.value)+" ")])],1),a.content.groupValue?[t("div",{staticClass:"body-2",attrs:{"data-testid":`logbookComment-${a.id}`}},[e._v(" "+e._s(a.content.value)+" ")])]:e._e()]:t("div",{staticClass:"body-2 compact-line-height",attrs:{"data-testid":`logbookOldSupportText-${a.id}`}},[e._v(" "+e._s(a.content)+" ")]),t("div",{staticClass:"d-flex justify-space-between align-center my-1"},[t("div",{staticClass:"d-block compact-line-height caption blue-grey--text",attrs:{"data-testid":`logbookCreatedAt-${a.id}`},domProps:{innerHTML:e._s(a.createdAt&&e.$sanitize(e.displayDateTime(a.createdAt.toDate())))}}),e.isLogAuthor(a)?t("div",{staticClass:"d-flex"},[t(r.Z,{class:e.isSmallDevice?"mr-4":"mr-2",attrs:{small:!e.isSmallDevice,dense:e.isSmallDevice,color:s?"blue-grey darken-4":"blue-grey lighten-3","data-testid":`logbookEditButton-${a.id}`},on:{click:function(t){return e.openEditDialog(a)}}},[e._v(" mdi-pencil ")]),t(r.Z,{attrs:{small:!e.isSmallDevice,dense:e.isSmallDevice,color:s?"blue-grey darken-4":"blue-grey lighten-3","data-testid":`logbookDeleteButton-${a.id}`},on:{click:function(t){return e.deleteLog(a)}}},[e._v(" mdi-delete ")])],1):e._e()])],2)]}}],null,!0)})}))],2)})),1):t("div",{staticClass:"overline",attrs:{"data-testid":"noLogbooks"}},[e._v("No logs yet")])],1)},c=[],u=i(20144),d=i(69876),h=i(94677),m=i(30920),g=i(48799),p=i(67473),f=i(40308),b=i(26186),y=i(5412),v=i(60796),C=i(11609),_=i(29443),k=i(536),w=i(37909),P=i(98493),A=i(32984),M=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(C.Z,{class:`add-log-dialog-${e.concerning}`,attrs:{"content-class":"white","max-width":"600",scrollable:"",value:e.value},on:{input:function(t){return e.$emit("input",t)}}},[t(s.Z,{staticClass:"pa-4 pa-sm-8 pb-2 pb-sm-4",attrs:{elevation:"0"}},[t("div",{staticClass:"d-none d-sm-flex mb-6 justify-space-between"},[e.activeCustomerProfile?t("div",{class:e.colorClassesBySenderType("customer")},[t("span",{staticClass:"caption"},[e._v("customer")]),t("span",{staticClass:"d-block",attrs:{"data-testid":"logbookCustomerName"}},[e._v(e._s(e.activeCustomerProfile.name))])]):e._e(),t("div",[t("h3",{class:e.colorClassesBySenderType(e.concerning),attrs:{"data-testid":"logbookDialogTitle"}},[e._v(e._s(e.dialogTitle))])]),e.activeEntertainmentProfile?t("div",{staticClass:"text-right",class:e.colorClassesBySenderType("profile")},[t("span",{staticClass:"caption"},[e._v("profile")]),t("span",{staticClass:"d-block",attrs:{"data-testid":"logbookProfileName"}},[e._v(e._s(e.activeEntertainmentProfile.name))])]):e._e()]),t("div",{staticClass:"d-block d-sm-none mt-n2"},[t("div",{staticClass:"d-flex justify-space-between mb-4"},[e.activeCustomerProfile?t("div",{class:e.colorClassesBySenderType("customer")},[t("span",{staticClass:"caption"},[e._v("customer")]),t("span",{staticClass:"d-block",attrs:{"data-testid":"logbookCustomerName"}},[e._v(e._s(e.activeCustomerProfile.name))])]):e._e(),e.activeEntertainmentProfile?t("div",{staticClass:"text-right",class:e.colorClassesBySenderType("profile")},[t("span",{staticClass:"caption"},[e._v("profile")]),t("span",{staticClass:"d-block",attrs:{"data-testid":"logbookProfileName"}},[e._v(e._s(e.activeEntertainmentProfile.name))])]):e._e()]),t("div",[t("h3",{staticClass:"text-center",class:e.colorClassesBySenderType(e.concerning),attrs:{"data-testid":"logbookDialogTitle"}},[e._v(" "+e._s(e.dialogTitle)+" ")])])]),t(_.Z,{ref:"newLogbookForm",attrs:{"data-testid":"newLogbookForm"},model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[t(P.Z,{attrs:{label:"Category",items:e.logsCategoriesArray,color:e.sideColor,"menu-props":{maxHeight:400},rules:e.categoryDropdownRules,"data-testid":"logbookCategorySelect"},scopedSlots:e._u([{key:"selection",fn:function({item:i}){return[t(r.Z,{attrs:{color:i.color}},[e._v(e._s(i.icon))]),t("span",{staticClass:"ml-2",class:i.cssColor},[e._v(" "+e._s(i.title)+" ")])]}},{key:"item",fn:function({item:i}){return[t(r.Z,{attrs:{color:i.color}},[e._v(e._s(i.icon))]),t("span",{staticClass:"ml-2",class:i.cssColor},[e._v(" "+e._s(i.title)+" ")])]}}]),model:{value:e.logCategory,callback:function(t){e.logCategory=t},expression:"logCategory"}}),t("div",[e.groupsList?t(w.Z,{attrs:{row:""},model:{value:e.logGroup,callback:function(t){e.logGroup=t},expression:"logGroup"}},e._l(e.groupsList,(function(i){return t(k.Z,{key:i.value,attrs:{label:i.label,value:i.value,color:e.logCategoryColor,"data-testid":`logbookGroupRadio-${i.label}`},on:{click:e.resetAutocompleteField}})})),1):e._e(),e.hasAutocompleteSelect?t(v.Z,{attrs:{items:e.predefinedValues,hint:"You can start typing (autocomplete works)","persistent-hint":"",label:e.predefinedValuesTitle,color:e.sideColor,rules:e.logGroupDropdownRules,"data-testid":"logbookAutocomplete"},model:{value:e.logGroupValue,callback:function(t){e.logGroupValue=t},expression:"logGroupValue"}}):e._e()],1),t(A.Z,{staticClass:"mb-4",attrs:{placeholder:"Comment","auto-grow":"",dense:"",autofocus:"",counter:"",color:e.sideColor,rules:e.commentTextareaRules,"data-testid":"logbookComment"},model:{value:e.logValue,callback:function(t){e.logValue=t},expression:"logValue"}}),t("div",{staticClass:"d-flex justify-center flex-column"},[t(a.Z,{staticClass:"mb-2 white--text",attrs:{disabled:!e.isFormValid||!e.isSaveButtonEnabled,color:e.sideColor,"data-testid":"logbookSaveButton"},on:{click:e.saveLog}},[e._v(" "+e._s(e.isEdit?"Update the log":"Create a new log")+" ")]),t(a.Z,{staticClass:"mb-2",attrs:{color:"blue-grey",outlined:"","data-testid":"logbookCancelButton"},on:{click:e.cancel}},[e._v(" Cancel ")])],1)],1)],1)],1)},T=[],S=i(21056),I=i(48403),x=i.n(I),E=i(20296),L=i.n(E),R=i(60359),F=i(73222),O=i(814),D=i(89177),N=(0,u.defineComponent)({name:"LogBookDialog",props:{concerning:{type:String,required:!0},value:{type:Boolean,default:!1},logToEdit:{type:Object,default:null}},data:function(){return{isFormValid:!1,logsCategoriesArray:Object.keys(b.dn).map((e=>({...b.dn[e],value:e}))),logCategory:"",logGroup:S.xl,logGroupValue:null,logValue:"",categoryDropdownRules:[e=>!!e||"You have to select a category"],logGroupDropdownRules:[e=>!!e||"You have to select a value"],isSaveButtonEnabled:!0}},emits:["input"],computed:{...(0,d.rn)(F.a,["claimedChat"]),...(0,d.rn)(D.y,["activeChat"]),...(0,d.rn)(O.O,["activeCustomerProfile","activeEntertainmentProfile"]),chat(){return this.claimedChat||this.activeChat},isEdit(){return!!this.logToEdit},groupsList(){if(!b.dn[this.logCategory]?.groups)return[];const e={label:x()(S.xl),value:S.xl};return[...b.dn[this.logCategory].groups,e]},predefinedValuesTitle(){return b.dn[this.logCategory]?.title||this.logGroup},predefinedValues(){return b.dn[this.logCategory]?.predefinedValues||[]},hasAutocompleteSelect(){return this.logGroup!==S.xl&&this.predefinedValues?.length>0},sideColor(){return(0,f.W2)(this.concerning)},logCategoryColor(){return b.dn[this.logCategory].color},dialogTitle(){return` ${this.isEdit?"Edit":"New"} ${this.concerning===S.I5?"customer":"profile"} logbook`},commentTextareaRules(){const e=["hobbies","sex"];return[t=>e.includes(this.logCategory)&&this.logGroup!==S.xl||t.length>0||"Comment should contain some information",e=>e.length<=S.y9||`Comment should contain less than ${S.y9} characters`]}},watch:{logCategory(){this.$refs.newLogbookForm?.validate(),this.isEdit||(this.logGroup=this.groupsList[0]?.value),this.logGroupValue=null},logGroup(){this.$refs.newLogbookForm?.validate()},logGroupValue(){this.logGroupValue&&(this.logGroup=this.logGroupValue?.group)},async logToEdit(){this.isEdit?(this.logCategory=this.logToEdit.category,this.logGroup=this.groupsList.find((e=>e.value===this.logToEdit.content.group))?.value||S.xl,await this.$nextTick(),this.logGroupValue={group:this.logGroup,title:this.logToEdit.content.groupValue},this.logValue=this.logToEdit.content?.value||""):this.resetForm()}},mounted(){!this.isEdit&&this.resetForm()},methods:{colorClassesBySenderType:f.b6,cancel(){this.resetForm(),this.$emit("input",!1)},resetForm(){this.logCategory="",this.logGroup="",this.logGroupValue=null,this.logValue=""},resetAutocompleteField(){this.logGroupValue=null},saveLog:L()((async function(){if(this.$refs.newLogbookForm?.validate()){this.isSaveButtonEnabled=!1;try{await m.m.dispatch("log",this.chat.locale,"saveLog",{chatId:this.chat.id,log:{id:this.logToEdit?.id||null,concerning:this.concerning,category:this.logCategory,content:{group:this.logGroup||null,groupValue:this.logGroupValue?.title||null,value:this.logValue.trim()}}}),this.resetForm(),this.$emit("input",!1)}catch(e){(0,R.G)().addNotification({message:"Failed to save logbook entry.",type:p.j_.Error})}this.isSaveButtonEnabled=!0}}),500)}}),Z=N,U=i(1001),G=(0,U.Z)(Z,M,T,!1,null,"d18a8956",null),B=G.exports,j=(0,u.defineComponent)({name:"LogbookPanel",components:{LogBookDialog:B},props:{concerning:{type:String,required:!0}},data(){return{logsCategories:b.dn,hasOpenDialog:!1,logToEdit:null}},computed:{...(0,d.rn)(h.m,["user"]),...(0,d.rn)(F.a,["claimedChat"]),...(0,d.rn)(D.y,["activeChat"]),chat(){return this.claimedChat||this.activeChat},logsByCategories(){return(0,F.a)().sortedCategorizedLogs?.[this.concerning]||{}},logsCount(){return this.logsByCategories?Object.keys(this.logsByCategories).reduce(((e,t)=>e+Object.keys(this.logsByCategories[t]).length),0):0},isSmallDevice(){return this.$vuetify.breakpoint.smAndDown},hasLogbookModifyAccess(){return y.Z.hasAnyRole([p.G7.Admin,p.G7.Manager,p.G7.AbuseChecker])},hasLogbookViewAccess(){return y.Z.hasAnyRole([p.G7.Admin,p.G7.Manager,p.G7.AbuseChecker])}},methods:{displayDateTime:g.LZ,colorBySenderType:f.W2,isLogAuthor(e){return e.createdBy===this.user.uid||this.hasLogbookModifyAccess},async deleteLog(e){try{await m.m.dispatch("log",this.chat.locale,"removeLog",{chatId:this.chat.id,id:e.id})}catch(t){(0,R.G)().addNotification({message:"Failed to remove logbook.",type:p.j_.Error})}},openCreateDialog(){this.logToEdit=null,this.hasOpenDialog=!0},openEditDialog(e){this.logToEdit=e,this.hasOpenDialog=!0}}}),q=j,$=(0,U.Z)(q,l,c,!1,null,"48577e69",null),H=$.exports},30209:function(e,t,i){var a={"./chat-nexus-white.svg":53644,"./chat-nexus.svg":87451,"./chathomebase-white.svg":38637,"./chathomebase.svg":64098,"./conversa-facil-white.svg":70841,"./conversa-facil.svg":71206,"./fallback-logo-white.svg":39685,"./fallback-logo.svg":3351};function s(e){var t=n(e);return i(t)}function n(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id=30209},53644:function(e,t,i){"use strict";e.exports=i.p+"img/chat-nexus-white.ae61fa90.svg"},87451:function(e,t,i){"use strict";e.exports=i.p+"img/chat-nexus.19834104.svg"},38637:function(e,t,i){"use strict";e.exports=i.p+"img/chathomebase-white.d030aa15.svg"},64098:function(e,t,i){"use strict";e.exports=i.p+"img/chathomebase.b14ba294.svg"},70841:function(e,t,i){"use strict";e.exports=i.p+"img/conversa-facil-white.ae61fa90.svg"},71206:function(e,t,i){"use strict";e.exports=i.p+"img/conversa-facil.19834104.svg"},39685:function(e,t,i){"use strict";e.exports=i.p+"img/fallback-logo-white.0207767a.svg"},3351:function(e,t,i){"use strict";e.exports=i.p+"img/fallback-logo.d1800fc1.svg"},24654:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){},87414:function(){}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=e,function(){var e=[];i.O=function(t,a,s,n){if(!a){var o=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],n=e[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&n||o>=n)&&Object.keys(i.O).every((function(e){return i.O[e](a[l])}))?a.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,s,n]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,a){return i.f[a](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+e+"."+{53:"1662f819",110:"fd2eb0bf",259:"53e4f98a",635:"9bdd6f45",766:"7f6fb1ff",875:"2f29b70c",878:"4e0491a0",926:"256f4651",1217:"0b32a8d3",1272:"f070b623",1458:"9a5061cc",1857:"c06de511",1920:"579269b7",1931:"dc8995cf",1966:"af03b5f5",2213:"0930ddf0",2297:"909b9e37",2414:"0be296dc",2473:"744fff6b",2593:"6e6c1740",2637:"b8c45f7f",2678:"994453f3",3277:"5b716cb4",3698:"c6b3059f",3868:"a2214cb9",4223:"514b806c",4485:"095e7d06",4607:"019c52e7",4682:"1672c33f",4866:"3cae9f8d",5060:"b49da6f0",5548:"5d965d9d",5697:"263c75db",5716:"1b2d18bd",5749:"c86f6a0f",5810:"13a2f824",5864:"bd2bb2e6",6031:"22e67623",6081:"79ceb5e7",6380:"bcaff4e7",6493:"fb2fdd59",6502:"fee87bd5",6518:"94c2a533",6680:"1a556f4a",6963:"549351a2",7110:"b23f20b2",7269:"b1424242",7359:"96030538",7889:"94260d8e",7989:"ceeb940f",8192:"e31f85d6",8508:"f5e8be7c",8674:"cb5fa04c",8852:"ba4745cc",9051:"24467498",9195:"6dc0ec8b",9200:"1bbeacaf",9341:"e4a54b7c",9500:"7967acba",9621:"7cf018d8",9662:"4e4d4291"}[e]+".js"}}(),function(){i.miniCssF=function(e){return"css/"+e+"."+{53:"8f6675b1",635:"72be2923",875:"37ed9e17",926:"b5cb606c",1272:"e767c0b0",1458:"a438deff",1857:"1d45a616",1920:"23fd7727",1931:"763071cf",1966:"7cad95d5",2213:"a438deff",2414:"9e267bc2",2473:"0f484ede",2593:"64e98d8b",2678:"bd287ccb",3277:"a3170b23",3868:"ea74f56d",4223:"44f5d4a3",4607:"23c0c54a",4682:"3492606f",4866:"1d45a616",5060:"4e80be8d",5548:"3f8392ea",5716:"ae1f84f5",5810:"bf9de533",6031:"1fff919a",6380:"8d4208be",6493:"1d45a616",6518:"68b74869",6680:"1d45a616",6963:"d2ab9196",7269:"aa797ba1",7359:"3072d255",7889:"bb958b0a",8674:"7b8fea08",8852:"4488f5c1",9051:"21a2ae4e",9200:"9c888e6e",9341:"e1568de2",9500:"a438deff",9621:"64e98d8b",9662:"3891e4b5"}[e]+".css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ui:";i.l=function(a,s,n,o){if(e[a])e[a].push(s);else{var r,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+n){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.setAttribute("data-webpack",t+n),r.src=a),e[a]=[s];var h=function(t,i){r.onerror=r.onload=null,clearTimeout(m);var s=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(i)})),t)return t(i)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,i,a,s){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var o=function(i){if(n.onerror=n.onload=null,"load"===i.type)a();else{var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,n.parentNode&&n.parentNode.removeChild(n),s(l)}};return n.onerror=n.onload=o,n.href=t,i?i.parentNode.insertBefore(n,i.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var i=document.getElementsByTagName("link"),a=0;a<i.length;a++){var s=i[a],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){s=o[a],n=s.getAttribute("data-href");if(n===e||n===t)return s}},a=function(a){return new Promise((function(s,n){var o=i.miniCssF(a),r=i.p+o;if(t(o,r))return s();e(a,r,null,s,n)}))},s={2143:0};i.f.miniCss=function(e,t){var i={53:1,635:1,875:1,926:1,1272:1,1458:1,1857:1,1920:1,1931:1,1966:1,2213:1,2414:1,2473:1,2593:1,2678:1,3277:1,3868:1,4223:1,4607:1,4682:1,4866:1,5060:1,5548:1,5716:1,5810:1,6031:1,6380:1,6493:1,6518:1,6680:1,6963:1,7269:1,7359:1,7889:1,8674:1,8852:1,9051:1,9200:1,9341:1,9500:1,9621:1,9662:1};s[e]?t.push(s[e]):0!==s[e]&&i[e]&&t.push(s[e]=a(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={2143:0};i.f.j=function(t,a){var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else if(9051!=t){var n=new Promise((function(i,a){s=e[t]=[i,a]}));a.push(s[2]=n);var o=i.p+i.u(t),r=new Error,l=function(a){if(i.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",r.name="ChunkLoadError",r.type=n,r.request=o,s[1](r)}};i.l(o,l,"chunk-"+t,t)}else e[t]=0},i.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,o=a[0],r=a[1],l=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(l)var u=l(i)}for(t&&t(a);c<o.length;c++)n=o[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(u)},a=self["webpackChunkui"]=self["webpackChunkui"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=i.O(void 0,[4998],(function(){return i(8394)}));a=i.O(a)})();
//# sourceMappingURL=app.52c446fe.js.map